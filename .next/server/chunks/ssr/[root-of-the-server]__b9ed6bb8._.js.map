{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/ai/flows/generate-widget-from-query.ts"],"sourcesContent":["// This file is machine-generated - edit at your own risk.\r\n\r\n'use server';\r\n\r\n/**\r\n * @fileOverview This file defines a Genkit flow that generates a widget based on a user query. It takes a query as input and returns a JSON object representing the widget data.\r\n *\r\n * @function generateWidgetFromQuery - The main function that takes a user query and returns widget data.\r\n * @interface GenerateWidgetFromQueryInput - The input type for the generateWidgetFromQuery function.\r\n * @interface GenerateWidgetFromQueryOutput - The output type for the generateWidgetFromQuery function.\r\n */\r\n\r\nimport {ai} from '@/ai/genkit';\r\nimport {z} from 'genkit';\r\nimport axios from 'axios';\r\n\r\nconst GenerateWidgetFromQueryInputSchema = z.object({\r\n  query: z.string().describe('The user query to generate the widget.'),\r\n  workspaceData: z.array(z.any()).optional().describe('Data from all open workspaces to provide context.'),\r\n});\r\nexport type GenerateWidgetFromQueryInput = z.infer<typeof GenerateWidgetFromQueryInputSchema>;\r\n\r\nconst GenerateWidgetFromQueryOutputSchema = z.object({\r\n  answer: z.string().describe('A natural language answer to the user query.'),\r\n  workspace_to_load: z.string().optional().describe('If the user wants to open a workspace, this is the name of the workspace to load.'),\r\n});\r\nexport type GenerateWidgetFromQueryOutput = z.infer<typeof GenerateWidgetFromQueryOutputSchema>;\r\n\r\nexport async function generateWidgetFromQuery(input: GenerateWidgetFromQueryInput): Promise<GenerateWidgetFromQueryOutput> {\r\n  return generateWidgetFromQueryFlow(input);\r\n}\r\n\r\nconst generateWidgetFromQueryFlow = ai.defineFlow(\r\n  {\r\n    name: 'generateWidgetFromQueryFlow',\r\n    inputSchema: GenerateWidgetFromQueryInputSchema,\r\n    outputSchema: GenerateWidgetFromQueryOutputSchema,\r\n  },\r\n  async (input) => {\r\n    const webhookUrl = process.env.APP_LLM_WEBHOOK_URL;\r\n    const llmConfig = process.env.APP_LLM_CONFIG;\r\n\r\n    if (!webhookUrl) {\r\n      throw new Error('APP_LLM_WEBHOOK_URL is not configured in the .env file.');\r\n    }\r\n\r\n    try {\r\n      const fullInput = {\r\n        query: input.query,\r\n        context: input.workspaceData,\r\n      };\r\n\r\n      const payload = {\r\n        input: fullInput,\r\n      };\r\n\r\n      // Use POST to send data in the body, avoiding URL length limits.\r\n      const response = await axios.post(webhookUrl, payload, {\r\n        params: {\r\n          llm: llmConfig?.toLowerCase(),\r\n        },\r\n      });\r\n\r\n      if (response.status === 200 && response.data) {\r\n        let responseData = response.data;\r\n        // Handle if response is an array\r\n        if (Array.isArray(responseData) && responseData.length > 0) {\r\n          responseData = responseData[0];\r\n        }\r\n\r\n        if (typeof responseData === 'object' && responseData !== null) {\r\n          return {\r\n            answer: responseData.answer || responseData.output || \"I received a response, but it was empty.\",\r\n            workspace_to_load: responseData.workspace_to_load\r\n          };\r\n        }\r\n        \r\n        // Handle plain string response for backward compatibility\r\n        return {\r\n          answer: responseData,\r\n        };\r\n      } else {\r\n        return { answer: `The webhook responded with status: ${response.status}` };\r\n      }\r\n    } catch (error) {\r\n      console.error('Error calling LLM webhook:', error);\r\n      let errorMessage = 'An error occurred while contacting the LLM webhook.';\r\n      if (axios.isAxiosError(error) && error.response) {\r\n        errorMessage = `Webhook error: ${error.response.status} - ${error.response.statusText}`;\r\n      } else if (axios.isAxiosError(error)) {\r\n        errorMessage = `Webhook request failed: ${error.message}`;\r\n      }\r\n      return { answer: errorMessage };\r\n    }\r\n  }\r\n);\r\n"],"names":[],"mappings":";;;;;;IA4BsB,0BAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/ai/flows/agent-specific-widget.ts"],"sourcesContent":["'use server';\r\n\r\n/**\r\n * @fileOverview Dynamically assigns a ServiceNow agent to each widget based on its data.\r\n *\r\n * - agentSpecificWidget - A function that handles the agent assignment process.\r\n * - AgentSpecificWidgetInput - The input type for the agentSpecificWidget function.\r\n * - AgentSpecificWidgetOutput - The return type for the agentSpecificWidget function.\r\n */\r\n\r\nimport {ai} from '@/ai/genkit';\r\nimport {z} from 'genkit';\r\n\r\nconst AgentSpecificWidgetInputSchema = z.object({\r\n  widgetData: z.string().describe('The data associated with the widget.'),\r\n});\r\nexport type AgentSpecificWidgetInput = z.infer<typeof AgentSpecificWidgetInputSchema>;\r\n\r\nconst AgentSpecificWidgetOutputSchema = z.object({\r\n  agentType: z.string().describe('The type of ServiceNow agent assigned to the widget (e.g., incident agent, change agent).'),\r\n  agentBehavior: z.string().describe('The specific behavior of the agent within the widget.'),\r\n});\r\nexport type AgentSpecificWidgetOutput = z.infer<typeof AgentSpecificWidgetOutputSchema>;\r\n\r\nexport async function agentSpecificWidget(input: AgentSpecificWidgetInput): Promise<AgentSpecificWidgetOutput> {\r\n  return agentSpecificWidgetFlow(input);\r\n}\r\n\r\nconst prompt = ai.definePrompt({\r\n  name: 'agentSpecificWidgetPrompt',\r\n  input: {schema: AgentSpecificWidgetInputSchema},\r\n  output: {schema: AgentSpecificWidgetOutputSchema},\r\n  prompt: `Based on the following widget data, determine the most appropriate ServiceNow agent type and its corresponding behavior within the widget.\\n\\nWidget Data: {{{widgetData}}}\\n\\nConsider agent types like incident agent, change agent, problem agent, etc.\\nSpecify the agentType and a brief description of the agentBehavior applicable to this widget.`,\r\n});\r\n\r\nconst agentSpecificWidgetFlow = ai.defineFlow(\r\n  {\r\n    name: 'agentSpecificWidgetFlow',\r\n    inputSchema: AgentSpecificWidgetInputSchema,\r\n    outputSchema: AgentSpecificWidgetOutputSchema,\r\n  },\r\n  async input => {\r\n    const {output} = await prompt(input);\r\n    return output!;\r\n  }\r\n);\r\n"],"names":[],"mappings":";;;;;;IAwBsB,sBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/ai/flows/save-query-with-voice-text.ts"],"sourcesContent":["'use server';\r\n/**\r\n * @fileOverview A flow to save common queries or widget configurations using voice or text commands.\r\n *\r\n * - saveQueryWithVoiceText - A function that handles saving the query with voice or text.\r\n * - SaveQueryWithVoiceTextInput - The input type for the saveQueryWithVoiceText function.\r\n * - SaveQueryWithVoiceTextOutput - The return type for the saveQueryWithVoiceText function.\r\n */\r\n\r\nimport {ai} from '@/ai/genkit';\r\nimport {z} from 'genkit';\r\n\r\nconst SaveQueryWithVoiceTextInputSchema = z.object({\r\n  queryName: z.string().describe('The name of the query to be saved.'),\r\n  queryText: z.string().describe('The text of the query to be saved.'),\r\n});\r\nexport type SaveQueryWithVoiceTextInput = z.infer<typeof SaveQueryWithVoiceTextInputSchema>;\r\n\r\nconst SaveQueryWithVoiceTextOutputSchema = z.object({\r\n  success: z.boolean().describe('Whether the query was successfully saved.'),\r\n  message: z.string().describe('A message indicating the result of the save operation.'),\r\n});\r\nexport type SaveQueryWithVoiceTextOutput = z.infer<typeof SaveQueryWithVoiceTextOutputSchema>;\r\n\r\nexport async function saveQueryWithVoiceText(input: SaveQueryWithVoiceTextInput): Promise<SaveQueryWithVoiceTextOutput> {\r\n  return saveQueryWithVoiceTextFlow(input);\r\n}\r\n\r\nconst saveQueryWithVoiceTextPrompt = ai.definePrompt({\r\n  name: 'saveQueryWithVoiceTextPrompt',\r\n  input: {schema: SaveQueryWithVoiceTextInputSchema},\r\n  output: {schema: SaveQueryWithVoiceTextOutputSchema},\r\n  prompt: `You are a ServiceNow assistant helping users save their queries.\r\n  The user wants to save the following query with the given name.\r\n  If the query name is valid, save the query and return success as true.  Otherwise return false.\r\n\r\n  Query Name: {{{queryName}}}\r\n  Query Text: {{{queryText}}}\r\n  `,\r\n});\r\n\r\nconst saveQueryWithVoiceTextFlow = ai.defineFlow(\r\n  {\r\n    name: 'saveQueryWithVoiceTextFlow',\r\n    inputSchema: SaveQueryWithVoiceTextInputSchema,\r\n    outputSchema: SaveQueryWithVoiceTextOutputSchema,\r\n  },\r\n  async input => {\r\n    // TODO: Implement the logic to save the query.\r\n    // This is a placeholder implementation.\r\n    const {output} = await saveQueryWithVoiceTextPrompt(input);\r\n    return {\r\n      success: true,\r\n      message: `Query \"${input.queryName}\" saved successfully.`, \r\n    };\r\n  }\r\n);\r\n"],"names":[],"mappings":";;;;;;IAwBsB,yBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/ai/flows/generate-overview-summary.ts"],"sourcesContent":["'use server';\r\n/**\r\n * @fileOverview A flow to generate a summary from all open widgets.\r\n *\r\n * - generateOverviewSummary - A function that handles generating the summary.\r\n * - GenerateOverviewSummaryInput - The input type for the generateOverviewSummary function.\r\n * - GenerateOverviewSummaryOutput - The return type for the generateOverviewSummary function.\r\n */\r\n\r\nimport {ai} from '@/ai/genkit';\r\nimport {z} from 'genkit';\r\n\r\nconst GenerateOverviewSummaryInputSchema = z.object({\r\n  widgetData: z.array(z.any()).describe('The data from all open widgets.'),\r\n});\r\nexport type GenerateOverviewSummaryInput = z.infer<typeof GenerateOverviewSummaryInputSchema>;\r\n\r\nconst GenerateOverviewSummaryOutputSchema = z.object({\r\n  summary: z.string().describe('The generated summary of all widget data.'),\r\n});\r\nexport type GenerateOverviewSummaryOutput = z.infer<typeof GenerateOverviewSummaryOutputSchema>;\r\n\r\nexport async function generateOverviewSummary(input: GenerateOverviewSummaryInput): Promise<GenerateOverviewSummaryOutput> {\r\n  return generateOverviewSummaryFlow(input);\r\n}\r\n\r\nconst generateOverviewSummaryPrompt = ai.definePrompt({\r\n  name: 'generateOverviewSummaryPrompt',\r\n  input: {schema: GenerateOverviewSummaryInputSchema},\r\n  output: {schema: GenerateOverviewSummaryOutputSchema},\r\n  prompt: `You are a ServiceNow expert. Based on the data from all the open widgets below, provide a concise summary. The data is provided as a JSON object.\r\n\r\n  Widget Data:\r\n  {{{json widgetData}}}\r\n  `,\r\n});\r\n\r\nconst generateOverviewSummaryFlow = ai.defineFlow(\r\n  {\r\n    name: 'generateOverviewSummaryFlow',\r\n    inputSchema: GenerateOverviewSummaryInputSchema,\r\n    outputSchema: GenerateOverviewSummaryOutputSchema,\r\n  },\r\n  async input => {\r\n    const {output} = await generateOverviewSummaryPrompt(input);\r\n    return output!;\r\n  }\r\n);\r\n"],"names":[],"mappings":";;;;;;IAsBsB,0BAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/hooks/use-mobile.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nconst MOBILE_BREAKPOINT = 768\r\n\r\nexport function useIsMobile() {\r\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\r\n\r\n  React.useEffect(() => {\r\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\r\n    const onChange = () => {\r\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\r\n    }\r\n    mql.addEventListener(\"change\", onChange)\r\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\r\n    return () => mql.removeEventListener(\"change\", onChange)\r\n  }, [])\r\n\r\n  return !!isMobile\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,oBAAoB;AAEnB,SAAS;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAc,AAAD,EAAuB;IAEpE,CAAA,GAAA,qMAAA,CAAA,YAAe,AAAD,EAAE;QACd,MAAM,MAAM,OAAO,UAAU,CAAC,CAAC,YAAY,EAAE,oBAAoB,EAAE,GAAG,CAAC;QACvE,MAAM,WAAW;YACf,YAAY,OAAO,UAAU,GAAG;QAClC;QACA,IAAI,gBAAgB,CAAC,UAAU;QAC/B,YAAY,OAAO,UAAU,GAAG;QAChC,OAAO,IAAM,IAAI,mBAAmB,CAAC,UAAU;IACjD,GAAG,EAAE;IAEL,OAAO,CAAC,CAAC;AACX","debugId":null}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC3B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Separator = React.forwardRef<\r\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\r\n>(\r\n  (\r\n    { className, orientation = \"horizontal\", decorative = true, ...props },\r\n    ref\r\n  ) => (\r\n    <SeparatorPrimitive.Root\r\n      ref={ref}\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        \"shrink-0 bg-border\",\r\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n)\r\nSeparator.displayName = SeparatorPrimitive.Root.displayName\r\n\r\nexport { Separator }\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI/B,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,8OAAC,qKAAA,CAAA,OAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;AAIf,UAAU,WAAW,GAAG,qKAAA,CAAA,OAAuB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 228, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/sheet.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Sheet = SheetPrimitive.Root\r\n\r\nconst SheetTrigger = SheetPrimitive.Trigger\r\n\r\nconst SheetClose = SheetPrimitive.Close\r\n\r\nconst SheetPortal = SheetPrimitive.Portal\r\n\r\nconst SheetOverlay = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <SheetPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\r\n\r\nconst sheetVariants = cva(\r\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\r\n  {\r\n    variants: {\r\n      side: {\r\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\r\n        bottom:\r\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\r\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\r\n        right:\r\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      side: \"right\",\r\n    },\r\n  }\r\n)\r\n\r\ninterface SheetContentProps\r\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\r\n    VariantProps<typeof sheetVariants> {}\r\n\r\nconst SheetContent = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Content>,\r\n  SheetContentProps\r\n>(({ side = \"right\", className, children, ...props }, ref) => (\r\n  <SheetPortal>\r\n    <SheetOverlay />\r\n    <SheetPrimitive.Content\r\n      ref={ref}\r\n      className={cn(sheetVariants({ side }), className)}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </SheetPrimitive.Close>\r\n    </SheetPrimitive.Content>\r\n  </SheetPortal>\r\n))\r\nSheetContent.displayName = SheetPrimitive.Content.displayName\r\n\r\nconst SheetHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nSheetHeader.displayName = \"SheetHeader\"\r\n\r\nconst SheetFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nSheetFooter.displayName = \"SheetFooter\"\r\n\r\nconst SheetTitle = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <SheetPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSheetTitle.displayName = SheetPrimitive.Title.displayName\r\n\r\nconst SheetDescription = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <SheetPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSheetDescription.displayName = SheetPrimitive.Description.displayName\r\n\r\nexport {\r\n  Sheet,\r\n  SheetPortal,\r\n  SheetOverlay,\r\n  SheetTrigger,\r\n  SheetClose,\r\n  SheetContent,\r\n  SheetHeader,\r\n  SheetFooter,\r\n  SheetTitle,\r\n  SheetDescription,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,QAAQ,kKAAA,CAAA,OAAmB;AAEjC,MAAM,eAAe,kKAAA,CAAA,UAAsB;AAE3C,MAAM,aAAa,kKAAA,CAAA,QAAoB;AAEvC,MAAM,cAAc,kKAAA,CAAA,SAAqB;AAEzC,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,UAAsB;QACrB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAGT,aAAa,WAAW,GAAG,kKAAA,CAAA,UAAsB,CAAC,WAAW;AAE7D,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,oMACA;IACE,UAAU;QACR,MAAM;YACJ,KAAK;YACL,QACE;YACF,MAAM;YACN,OACE;QACJ;IACF;IACA,iBAAiB;QACf,MAAM;IACR;AACF;AAOF,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,OAAO,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,kKAAA,CAAA,UAAsB;gBACrB,KAAK;gBACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;oBAAE;gBAAK,IAAI;gBACtC,GAAG,KAAK;;oBAER;kCACD,8OAAC,kKAAA,CAAA,QAAoB;wBAAC,WAAU;;0CAC9B,8OAAC,4LAAA,CAAA,IAAC;gCAAC,WAAU;;;;;;0CACb,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,aAAa,WAAW,GAAG,kKAAA,CAAA,UAAsB,CAAC,WAAW;AAE7D,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,oDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,QAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,yCAAyC;QACtD,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG,kKAAA,CAAA,QAAoB,CAAC,WAAW;AAEzD,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,cAA0B;QACzB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,kKAAA,CAAA,cAA0B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 377, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\r\n\r\nfunction Skeleton({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 401, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/tooltip.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst TooltipProvider = TooltipPrimitive.Provider\r\n\r\nconst Tooltip = TooltipPrimitive.Root\r\n\r\nconst TooltipTrigger = TooltipPrimitive.Trigger\r\n\r\nconst TooltipContent = React.forwardRef<\r\n  React.ElementRef<typeof TooltipPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <TooltipPrimitive.Content\r\n    ref={ref}\r\n    sideOffset={sideOffset}\r\n    className={cn(\r\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\r\n\r\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,kBAAkB,mKAAA,CAAA,WAAyB;AAEjD,MAAM,UAAU,mKAAA,CAAA,OAAqB;AAErC,MAAM,iBAAiB,mKAAA,CAAA,UAAwB;AAE/C,MAAM,+BAAiB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGpC,CAAC,EAAE,SAAS,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC1C,8OAAC,mKAAA,CAAA,UAAwB;QACvB,KAAK;QACL,YAAY;QACZ,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sYACA;QAED,GAAG,KAAK;;;;;;AAGb,eAAe,WAAW,GAAG,mKAAA,CAAA,UAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 437, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/sidebar.tsx"],"sourcesContent":["\r\n\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { VariantProps, cva } from \"class-variance-authority\"\r\nimport { PanelLeft } from \"lucide-react\"\r\n\r\nimport { useIsMobile } from \"@/hooks/use-mobile\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Separator } from \"@/components/ui/separator\"\r\nimport { Sheet, SheetContent, SheetTrigger } from \"@/components/ui/sheet\"\r\nimport { Skeleton } from \"@/components/ui/skeleton\"\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\"\r\n\r\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\r\nconst SIDEBAR_WIDTH_COOKIE_NAME = \"sidebar_width\"\r\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\r\nconst SIDEBAR_WIDTH = 288 // 18rem\r\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\r\nconst SIDEBAR_WIDTH_ICON = \"3.5rem\"\r\nconst SIDEBAR_MIN_WIDTH = 240\r\nconst SIDEBAR_MAX_WIDTH = 400\r\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\r\n\r\ntype SidebarContext = {\r\n  state: \"expanded\" | \"collapsed\"\r\n  open: boolean\r\n  setOpen: (open: boolean) => void\r\n  openMobile: boolean\r\n  setOpenMobile: (open: boolean) => void\r\n  isMobile: boolean\r\n  toggleSidebar: () => void\r\n  width: number\r\n  setWidth: (width: number) => void\r\n  isResizing: boolean\r\n}\r\n\r\nconst SidebarContext = React.createContext<SidebarContext | null>(null)\r\n\r\nfunction useSidebar() {\r\n  const context = React.useContext(SidebarContext)\r\n  if (!context) {\r\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\r\n  }\r\n\r\n  return context\r\n}\r\n\r\nconst SidebarProvider = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    defaultOpen?: boolean\r\n    open?: boolean\r\n    onOpenChange?: (open: boolean) => void\r\n  }\r\n>(\r\n  (\r\n    {\r\n      defaultOpen = true,\r\n      open: openProp,\r\n      onOpenChange: setOpenProp,\r\n      className,\r\n      style,\r\n      children,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const isMobile = useIsMobile()\r\n    const [openMobile, setOpenMobile] = React.useState(false)\r\n\r\n    // This is the internal state of the sidebar.\r\n    // We use openProp and setOpenProp for control from outside the component.\r\n    const [_open, _setOpen] = React.useState(defaultOpen)\r\n    const open = openProp ?? _open\r\n    const setOpen = React.useCallback(\r\n      (value: boolean | ((value: boolean) => boolean)) => {\r\n        const openState = typeof value === \"function\" ? value(open) : value\r\n        if (setOpenProp) {\r\n          setOpenProp(openState)\r\n        } else {\r\n          _setOpen(openState)\r\n        }\r\n      },\r\n      [setOpenProp, open]\r\n    )\r\n\r\n    const [width, setWidth] = React.useState(SIDEBAR_WIDTH)\r\n    const [isResizing, setIsResizing] = React.useState(false)\r\n\r\n    React.useEffect(() => {\r\n        if (typeof document !== 'undefined') {\r\n            const savedWidth = document.cookie.split('; ').find(row => row.startsWith(`${SIDEBAR_WIDTH_COOKIE_NAME}=`));\r\n            if (savedWidth) {\r\n                setWidth(Number(savedWidth.split('=')[1]));\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    React.useEffect(() => {\r\n      // This sets the cookie to keep the sidebar state.\r\n      if (typeof document !== 'undefined') {\r\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${open}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\r\n        document.cookie = `${SIDEBAR_WIDTH_COOKIE_NAME}=${width}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\r\n      }\r\n    }, [open, width]);\r\n\r\n    // Helper to toggle the sidebar.\r\n    const toggleSidebar = React.useCallback(() => {\r\n      return isMobile\r\n        ? setOpenMobile((open) => !open)\r\n        : setOpen((open) => !open)\r\n    }, [isMobile, setOpen, setOpenMobile])\r\n\r\n    // Adds a keyboard shortcut to toggle the sidebar.\r\n    React.useEffect(() => {\r\n      const handleKeyDown = (event: KeyboardEvent) => {\r\n        if (\r\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\r\n          (event.metaKey || event.ctrlKey)\r\n        ) {\r\n          event.preventDefault()\r\n          toggleSidebar()\r\n        }\r\n      }\r\n\r\n      window.addEventListener(\"keydown\", handleKeyDown)\r\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\r\n    }, [toggleSidebar])\r\n\r\n    const handleMouseDown = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setIsResizing(true);\r\n    };\r\n\r\n    const handleMouseMove = React.useCallback((e: MouseEvent) => {\r\n        if (isResizing) {\r\n            let newWidth = e.clientX;\r\n            if (newWidth < SIDEBAR_MIN_WIDTH) newWidth = SIDEBAR_MIN_WIDTH;\r\n            if (newWidth > SIDEBAR_MAX_WIDTH) newWidth = SIDEBAR_MAX_WIDTH;\r\n            setWidth(newWidth);\r\n        }\r\n    }, [isResizing]);\r\n\r\n    const handleMouseUp = React.useCallback(() => {\r\n        setIsResizing(false);\r\n    }, []);\r\n\r\n    React.useEffect(() => {\r\n        if (isResizing) {\r\n            document.addEventListener('mousemove', handleMouseMove);\r\n            document.addEventListener('mouseup', handleMouseUp);\r\n        } else {\r\n            document.removeEventListener('mousemove', handleMouseMove);\r\n            document.removeEventListener('mouseup', handleMouseUp);\r\n        }\r\n        return () => {\r\n            document.removeEventListener('mousemove', handleMouseMove);\r\n            document.removeEventListener('mouseup', handleMouseUp);\r\n        };\r\n    }, [isResizing, handleMouseMove, handleMouseUp]);\r\n\r\n\r\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\r\n    // This makes it easier to style the sidebar with Tailwind classes.\r\n    const state = open ? \"expanded\" : \"collapsed\"\r\n\r\n    const contextValue = React.useMemo<SidebarContext>(\r\n      () => ({\r\n        state,\r\n        open,\r\n        setOpen,\r\n        isMobile,\r\n        openMobile,\r\n        setOpenMobile,\r\n        toggleSidebar,\r\n        width,\r\n        setWidth,\r\n        isResizing\r\n      }),\r\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar, width, setWidth, isResizing]\r\n    )\r\n\r\n    return (\r\n      <SidebarContext.Provider value={contextValue}>\r\n        <TooltipProvider delayDuration={0}>\r\n          <div\r\n            style={\r\n              {\r\n                ...style,\r\n              } as React.CSSProperties\r\n            }\r\n            className={cn(\r\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\r\n              isResizing ? 'cursor-ew-resize' : '',\r\n              className\r\n            )}\r\n            ref={ref}\r\n            {...props}\r\n          >\r\n            {children}\r\n            {state === 'expanded' && !isMobile && <SidebarRail onMouseDown={handleMouseDown} />}\r\n          </div>\r\n        </TooltipProvider>\r\n      </SidebarContext.Provider>\r\n    )\r\n  }\r\n)\r\nSidebarProvider.displayName = \"SidebarProvider\"\r\n\r\nconst Sidebar = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    side?: \"left\" | \"right\"\r\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\r\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\r\n  }\r\n>(\r\n  (\r\n    {\r\n      side = \"left\",\r\n      variant = \"sidebar\",\r\n      collapsible = \"offcanvas\",\r\n      className,\r\n      children,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const { isMobile, state, openMobile, setOpenMobile, width } = useSidebar()\r\n\r\n    if (isMobile) {\r\n      return (\r\n        <Sheet open={openMobile} onOpenChange={setOpenMobile}>\r\n            <SheetContent side={side} className=\"w-[var(--sidebar-width-mobile)] p-0\">\r\n                <div className=\"flex h-full flex-col bg-sidebar text-sidebar-foreground\">\r\n                    {children}\r\n                </div>\r\n            </SheetContent>\r\n        </Sheet>\r\n      )\r\n    }\r\n\r\n    if (collapsible === \"none\") {\r\n      return (\r\n        <div\r\n          className={cn(\r\n            \"flex h-full flex-col bg-sidebar text-sidebar-foreground\",\r\n            className\r\n          )}\r\n          style={{ width: `${width}px` }}\r\n          ref={ref}\r\n          {...props}\r\n        >\r\n          {children}\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        className=\"group peer hidden md:block text-sidebar-foreground\"\r\n        data-state={state}\r\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\r\n        data-variant={variant}\r\n        data-side={side}\r\n      >\r\n        {/* This is what handles the sidebar gap on desktop */}\r\n        <div\r\n          className={cn(\r\n            \"duration-200 relative h-svh bg-transparent transition-[width] ease-linear\",\r\n            \"group-data-[collapsible=offcanvas]:w-0\",\r\n            \"group-data-[side=right]:rotate-180\",\r\n            variant === 'sidebar' && \"w-[var(--sidebar-width)]\",\r\n            variant === 'floating' && state === 'collapsed' && \"w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\",\r\n            collapsible === 'icon' && state === 'expanded' && \"group-data-[collapsible=icon]:w-[var(--sidebar-width)]\",\r\n            collapsible === 'icon' && state === 'collapsed' && \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\",\r\n          )}\r\n          style={{ '--sidebar-width': `${width}px`, '--sidebar-width-icon': SIDEBAR_WIDTH_ICON } as React.CSSProperties}\r\n        />\r\n        <div\r\n          className={cn(\r\n            \"duration-200 fixed z-20 hidden transition-[left,right,width,height,top] ease-linear md:flex\",\r\n            side === \"left\"\r\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\r\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\r\n            \r\n            // Handle variant and state\r\n            \"group-data-[variant=sidebar]:inset-y-0 group-data-[variant=sidebar]:w-[var(--sidebar-width)]\",\r\n            \"group-data-[variant=sidebar]:group-data-[state=collapsed]:w-0\",\r\n\r\n            \"group-data-[variant=floating]:top-1/2 group-data-[variant=floating]:-translate-y-1/2\",\r\n            \"group-data-[variant=floating]:h-auto\",\r\n            \"group-data-[variant=floating]:w-[--sidebar-width-icon]\",\r\n            \"group-data-[variant=floating]:p-2\",\r\n            \"group-data-[variant=floating]:group-data-[state=expanded]:hidden\",\r\n\r\n            collapsible === \"icon\" && state === 'expanded' && \"w-[var(--sidebar-width)]\",\r\n            collapsible === \"icon\" && state === 'collapsed' && \"w-[--sidebar-width-icon] top-1/2 -translate-y-1/2 p-2\",\r\n\r\n            className\r\n          )}\r\n          style={{ '--sidebar-width': `${width}px`, '--sidebar-width-icon': SIDEBAR_WIDTH_ICON } as React.CSSProperties}\r\n          {...props}\r\n        >\r\n          <div\r\n            data-sidebar=\"sidebar\"\r\n            className={cn(\r\n              \"flex h-full w-full flex-col bg-sidebar/95\",\r\n              \"group-data-[variant=sidebar]:group-data-[side=left]:border-r group-data-[variant=sidebar]:group-data-[side=right]:border-l\",\r\n              \"group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\",\r\n              collapsible === 'icon' && state === 'collapsed' && 'rounded-lg border shadow'\r\n            )}\r\n          >\r\n            {children}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n)\r\nSidebar.displayName = \"Sidebar\"\r\n\r\nconst SidebarTrigger = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<typeof Button> & { asChild?: boolean }\r\n>(({ className, onClick, asChild, children, ...props }, ref) => {\r\n  const { toggleSidebar } = useSidebar();\r\n  const Comp = asChild ? Slot : Button;\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"trigger\"\r\n      variant=\"ghost\"\r\n      size=\"icon\"\r\n      className={cn(\"h-7 w-7\", className)}\r\n      onClick={(event) => {\r\n        onClick?.(event);\r\n        toggleSidebar();\r\n      }}\r\n      {...props}\r\n    >\r\n      {asChild ? children : <PanelLeft />}\r\n    </Comp>\r\n  );\r\n});\r\n\r\nSidebarTrigger.displayName = \"SidebarTrigger\"\r\n\r\nconst SidebarMobileTrigger = React.forwardRef<\r\n    HTMLButtonElement,\r\n    React.ComponentProps<typeof Button> & { asChild?: boolean }\r\n>(({ className, asChild, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : Button\r\n  return (\r\n    <Comp ref={ref} variant=\"ghost\" size=\"icon\" {...props} />\r\n  );\r\n});\r\nSidebarMobileTrigger.displayName = \"SidebarMobileTrigger\";\r\n\r\n\r\nconst SidebarRail = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\">\r\n>(({ className, ...props }, ref) => {\r\n  const { toggleSidebar } = useSidebar()\r\n\r\n  return (\r\n    <button\r\n      ref={ref}\r\n      data-sidebar=\"rail\"\r\n      aria-label=\"Resize Sidebar\"\r\n      tabIndex={-1}\r\n      title=\"Resize Sidebar\"\r\n      className={cn(\r\n        \"absolute inset-y-0 z-20 w-1 cursor-ew-resize\",\r\n        \"group-data-[side=left]:-right-0\",\r\n        \"group-data-[side=right]:-left-0\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarRail.displayName = \"SidebarRail\"\r\n\r\nconst SidebarInset = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"main\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <main\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative flex-1 bg-background\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarInset.displayName = \"SidebarInset\"\r\n\r\nconst SidebarInput = React.forwardRef<\r\n  React.ElementRef<typeof Input>,\r\n  React.ComponentProps<typeof Input>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <Input\r\n      ref={ref}\r\n      data-sidebar=\"input\"\r\n      className={cn(\r\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarInput.displayName = \"SidebarInput\"\r\n\r\nconst SidebarHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"header\"\r\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarHeader.displayName = \"SidebarHeader\"\r\n\r\nconst SidebarFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"footer\"\r\n      className={cn(\"mt-auto flex flex-col gap-2 p-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarFooter.displayName = \"SidebarFooter\"\r\n\r\nconst SidebarSeparator = React.forwardRef<\r\n  React.ElementRef<typeof Separator>,\r\n  React.ComponentProps<typeof Separator>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <Separator\r\n      ref={ref}\r\n      data-sidebar=\"separator\"\r\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarSeparator.displayName = \"SidebarSeparator\"\r\n\r\nconst SidebarContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"content\"\r\n      className={cn(\r\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\r\n        \"group-data-[state=collapsed]:group-data-[variant=sidebar]:hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarContent.displayName = \"SidebarContent\"\r\n\r\nconst SidebarGroup = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"group\"\r\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarGroup.displayName = \"SidebarGroup\"\r\n\r\nconst SidebarGroupLabel = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\r\n>(({ className, asChild = false, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"div\"\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"group-label\"\r\n      className={cn(\r\n        \"duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\r\n\r\nconst SidebarGroupAction = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\r\n>(({ className, asChild = false, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"group-action\"\r\n      className={cn(\r\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        // Increases the hit area of the button on mobile.\r\n        \"after:absolute after:-inset-2 after:md:hidden\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\r\n\r\nconst SidebarGroupContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    data-sidebar=\"group-content\"\r\n    className={cn(\"w-full text-sm\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\r\n\r\nconst SidebarMenu = React.forwardRef<\r\n  HTMLUListElement,\r\n  React.ComponentProps<\"ul\">\r\n>(({ className, ...props }, ref) => (\r\n  <ul\r\n    ref={ref}\r\n    data-sidebar=\"menu\"\r\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSidebarMenu.displayName = \"SidebarMenu\"\r\n\r\nconst SidebarMenuItem = React.forwardRef<\r\n  HTMLLIElement,\r\n  React.ComponentProps<\"li\">\r\n>(({ className, ...props }, ref) => (\r\n  <li\r\n    ref={ref}\r\n    data-sidebar=\"menu-item\"\r\n    className={cn(\"group/menu-item relative\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\r\n\r\nconst sidebarMenuButtonVariants = cva(\r\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:justify-center group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\r\n        outline:\r\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\r\n        ghost: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\r\n      },\r\n      size: {\r\n        default: \"h-8 text-sm\",\r\n        sm: \"h-7 text-xs\",\r\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst SidebarMenuButton = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\"> & {\r\n    asChild?: boolean\r\n    isActive?: boolean\r\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\r\n  } & VariantProps<typeof sidebarMenuButtonVariants>\r\n>(\r\n  (\r\n    {\r\n      asChild = false,\r\n      isActive = false,\r\n      variant = \"default\",\r\n      size = \"default\",\r\n      tooltip,\r\n      className,\r\n      children,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    const { isMobile, state } = useSidebar()\r\n\r\n    const button = (\r\n       <Comp\r\n            ref={ref}\r\n            data-sidebar=\"menu-button\"\r\n            data-size={size}\r\n            data-active={isActive}\r\n            className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </Comp>\r\n    );\r\n\r\n    if (!tooltip || (state === 'expanded' && !isMobile)) {\r\n      return button;\r\n    }\r\n\r\n    if (typeof tooltip === \"string\") {\r\n      tooltip = {\r\n        children: tooltip,\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Tooltip>\r\n        <TooltipTrigger asChild>\r\n          {button}\r\n        </TooltipTrigger>\r\n        <TooltipContent\r\n          side=\"right\"\r\n          align=\"center\"\r\n          hidden={state !== \"collapsed\" || isMobile}\r\n          {...tooltip}\r\n        />\r\n      </Tooltip>\r\n    )\r\n  }\r\n)\r\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\r\n\r\nconst SidebarMenuAction = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\"> & {\r\n    asChild?: boolean\r\n    showOnHover?: boolean\r\n  }\r\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"menu-action\"\r\n      className={cn(\r\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        // Increases the hit area of the button on mobile.\r\n        \"after:absolute after:-inset-2 after:md:hidden\",\r\n        \"peer-data-[size=sm]/menu-button:top-1\",\r\n        \"peer-data-[size=default]/menu-button:top-1.5\",\r\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        showOnHover &&\r\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\r\n\r\nconst SidebarMenuBadge = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    data-sidebar=\"menu-badge\"\r\n    className={cn(\r\n      \"absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none\",\r\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\r\n      \"peer-data-[size=sm]/menu-button:top-1\",\r\n      \"peer-data-[size=default]/menu-button:top-1.5\",\r\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\r\n      \"group-data-[collapsible=icon]:hidden\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\r\n\r\nconst SidebarMenuSkeleton = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    showIcon?: boolean\r\n  }\r\n>(({ className, showIcon = false, ...props }, ref) => {\r\n  // Random width between 50 to 90%.\r\n  const width = React.useMemo(() => {\r\n    return `${Math.floor(Math.random() * 40) + 50}%`\r\n  }, [])\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"menu-skeleton\"\r\n      className={cn(\"rounded-md h-8 flex gap-2 px-2 items-center\", className)}\r\n      {...props}\r\n    >\r\n      {showIcon && (\r\n        <Skeleton\r\n          className=\"size-4 rounded-md\"\r\n          data-sidebar=\"menu-skeleton-icon\"\r\n        />\r\n      )}\r\n      <Skeleton\r\n        className=\"h-4 flex-1 max-w-[--skeleton-width]\"\r\n        data-sidebar=\"menu-skeleton-text\"\r\n        style={\r\n          {\r\n            \"--skeleton-width\": width,\r\n          } as React.CSSProperties\r\n        }\r\n      />\r\n    </div>\r\n  )\r\n})\r\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\r\n\r\nconst SidebarMenuSub = React.forwardRef<\r\n  HTMLUListElement,\r\n  React.ComponentProps<\"ul\">\r\n>(({ className, ...props }, ref) => (\r\n  <ul\r\n    ref={ref}\r\n    data-sidebar=\"menu-sub\"\r\n    className={cn(\r\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\r\n      \"group-data-[collapsible=icon]:hidden\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\r\n\r\nconst SidebarMenuSubItem = React.forwardRef<\r\n  HTMLLIElement,\r\n  React.ComponentProps<\"li\">\r\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\r\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\r\n\r\nconst SidebarMenuSubButton = React.forwardRef<\r\n  HTMLAnchorElement,\r\n  React.ComponentProps<\"a\"> & {\r\n    asChild?: boolean\r\n    size?: \"sm\" | \"md\"\r\n    isActive?: boolean\r\n  }\r\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"a\"\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"menu-sub-button\"\r\n      data-size={size}\r\n      data-active={isActive}\r\n      className={cn(\r\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\r\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\r\n        size === \"sm\" && \"text-xs\",\r\n        size === \"md\" && \"text-sm\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\r\n\r\nexport {\r\n  Sidebar,\r\n  SidebarContent,\r\n  SidebarFooter,\r\n  SidebarGroup,\r\n  SidebarGroupAction,\r\n  SidebarGroupContent,\r\n  SidebarGroupLabel,\r\n  SidebarHeader,\r\n  SidebarInput,\r\n  SidebarInset,\r\n  SidebarMenu,\r\n  SidebarMenuAction,\r\n  SidebarMenuBadge,\r\n  SidebarMenuButton,\r\n  SidebarMenuItem,\r\n  SidebarMenuSkeleton,\r\n  SidebarMenuSub,\r\n  SidebarMenuSubButton,\r\n  SidebarMenuSubItem,\r\n  SidebarProvider,\r\n  SidebarRail,\r\n  SidebarSeparator,\r\n  SidebarTrigger,\r\n  SidebarMobileTrigger,\r\n  useSidebar,\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1252, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/services/workspaceService.ts"],"sourcesContent":["\r\n\r\n'use server';\r\n\r\nimport axios from 'axios';\r\nimport type { Workspace } from '@/lib/types';\r\n\r\nconst getWorkspaceWebhookUrl = () => {\r\n    const url = process.env.WORKSPACE_WEBHOOK_URL;\r\n    if (!url) {\r\n        throw new Error('WORKSPACE_WEBHOOK_URL is not configured in .env file.');\r\n    }\r\n    return url;\r\n};\r\n\r\nconst getUserWorkspacesWebhookUrl = () => {\r\n    const url = process.env.USER_WORKSPACE_WEBHOOK_URL;\r\n    if (!url) {\r\n        console.warn('USER_WORKSPACE_WEBHOOK_URL is not configured in .env file - workspace sync disabled');\r\n        return null;\r\n    }\r\n    return url;\r\n};\r\n\r\nexport async function getWorkspaces(userId: string): Promise<Workspace[]> {\r\n    try {\r\n        const webhookUrl = getUserWorkspacesWebhookUrl();\r\n        if (!webhookUrl) {\r\n            return []; // Gracefully return empty array if webhook URL is not configured\r\n        }\r\n        const response = await axios.get(webhookUrl, { params: { userId, workspaceId: 'all' } });\r\n        if (response.status === 200 && response.data) {\r\n            return Array.isArray(response.data) ? response.data : [response.data];\r\n        }\r\n        return [];\r\n    } catch (error: any) {\r\n        // Only log detailed errors for non-404 status codes\r\n        if (error?.response?.status !== 404) {\r\n            console.error('Failed to get workspaces:', error);\r\n        } else {\r\n            console.warn('Workspace endpoint not found (404) - using local workspace management');\r\n        }\r\n        return [];\r\n    }\r\n}\r\n\r\nexport interface WorkspaceChanges {\r\n    added: Workspace[];\r\n    deleted: string[];\r\n    modified: Workspace[];\r\n    hasChanges: boolean;\r\n}\r\n\r\nexport async function detectWorkspaceChanges(userId: string, currentWorkspaces: Workspace[]): Promise<WorkspaceChanges> {\r\n    try {\r\n        const freshWorkspaces = await getWorkspaces(userId);\r\n        \r\n        const currentMap = new Map(currentWorkspaces.map(ws => [ws.workspaceId, ws]));\r\n        const freshMap = new Map(freshWorkspaces.map(ws => [ws.workspaceId, ws]));\r\n        \r\n        const added: Workspace[] = [];\r\n        const modified: Workspace[] = [];\r\n        const deleted: string[] = [];\r\n        \r\n        // Find added and modified workspaces\r\n        for (const [id, freshWs] of freshMap) {\r\n            const currentWs = currentMap.get(id);\r\n            if (!currentWs) {\r\n                added.push(freshWs);\r\n            } else if (JSON.stringify(currentWs) !== JSON.stringify(freshWs)) {\r\n                modified.push(freshWs);\r\n            }\r\n        }\r\n        \r\n        // Find deleted workspaces\r\n        for (const [id] of currentMap) {\r\n            if (!freshMap.has(id)) {\r\n                deleted.push(id);\r\n            }\r\n        }\r\n        \r\n        return {\r\n            added,\r\n            deleted,\r\n            modified,\r\n            hasChanges: added.length > 0 || deleted.length > 0 || modified.length > 0\r\n        };\r\n    } catch (error) {\r\n        console.error('Failed to detect workspace changes:', error);\r\n        return {\r\n            added: [],\r\n            deleted: [],\r\n            modified: [],\r\n            hasChanges: false\r\n        };\r\n    }\r\n}\r\n\r\n\r\nexport async function saveWorkspace(workspaceData: Omit<Workspace, 'workspaceId' | 'active'> & { workspaceId?: string }): Promise<Workspace | null> {\r\n    const webhookUrl = getWorkspaceWebhookUrl();\r\n    const workspaceId = workspaceData.workspaceId || `ws_${Date.now()}`;\r\n    const payload = {\r\n        ...workspaceData,\r\n        workspaceId: workspaceId,\r\n        active: true,\r\n    };\r\n\r\n    try {\r\n        const response = await axios.post(webhookUrl, payload, { params: { workspaceId } });\r\n        if (response.status === 200 || response.status === 201) {\r\n            // The webhook can return the saved object directly or inside a 'result' property\r\n            return response.data?.result || response.data;\r\n        }\r\n        return null;\r\n    } catch (error: any) {\r\n        if (axios.isAxiosError(error)) {\r\n            // Only log detailed errors for non-404 status codes\r\n            if (error?.response?.status !== 404) {\r\n                console.error('Failed to save workspace:', {\r\n                    message: error.message,\r\n                    status: error.response?.status,\r\n                    data: error.response?.data,\r\n                    url: webhookUrl,\r\n                    sentData: payload\r\n                });\r\n            } else {\r\n                console.warn('Workspace save endpoint not found (404) - workspace not saved to remote');\r\n            }\r\n        } else {\r\n            console.error('An unexpected error occurred during workspace save:', error);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function deleteWorkspace(workspaceId: string): Promise<boolean> {\r\n    const webhookUrl = getWorkspaceWebhookUrl();\r\n    try {\r\n        const response = await axios.delete(webhookUrl, { params: { workspaceId } });\r\n        return response.status === 200 || response.status === 204;\r\n    } catch (error: any) {\r\n        // Only log detailed errors for non-404 status codes\r\n        if (error?.response?.status !== 404) {\r\n            console.error('Failed to delete workspace:', error);\r\n        } else {\r\n            console.warn('Workspace delete endpoint not found (404) - workspace not deleted from remote');\r\n        }\r\n        return false;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;IAwBsB,gBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 1265, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/services/userService.ts"],"sourcesContent":["// This file contains both server and client functions\r\n\r\nimport axios from 'axios';\r\nimport type { User, Workspace } from '@/lib/types';\r\nimport { getWorkspaces } from './workspaceService';\r\n\r\nconst getUserApiUrl = () => {\r\n    const url = process.env.NEXT_PUBLIC_GET_USERS_URL;\r\n    if (!url) {\r\n        console.warn('NEXT_PUBLIC_GET_USERS_URL is not configured. User management may not work correctly.');\r\n        return null;\r\n    }\r\n    return url;\r\n};\r\n\r\nconst getUpdateWebhookUrl = () => {\r\n    const url = process.env.NEXT_PUBLIC_USER_PROFILE_UPDATE_WEBHOOK_URL;\r\n    if (!url) {\r\n        console.warn('NEXT_PUBLIC_USER_PROFILE_UPDATE_WEBHOOK_URL is not configured in .env file.');\r\n        return null;\r\n    }\r\n    return url;\r\n}\r\n\r\nconst getProfileWebhookUrl = () => {\r\n    const url = process.env.USER_PROFILE_WEBHOOK_URL;\r\n    if (!url) {\r\n        console.warn('USER_PROFILE_WEBHOOK_URL is not configured in .env file. Using fallback data.');\r\n        return null;\r\n    }\r\n    return url;\r\n};\r\n\r\n\r\nconst createDefaultUser = (email: string): User => ({\r\n    userId: email,\r\n    username: 'Default User',\r\n    first_name: 'Default',\r\n    last_name: 'User',\r\n    email: email,\r\n    bio: 'Please configure your user profile webhook in the .env file to fetch real user data.',\r\n    avatar: `https://i.pravatar.cc/150?u=${email}`,\r\n    roles: ['User'],\r\n});\r\n\r\nexport async function getUserById(userId: string): Promise<User | null> {\r\n    const webhookUrl = getUserApiUrl();\r\n    if (!webhookUrl) {\r\n        console.warn('NEXT_PUBLIC_GET_USERS_URL is not configured. Falling back to default user.');\r\n        return createDefaultUser(userId);\r\n    }\r\n\r\n    try {\r\n        const response = await axios.get(webhookUrl, { params: { userId } });\r\n        \r\n        if (response.status === 200 && response.data) {\r\n            // Handle both direct user object and wrapped responses\r\n            const userData = Array.isArray(response.data) ? response.data[0] : response.data;\r\n            if (userData) {\r\n                return {\r\n                    ...userData,\r\n                    userId: userData.userId || userData._id,\r\n                    roles: userData.roles || ['User']\r\n                };\r\n            }\r\n        }\r\n        \r\n        console.warn(`No user found for userId: ${userId}`);\r\n        return null;\r\n    } catch (error) {\r\n        if (axios.isAxiosError(error)) {\r\n            if (error.response?.status === 404) {\r\n                console.warn(`User not found (userId: ${userId})`);\r\n                return null;\r\n            } else {\r\n                console.error(`Failed to fetch user by ID ${userId}:`, error.message);\r\n            }\r\n        } else {\r\n            console.error('An unexpected error occurred:', error);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function getAllUsers(): Promise<User[]> {\r\n    const webhookUrl = getUserApiUrl();\r\n    if (!webhookUrl) {\r\n        return [\r\n            {...createDefaultUser('user1@example.com'), roles: ['Admin']},\r\n            createDefaultUser('user2@example.com'),\r\n        ];\r\n    }\r\n    try {\r\n        const response = await axios.get(webhookUrl, { params: { userId: 'all' } });\r\n\r\n        if (response.status === 200 && Array.isArray(response.data)) {\r\n            return response.data.map(user => ({\r\n                ...user,\r\n                userId: user.userId || user._id, // Handle both possible ID fields\r\n                roles: user.roles || ['User']\r\n            }));\r\n        }\r\n        \r\n        // Handle cases where the API returns an object with a 'data' or other property\r\n        if (response.status === 200 && response.data && typeof response.data === 'object') {\r\n            const userArray = response.data.data || response.data.users || response.data.items || response.data.result;\r\n            if (Array.isArray(userArray)) {\r\n                return userArray.map(user => ({\r\n                    ...user,\r\n                    userId: user.userId || user._id,\r\n                    roles: user.roles || ['User']\r\n                }));\r\n            }\r\n        }\r\n        \r\n        console.warn(\"Webhook response for all users was not in a recognized array format. Returning empty array.\", response.data);\r\n        return [];\r\n    } catch (error) {\r\n        console.error('Failed to get all users from webhook:', error);\r\n        return [];\r\n    }\r\n}\r\n\r\n\r\nexport async function getUserProfile(email: string): Promise<User | null> {\r\n    const webhookUrl = getProfileWebhookUrl();\r\n\r\n    if (!webhookUrl) {\r\n        return createDefaultUser(email);\r\n    }\r\n\r\n    try {\r\n        const response = await axios.get(webhookUrl, { params: { userId: email } });\r\n        \r\n        if (response.status === 200 && response.data) {\r\n            // The webhook can return a single user or an array of users\r\n            const userData = Array.isArray(response.data) ? response.data[0] : response.data;\r\n            if (userData) {\r\n                return {\r\n                    ...userData,\r\n                    userId: userData._id || userData.userId,\r\n                    roles: userData.roles || ['User']\r\n                };\r\n            }\r\n        }\r\n\r\n        console.warn(`Webhook returned status ${response.status} or no data for ${email}. Falling back to default user.`);\r\n        return createDefaultUser(email);\r\n\r\n    } catch (error) {\r\n        if (axios.isAxiosError(error)) {\r\n            if (error.response?.status === 404) {\r\n                 console.warn(`User not found via webhook (userId: ${email}). Falling back to default user.`);\r\n            } else {\r\n                 console.error(`Failed to get user profile from webhook for ${email}:`, error.message);\r\n            }\r\n        } else {\r\n            console.error('An unexpected error occurred:', error);\r\n        }\r\n        return createDefaultUser(email);\r\n    }\r\n}\r\n\r\nexport async function updateUserProfile(profileData: Partial<User>): Promise<boolean> {\r\n    const webhookUrl = getUpdateWebhookUrl();\r\n    if (!webhookUrl) {\r\n        console.error('Cannot update/create user profile: NEXT_PUBLIC_USER_PROFILE_UPDATE_WEBHOOK_URL is not configured.');\r\n        return false;\r\n    }\r\n\r\n    // Always use POST for both create and update to avoid CORS issues with PUT\r\n    const method: 'post' = 'post';\r\n    const requestUrl = webhookUrl;\r\n    const payload = { ...profileData };\r\n\r\n    try {\r\n        const response = await axios[method](requestUrl, payload);\r\n        return response.status === 200 || response.status === 201;\r\n    } catch (error) {\r\n        console.error('Failed to update/create user profile via webhook:', error);\r\n        return false;\r\n    }\r\n}\r\n\r\n\r\nexport interface LoginResult {\r\n    success: boolean;\r\n    user?: User;\r\n    workspaces?: Workspace[];\r\n    error?: string;\r\n}\r\n\r\nexport async function performLogin(email: string, password: string): Promise<LoginResult> {\r\n    try {\r\n        // In a real app, you'd validate credentials against your auth service\r\n        // For now, we'll simulate successful validation and fetch user data\r\n        \r\n        const user = await getUserProfile(email);\r\n        if (!user) {\r\n            return {\r\n                success: false,\r\n                error: 'Failed to retrieve user profile'\r\n            };\r\n        }\r\n\r\n        const workspaces = await getWorkspaces(user.userId);\r\n        \r\n        // Store session data\r\n        const sessionData = {\r\n            loggedIn: true,\r\n            email: email,\r\n            userId: user.userId,\r\n            loginTime: new Date().toISOString()\r\n        };\r\n        \r\n        // Store in localStorage (this will be client-side when called from client)\r\n        if (typeof window !== 'undefined') {\r\n            localStorage.setItem('session', JSON.stringify(sessionData));\r\n            localStorage.setItem('userData', JSON.stringify({ user, workspaces }));\r\n        }\r\n        \r\n        return {\r\n            success: true,\r\n            user,\r\n            workspaces\r\n        };\r\n    } catch (error) {\r\n        console.error('Login failed:', error);\r\n        return {\r\n            success: false,\r\n            error: error instanceof Error ? error.message : 'Login failed'\r\n        };\r\n    }\r\n}\r\n\r\nexport function getCachedUserData(): { user: User | null; workspaces: Workspace[] } {\r\n    if (typeof window === 'undefined') {\r\n        return { user: null, workspaces: [] };\r\n    }\r\n    \r\n    try {\r\n        const cached = localStorage.getItem('userData');\r\n        if (cached) {\r\n            const data = JSON.parse(cached);\r\n            return {\r\n                user: data.user || null,\r\n                workspaces: data.workspaces || []\r\n            };\r\n        }\r\n    } catch (error) {\r\n        console.error('Failed to parse cached user data:', error);\r\n    }\r\n    \r\n    return { user: null, workspaces: [] };\r\n}\r\n\r\nexport function updateCachedWorkspaces(workspaces: Workspace[]): void {\r\n    if (typeof window === 'undefined') return;\r\n    \r\n    try {\r\n        const cached = localStorage.getItem('userData');\r\n        if (cached) {\r\n            const data = JSON.parse(cached);\r\n            data.workspaces = workspaces;\r\n            localStorage.setItem('userData', JSON.stringify(data));\r\n        }\r\n    } catch (error) {\r\n        console.error('Failed to update cached workspaces:', error);\r\n    }\r\n}\r\n\r\nexport function getCachedWorkspace(workspaceId: string): Workspace | null {\r\n    const { workspaces } = getCachedUserData();\r\n    return workspaces.find(ws => ws.workspaceId === workspaceId) || null;\r\n}\r\n\r\nexport function clearUserData(): void {\r\n    if (typeof window !== 'undefined') {\r\n        localStorage.removeItem('session');\r\n        localStorage.removeItem('userData');\r\n    }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1527, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/accordion.tsx"],"sourcesContent":["\r\n\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\r\nimport { ChevronRight } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Accordion = AccordionPrimitive.Root\r\n\r\nconst AccordionItem = React.forwardRef<\r\n  React.ElementRef<typeof AccordionPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\r\n>(({ className, ...props }, ref) => (\r\n  <AccordionPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\"border-b-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAccordionItem.displayName = \"AccordionItem\"\r\n\r\nconst AccordionTrigger = React.forwardRef<\r\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <AccordionPrimitive.Header className=\"flex\">\r\n    <AccordionPrimitive.Trigger\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex flex-1 items-center gap-2 py-2 font-medium transition-all [&[data-state=open]>svg]:rotate-90\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n       <ChevronRight className=\"h-4 w-4 shrink-0 transition-transform duration-200 ml-auto mr-1\" />\r\n    </AccordionPrimitive.Trigger>\r\n  </AccordionPrimitive.Header>\r\n))\r\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\r\n\r\nconst AccordionContent = React.forwardRef<\r\n  React.ElementRef<typeof AccordionPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <AccordionPrimitive.Content\r\n    ref={ref}\r\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\r\n    {...props}\r\n  >\r\n    <div className={cn(\"pl-8 pr-2 pt-1 pb-1 space-y-1\", className)}>{children}</div>\r\n  </AccordionPrimitive.Content>\r\n))\r\n\r\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\r\n\r\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\r\n"],"names":[],"mappings":";;;;;;;AAGA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,YAAY,qKAAA,CAAA,OAAuB;AAEzC,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qKAAA,CAAA,OAAuB;QACtB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;QAC3B,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG;AAE5B,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,qKAAA,CAAA,SAAyB;QAAC,WAAU;kBACnC,cAAA,8OAAC,qKAAA,CAAA,UAA0B;YACzB,KAAK;YACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qGACA;YAED,GAAG,KAAK;;gBAER;8BACA,8OAAC,sNAAA,CAAA,eAAY;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI/B,iBAAiB,WAAW,GAAG,qKAAA,CAAA,UAA0B,CAAC,WAAW;AAErE,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,qKAAA,CAAA,UAA0B;QACzB,KAAK;QACL,WAAU;QACT,GAAG,KAAK;kBAET,cAAA,8OAAC;YAAI,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;sBAAa;;;;;;;;;;;AAIrE,iBAAiB,WAAW,GAAG,qKAAA,CAAA,UAA0B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1607, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/dropdown-menu.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst DropdownMenu = DropdownMenuPrimitive.Root\r\n\r\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\r\n\r\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\r\n\r\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\r\n\r\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\r\n\r\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\r\n\r\nconst DropdownMenuSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubTrigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronRight className=\"ml-auto\" />\r\n  </DropdownMenuPrimitive.SubTrigger>\r\n))\r\nDropdownMenuSubTrigger.displayName =\r\n  DropdownMenuPrimitive.SubTrigger.displayName\r\n\r\nconst DropdownMenuSubContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSubContent.displayName =\r\n  DropdownMenuPrimitive.SubContent.displayName\r\n\r\nconst DropdownMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Portal>\r\n    <DropdownMenuPrimitive.Content\r\n      ref={ref}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </DropdownMenuPrimitive.Portal>\r\n))\r\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\r\n\r\nconst DropdownMenuItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\r\n\r\nconst DropdownMenuCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    checked={checked}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.CheckboxItem>\r\n))\r\nDropdownMenuCheckboxItem.displayName =\r\n  DropdownMenuPrimitive.CheckboxItem.displayName\r\n\r\nconst DropdownMenuRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Circle className=\"h-2 w-2 fill-current\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.RadioItem>\r\n))\r\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\r\n\r\nconst DropdownMenuLabel = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\r\n\r\nconst DropdownMenuSeparator = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\r\n\r\nconst DropdownMenuShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\r\n\r\nexport {\r\n  DropdownMenu,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuCheckboxItem,\r\n  DropdownMenuRadioItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuShortcut,\r\n  DropdownMenuGroup,\r\n  DropdownMenuPortal,\r\n  DropdownMenuSub,\r\n  DropdownMenuSubContent,\r\n  DropdownMenuSubTrigger,\r\n  DropdownMenuRadioGroup,\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1805, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/layout/AppSidebar.tsx"],"sourcesContent":["\r\n\r\n'use client';\r\n\r\nimport {\r\n  SidebarContent,\r\n  SidebarMenu,\r\n  SidebarMenuButton,\r\n  SidebarMenuItem,\r\n  useSidebar,\r\n  SidebarTrigger,\r\n  SidebarMenuSub,\r\n  SidebarMenuSubButton,\r\n  SidebarMenuSubItem,\r\n} from '@/components/ui/sidebar';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Settings, User, PanelLeft, LayoutGrid, Heart, LogOut, FolderKanban, Store, Library, Bot, Briefcase, Users, ChevronRight, Building } from 'lucide-react';\r\nimport type { Widget, User as UserType, Workspace } from '@/lib/types';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport React, { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\nimport { clearUserData } from '@/services/userService';\r\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '../ui/accordion';\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from '../ui/dropdown-menu';\r\nimport { cn } from '@/lib/utils';\r\n\r\ntype ViewType = 'dashboard' | 'ai-store' | 'prompt-catalog' | 'profile' | 'settings' | 'user-management' | 'role-management' | 'company-management';\r\n\r\ninterface AppSidebarProps {\r\n    user: UserType | null;\r\n    minimizedWidgets: Widget[];\r\n    favoritedWidgets: Widget[];\r\n    workspaces: Workspace[];\r\n    currentView?: ViewType;\r\n    onViewChange?: (view: ViewType) => void;\r\n    onRestoreWidget: (id: string) => void;\r\n    onRestoreFavorite: (widget: Widget) => void;\r\n    onProfileUpdate: () => void;\r\n    onLoadWorkspace: (workspace: Workspace) => void;\r\n    onWorkspaceAction: (action: 'create' | 'edit' | 'forget' | 'load' | 'save') => void;\r\n    onMainWorkspace?: () => void;\r\n    onRefreshWorkspaces?: () => void;\r\n    isSyncingWorkspaces?: boolean;\r\n    syncEnabled?: boolean;\r\n    lastSyncTime?: Date | null;\r\n    activeWorkspaceId?: string | null;\r\n}\r\n\r\nconst SIDEBAR_ACCORDION_STATE = 'sidebarAccordionState';\r\n\r\nexport function AppSidebar({ user, minimizedWidgets, favoritedWidgets, workspaces, currentView = 'dashboard', onViewChange, onRestoreWidget, onRestoreFavorite, onProfileUpdate, onLoadWorkspace, onWorkspaceAction, onMainWorkspace, onRefreshWorkspaces, isSyncingWorkspaces = false, syncEnabled = true, lastSyncTime, activeWorkspaceId }: AppSidebarProps) {\r\n  const { state, setOpenMobile } = useSidebar();\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const isMobile = useIsMobile();\r\n  const [openAccordionItem, setOpenAccordionItem] = useState('');\r\n\r\n  useEffect(() => {\r\n    const savedState = sessionStorage.getItem(SIDEBAR_ACCORDION_STATE);\r\n    if (savedState) {\r\n      setOpenAccordionItem(savedState);\r\n    } else {\r\n        if (pathname.startsWith('/ai')) setOpenAccordionItem('ai-tools');\r\n        else if (pathname.startsWith('/dashboard')) setOpenAccordionItem('workspace');\r\n        else if (pathname.startsWith('/profile') || pathname.startsWith('/settings')) setOpenAccordionItem('user');\r\n    }\r\n  }, [pathname]);\r\n\r\n  const handleAccordionChange = (value: string) => {\r\n    setOpenAccordionItem(value);\r\n    sessionStorage.setItem(SIDEBAR_ACCORDION_STATE, value);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    clearUserData();\r\n    router.push('/');\r\n  };\r\n  \r\n  const handleWorkspaceClick = (ws: Workspace) => {\r\n    onLoadWorkspace(ws);\r\n    if(isMobile) setOpenMobile(false);\r\n  }\r\n\r\n  const mainContent = (\r\n    <Accordion type=\"single\" collapsible className=\"w-full space-y-1\" value={openAccordionItem} onValueChange={handleAccordionChange}>\r\n        <AccordionItem value=\"ai-tools\">\r\n            <AccordionTrigger className=\"w-full justify-start rounded-md px-2 hover:bg-sidebar-accent\">\r\n                <Bot />\r\n                <span>AI Tools</span>\r\n            </AccordionTrigger>\r\n            <AccordionContent>\r\n                <SidebarMenuButton \r\n                    variant=\"ghost\" \r\n                    className=\"w-full justify-start\" \r\n                    isActive={currentView === 'ai-store'}\r\n                    onClick={() => onViewChange?.('ai-store')}\r\n                >\r\n                    <Store />\r\n                    <span>AI Store</span>\r\n                </SidebarMenuButton>\r\n                <SidebarMenuButton \r\n                    variant=\"ghost\" \r\n                    className=\"w-full justify-start\" \r\n                    isActive={currentView === 'prompt-catalog'}\r\n                    onClick={() => onViewChange?.('prompt-catalog')}\r\n                >\r\n                    <Library />\r\n                    <span>Prompt Catalog</span>\r\n                </SidebarMenuButton>\r\n            </AccordionContent>\r\n        </AccordionItem>\r\n        <AccordionItem value=\"workspace\">\r\n            <AccordionTrigger className=\"w-full justify-start rounded-md px-2 hover:bg-sidebar-accent\">\r\n                <Briefcase />\r\n                <span>Workspace</span>\r\n            </AccordionTrigger>\r\n            <AccordionContent>\r\n                <SidebarMenuButton \r\n                    variant=\"ghost\" \r\n                    className=\"w-full justify-start\" \r\n                    isActive={currentView === 'dashboard' && !activeWorkspaceId}\r\n                    onClick={() => onMainWorkspace?.()}\r\n                >\r\n                    <LayoutGrid />\r\n                    <span>Main Workspace</span>\r\n                </SidebarMenuButton>\r\n                \r\n                \r\n                {workspaces.map((ws) => (\r\n                    <SidebarMenuButton key={ws.workspaceId} variant=\"ghost\" className=\"w-full justify-start\" isActive={ws.workspaceId === activeWorkspaceId} onClick={() => handleWorkspaceClick(ws)}>\r\n                        <FolderKanban />\r\n                        <span className=\"truncate\">{ws.workspace_name}</span>\r\n                    </SidebarMenuButton>\r\n                ))}\r\n            </AccordionContent>\r\n        </AccordionItem>\r\n        <AccordionItem value=\"user\">\r\n            <AccordionTrigger className=\"w-full justify-start rounded-md px-2 hover:bg-sidebar-accent\">\r\n                 <User />\r\n                 <span>User</span>\r\n            </AccordionTrigger>\r\n            <AccordionContent>\r\n                <SidebarMenuButton \r\n                    variant=\"ghost\" \r\n                    className=\"w-full justify-start\" \r\n                    isActive={currentView === 'profile'}\r\n                    onClick={() => onViewChange?.('profile')}\r\n                >\r\n                   <User />\r\n                   <span>Profile</span>\r\n                </SidebarMenuButton>\r\n                <SidebarMenuButton \r\n                    variant=\"ghost\" \r\n                    className=\"w-full justify-start\" \r\n                    isActive={currentView === 'settings'}\r\n                    onClick={() => onViewChange?.('settings')}\r\n                >\r\n                    <Settings />\r\n                    <span>Settings</span>\r\n                </SidebarMenuButton>\r\n            </AccordionContent>\r\n        </AccordionItem>\r\n        <AccordionItem value=\"admin\">\r\n            <AccordionTrigger className=\"w-full justify-start rounded-md px-2 hover:bg-sidebar-accent\">\r\n                <Users />\r\n                <span>Administration</span>\r\n            </AccordionTrigger>\r\n            <AccordionContent>\r\n                <SidebarMenuButton \r\n                    variant=\"ghost\" \r\n                    className=\"w-full justify-start\"\r\n                    isActive={currentView === 'user-management'}\r\n                    onClick={() => onViewChange?.('user-management')}\r\n                >\r\n                    <Users />\r\n                    <span>User Management</span>\r\n                </SidebarMenuButton>\r\n                <SidebarMenuButton \r\n                    variant=\"ghost\" \r\n                    className=\"w-full justify-start\"\r\n                    isActive={currentView === 'role-management'}\r\n                    onClick={() => onViewChange?.('role-management')}\r\n                >\r\n                    <Settings />\r\n                    <span>Role Management</span>\r\n                </SidebarMenuButton>\r\n                <SidebarMenuButton \r\n                    variant=\"ghost\" \r\n                    className=\"w-full justify-start\"\r\n                    isActive={currentView === 'company-management'}\r\n                    onClick={() => onViewChange?.('company-management')}\r\n                >\r\n                    <Building />\r\n                    <span>Company Management</span>\r\n                </SidebarMenuButton>\r\n            </AccordionContent>\r\n        </AccordionItem>\r\n    </Accordion>\r\n  );\r\n\r\n  const nonAccordionContent = (\r\n    <div className=\"flex flex-col items-center space-y-1\">\r\n        <SidebarMenuItem>\r\n            <SidebarMenuButton \r\n                tooltip=\"AI Store\" \r\n                variant=\"ghost\" \r\n                isActive={currentView === 'ai-store'}\r\n                onClick={() => onViewChange?.('ai-store')}\r\n                className=\"w-12 h-12 p-0 flex items-center justify-center\"\r\n            >\r\n                <Store />\r\n            </SidebarMenuButton>\r\n        </SidebarMenuItem>\r\n        <SidebarMenuItem>\r\n            <SidebarMenuButton \r\n                tooltip=\"Prompt Catalog\" \r\n                variant=\"ghost\" \r\n                isActive={currentView === 'prompt-catalog'}\r\n                onClick={() => onViewChange?.('prompt-catalog')}\r\n                className=\"w-12 h-12 p-0 flex items-center justify-center\"\r\n            >\r\n                <Library />\r\n            </SidebarMenuButton>\r\n        </SidebarMenuItem>\r\n        <DropdownMenu>\r\n            <DropdownMenuTrigger asChild>\r\n                <SidebarMenuItem>\r\n                    <SidebarMenuButton \r\n                        tooltip=\"Workspace\" \r\n                        variant=\"ghost\"\r\n                        className=\"w-12 h-12 p-0 flex items-center justify-center\"\r\n                    >\r\n                        <Briefcase />\r\n                    </SidebarMenuButton>\r\n                </SidebarMenuItem>\r\n            </DropdownMenuTrigger>\r\n            <DropdownMenuContent side=\"right\" align=\"start\" className=\"ml-2\">\r\n                <DropdownMenuItem onClick={() => onMainWorkspace?.()} className=\"cursor-pointer\">\r\n                    <LayoutGrid className=\"mr-2 h-4 w-4\" />\r\n                    <span>Main Workspace</span>\r\n                </DropdownMenuItem>\r\n                 {workspaces.map((ws) => (\r\n                    <DropdownMenuItem key={ws.workspaceId} onClick={() => handleWorkspaceClick(ws)} className=\"cursor-pointer\">\r\n                        <FolderKanban className=\"mr-2 h-4 w-4\" />\r\n                        <span>{ws.workspace_name}</span>\r\n                    </DropdownMenuItem>\r\n                ))}\r\n            </DropdownMenuContent>\r\n        </DropdownMenu>\r\n        <SidebarMenuItem>\r\n            <SidebarMenuButton \r\n                tooltip=\"Profile\" \r\n                variant=\"ghost\" \r\n                isActive={currentView === 'profile'}\r\n                onClick={() => onViewChange?.('profile')}\r\n                className=\"w-12 h-12 p-0 flex items-center justify-center\"\r\n            >\r\n                <User />\r\n            </SidebarMenuButton>\r\n        </SidebarMenuItem>\r\n        <SidebarMenuItem>\r\n            <SidebarMenuButton \r\n                tooltip=\"Settings\" \r\n                variant=\"ghost\" \r\n                isActive={currentView === 'settings'}\r\n                onClick={() => onViewChange?.('settings')}\r\n                className=\"w-12 h-12 p-0 flex items-center justify-center\"\r\n            >\r\n                <Settings />\r\n            </SidebarMenuButton>\r\n        </SidebarMenuItem>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full\">\r\n      <SidebarContent>\r\n        <SidebarMenu>\r\n            <div className={cn(\"flex items-center justify-between group-data-[collapsible=icon]:justify-center group-data-[collapsible=icon]:group-data-[state=expanded]:justify-between\", (state === 'expanded' || isMobile) ? \"p-2 mb-4\" : \"p-2 mb-2\")}>\r\n              <Link href=\"/home\" className=\"flex items-center gap-2 font-semibold text-xl group-data-[collapsible=icon]:hidden group-data-[collapsible=icon]:group-data-[state=expanded]:flex\">\r\n                  <Image\r\n                    src=\"/bablephish_logo.svg\"\r\n                    alt=\"BabelPhish Logo\"\r\n                    width={24}\r\n                    height={24}\r\n                    className=\"flex-shrink-0\"\r\n                  />\r\n                  <span className=\"text-primary\">BabelPhish</span>\r\n              </Link>\r\n              <SidebarTrigger asChild>\r\n                  <Button variant=\"ghost\" className=\"h-8 w-8\">\r\n                      <PanelLeft />\r\n                      <span className=\"sr-only\">Toggle Sidebar</span>\r\n                  </Button>\r\n              </SidebarTrigger>\r\n            </div>\r\n            \r\n            <div className={cn(\"space-y-1\", (state === 'expanded' || isMobile) ? \"px-2\" : \"px-0\")}>\r\n                {(state === 'expanded' || isMobile) ? mainContent : nonAccordionContent}\r\n            </div>\r\n            \r\n        </SidebarMenu>\r\n      </SidebarContent>\r\n       <div className={cn(\"mt-auto\", (state === 'expanded' || isMobile) ? \"p-4\" : \"p-2 flex justify-center\")}>\r\n            <div className=\"text-sm text-muted-foreground mb-2 group-data-[collapsible=icon]:hidden group-data-[collapsible=icon]:group-data-[state=expanded]:block truncate\">\r\n                {user?.email || 'User'}\r\n            </div>\r\n           <SidebarMenuButton \r\n               tooltip=\"Logout\" \r\n               variant=\"ghost\" \r\n               onClick={handleLogout} \r\n               className={cn(\r\n                   (state === 'expanded' || isMobile) \r\n                       ? \"w-full justify-start\" \r\n                       : \"w-12 h-12 p-0 flex items-center justify-center\"\r\n               )}\r\n           >\r\n              <LogOut />\r\n              <span className=\"group-data-[collapsible=icon]:hidden group-data-[collapsible=icon]:group-data-[state=expanded]:inline\">Logout</span>\r\n           </SidebarMenuButton>\r\n        </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2598, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-2xl font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2741, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/widgets/GenericWidget.tsx"],"sourcesContent":["\r\n'use client';\r\n\r\nimport ReactMarkdown from 'react-markdown';\r\n\r\ninterface GenericWidgetProps {\r\n  data: any;\r\n}\r\n\r\nexport function GenericWidget({ data }: GenericWidgetProps) {\r\n  return (\r\n    <div className=\"text-sm @[400px]:text-base h-full\">\r\n      {typeof data === 'string' ? \r\n        <div className=\"prose prose-sm dark:prose-invert max-w-none\">\r\n            <ReactMarkdown>{data}</ReactMarkdown>\r\n        </div>\r\n        : <pre className=\"whitespace-pre-wrap break-all\">{JSON.stringify(data, null, 2)}</pre>}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAGA;AAFA;;;AAQO,SAAS,cAAc,EAAE,IAAI,EAAsB;IACxD,qBACE,8OAAC;QAAI,WAAU;kBACZ,OAAO,SAAS,yBACf,8OAAC;YAAI,WAAU;sBACX,cAAA,8OAAC,wLAAA,CAAA,UAAa;0BAAE;;;;;;;;;;iCAElB,8OAAC;YAAI,WAAU;sBAAiC,KAAK,SAAS,CAAC,MAAM,MAAM;;;;;;;;;;;AAGrF","debugId":null}},
    {"offset": {"line": 2785, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/ai/flows/context-aware-widget-chat.ts"],"sourcesContent":["// This file is machine-generated - edit with care!\r\n\r\n'use server';\r\n\r\n/**\r\n * @fileOverview Implements the context-aware chat functionality for widgets.\r\n *\r\n * - contextAwareWidgetChat - A function that suggests relevant data/actions based on the widget's context.\r\n * - ContextAwareWidgetChatInput - The input type for the contextAwareWidgetChat function.\r\n * - ContextAwareWidgetChatOutput - The return type for the contextAwareWidgetChat function.\r\n */\r\n\r\nimport {ai} from '@/ai/genkit';\r\nimport {z} from 'genkit';\r\n\r\nconst ChatHistorySchema = z.object({\r\n    role: z.enum(['user', 'model']),\r\n    content: z.string(),\r\n});\r\n\r\nconst ContextAwareWidgetChatInputSchema = z.object({\r\n  widgetType: z.string().describe('The type of widget (e.g., Incident, Change).'),\r\n  widgetData: z.any().describe('The data currently displayed in the widget.'),\r\n  userQuery: z.string().describe('The user input in the chat.'),\r\n  selectedEntityData: z.any().optional().describe('The data for the specific entity the user is asking about.'),\r\n  chatHistory: z.array(ChatHistorySchema).optional().describe('The previous chat history.'),\r\n  isGenericWidget: z.boolean().optional().describe('Flag to indicate if the widget is of generic type.'),\r\n});\r\nexport type ContextAwareWidgetChatInput = z.infer<typeof ContextAwareWidgetChatInputSchema>;\r\n\r\nconst ContextAwareWidgetChatOutputSchema = z.object({\r\n  suggestedActions: z.array(\r\n    z.string().describe('A list of suggested actions based on the widget context.')\r\n  ).\r\n  describe('The suggestions for the user to perform in the widget.')\r\n});\r\nexport type ContextAwareWidgetChatOutput = z.infer<typeof ContextAwareWidgetChatOutputSchema>;\r\n\r\nexport async function contextAwareWidgetChat(input: ContextAwareWidgetChatInput): Promise<ContextAwareWidgetChatOutput> {\r\n  return contextAwareWidgetChatFlow(input);\r\n}\r\n\r\nconst contextAwareWidgetChatPrompt = ai.definePrompt({\r\n  name: 'contextAwareWidgetChatPrompt',\r\n  input: {schema: ContextAwareWidgetChatInputSchema},\r\n  output: {schema: ContextAwareWidgetChatOutputSchema},\r\n  prompt: `You are an AI assistant within a ServiceNow widget.\r\n\r\n  Based on the widget type and its current data, suggest relevant actions or answer questions.\r\n  Consider the user's last query and the chat history to refine your suggestions.\r\n\r\n  Widget Type: {{{widgetType}}}\r\n  {{#if selectedEntityData}}\r\n  The user is specifically asking about the following record (identified by number and sys_id):\r\n  {{{json selectedEntityData}}}\r\n  {{else}}\r\n  Widget Data:\r\n  {{#if isGenericWidget}}\r\n  {{{widgetData}}}\r\n  {{else}}\r\n  {{{json widgetData}}}\r\n  {{/if}}\r\n  {{/if}}\r\n\r\n  {{#if chatHistory}}\r\n  Conversation History:\r\n  {{#each chatHistory}}\r\n  - {{this.role}}: {{this.content}}\r\n  {{/each}}\r\n  {{/if}}\r\n\r\n  User's Latest Query: {{{userQuery}}}\r\n\r\n  If the user asks a question, answer it based on the provided data and chat history. If they ask for an action, suggest relevant actions (e.g., \"search for related knowledge articles\", \"update incident priority\", \"assign to correct group\").\r\n\r\n  Return a JSON array of strings with the suggested actions or answer.\r\n\r\n  Example Output for suggestions:\r\n  {\r\n    \"suggestedActions\": [\r\n      \"Search for related knowledge articles\",\r\n      \"Update incident priority\",\r\n      \"Add a comment to the incident\"\r\n    ]\r\n  }\r\n\r\n\r\n  Example Output for an answer:\r\n  {\r\n    \"suggestedActions\": [\r\n      \"The priority of this incident is 1 - Critical.\"\r\n    ]\r\n  }\r\n  `,\r\n});\r\n\r\nconst contextAwareWidgetChatFlow = ai.defineFlow(\r\n  {\r\n    name: 'contextAwareWidgetChatFlow',\r\n    inputSchema: ContextAwareWidgetChatInputSchema,\r\n    outputSchema: ContextAwareWidgetChatOutputSchema,\r\n  },\r\n  async (input) => {\r\n    const promptInput = {\r\n      ...input,\r\n      isGenericWidget: input.widgetType === 'generic',\r\n    };\r\n    const {output} = await contextAwareWidgetChatPrompt(promptInput);\r\n    return output!;\r\n  }\r\n);\r\n"],"names":[],"mappings":";;;;;;IAsCsB,yBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 2798, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/dialog.tsx"],"sourcesContent":["\r\n\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Dialog = DialogPrimitive.Root\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst dialogContentVariants = cva(\r\n    \"fixed z-50 grid w-full gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n    {\r\n      variants: {\r\n        size: {\r\n          default: \"max-w-lg left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%]\",\r\n          lg: \"w-full max-w-4xl left-[50%] top-[50%] -translate-y-1/2 -translate-x-1/2\",\r\n          form: \"max-w-md left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%]\"\r\n        },\r\n      },\r\n      defaultVariants: {\r\n        size: \"default\",\r\n      },\r\n    }\r\n)\r\n\r\nexport interface DialogContentProps\r\n  extends React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>,\r\n    VariantProps<typeof dialogContentVariants> {}\r\n\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  DialogContentProps\r\n>(({ className, children, size, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(dialogContentVariants({ size }), className)}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n))\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,SAAS,kKAAA,CAAA,OAAoB;AAEnC,MAAM,gBAAgB,kKAAA,CAAA,UAAuB;AAE7C,MAAM,eAAe,kKAAA,CAAA,SAAsB;AAE3C,MAAM,cAAc,kKAAA,CAAA,QAAqB;AAEzC,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,UAAuB;QACtB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,0JACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,kKAAA,CAAA,UAAuB,CAAC,WAAW;AAE/D,MAAM,wBAAwB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EAC5B,2bACA;IACE,UAAU;QACR,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,MAAM;IACR;AACF;AAQJ,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE,oBAC1C,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,kKAAA,CAAA,UAAuB;gBACtB,KAAK;gBACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,sBAAsB;oBAAE;gBAAK,IAAI;gBAC9C,GAAG,KAAK;;oBAER;kCACD,8OAAC,kKAAA,CAAA,QAAqB;wBAAC,WAAU;;0CAC/B,8OAAC,4LAAA,CAAA,IAAC;gCAAC,WAAU;;;;;;0CACb,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,kKAAA,CAAA,UAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,kKAAA,CAAA,QAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,cAA2B;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,kKAAA,CAAA,cAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 2946, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst labelVariants = cva(\r\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n)\r\n\r\nconst Label = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\r\n    VariantProps<typeof labelVariants>\r\n>(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root\r\n    ref={ref}\r\n    className={cn(labelVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nLabel.displayName = LabelPrimitive.Root.displayName\r\n\r\nexport { Label }\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 2978, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/form.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport {\r\n  Controller,\r\n  FormProvider,\r\n  useFormContext,\r\n  type ControllerProps,\r\n  type FieldPath,\r\n  type FieldValues,\r\n} from \"react-hook-form\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Label } from \"@/components/ui/label\"\r\n\r\nconst Form = FormProvider\r\n\r\ntype FormFieldContextValue<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n> = {\r\n  name: TName\r\n}\r\n\r\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\r\n  {} as FormFieldContextValue\r\n)\r\n\r\nconst FormField = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n>({\r\n  ...props\r\n}: ControllerProps<TFieldValues, TName>) => {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name: props.name }}>\r\n      <Controller {...props} />\r\n    </FormFieldContext.Provider>\r\n  )\r\n}\r\n\r\nconst useFormField = () => {\r\n  const fieldContext = React.useContext(FormFieldContext)\r\n  const itemContext = React.useContext(FormItemContext)\r\n  const { getFieldState, formState } = useFormContext()\r\n\r\n  const fieldState = getFieldState(fieldContext.name, formState)\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"useFormField should be used within <FormField>\")\r\n  }\r\n\r\n  const { id } = itemContext\r\n\r\n  return {\r\n    id,\r\n    name: fieldContext.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    ...fieldState,\r\n  }\r\n}\r\n\r\ntype FormItemContextValue = {\r\n  id: string\r\n}\r\n\r\nconst FormItemContext = React.createContext<FormItemContextValue>(\r\n  {} as FormItemContextValue\r\n)\r\n\r\nconst FormItem = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const id = React.useId()\r\n\r\n  return (\r\n    <FormItemContext.Provider value={{ id }}>\r\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\r\n    </FormItemContext.Provider>\r\n  )\r\n})\r\nFormItem.displayName = \"FormItem\"\r\n\r\nconst FormLabel = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  const { error, formItemId } = useFormField()\r\n\r\n  return (\r\n    <Label\r\n      ref={ref}\r\n      className={cn(error && \"text-destructive\", className)}\r\n      htmlFor={formItemId}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormLabel.displayName = \"FormLabel\"\r\n\r\nconst FormControl = React.forwardRef<\r\n  React.ElementRef<typeof Slot>,\r\n  React.ComponentPropsWithoutRef<typeof Slot>\r\n>(({ ...props }, ref) => {\r\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\r\n\r\n  return (\r\n    <Slot\r\n      ref={ref}\r\n      id={formItemId}\r\n      aria-describedby={\r\n        !error\r\n          ? `${formDescriptionId}`\r\n          : `${formDescriptionId} ${formMessageId}`\r\n      }\r\n      aria-invalid={!!error}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormControl.displayName = \"FormControl\"\r\n\r\nconst FormDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => {\r\n  const { formDescriptionId } = useFormField()\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formDescriptionId}\r\n      className={cn(\"text-sm text-muted-foreground\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormDescription.displayName = \"FormDescription\"\r\n\r\nconst FormMessage = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, children, ...props }, ref) => {\r\n  const { error, formMessageId } = useFormField()\r\n  const body = error ? String(error?.message ?? \"\") : children\r\n\r\n  if (!body) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formMessageId}\r\n      className={cn(\"text-sm font-medium text-destructive\", className)}\r\n      {...props}\r\n    >\r\n      {body}\r\n    </p>\r\n  )\r\n})\r\nFormMessage.displayName = \"FormMessage\"\r\n\r\nexport {\r\n  useFormField,\r\n  Form,\r\n  FormItem,\r\n  FormLabel,\r\n  FormControl,\r\n  FormDescription,\r\n  FormMessage,\r\n  FormField,\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3131, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\r\n\r\nimport {cn} from '@/lib/utils';\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\r\n  ({className, ...props}, ref) => {\r\n    return (\r\n      <textarea\r\n        className={cn(\r\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\nTextarea.displayName = 'Textarea';\r\n\r\nexport {Textarea};\r\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 3159, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/widgets/EntityEditForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport * as z from 'zod';\r\nimport type { Incident, Problem, Change } from '@/lib/types';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { DialogClose } from '@/components/ui/dialog';\r\n\r\ntype Entity = Incident | Problem | Change;\r\n\r\nconst incidentSchema = z.object({\r\n  short_description: z.string().min(1, 'Short description is required'),\r\n  priority: z.string().optional(),\r\n  state: z.string().optional(),\r\n  assigned_to: z.string().optional(),\r\n  description: z.string().optional(),\r\n});\r\n\r\nconst problemSchema = z.object({\r\n  short_description: z.string().min(1, 'Short description is required'),\r\n  description: z.string().optional(),\r\n  workaround: z.string().optional(),\r\n  cause: z.string().optional(),\r\n});\r\n\r\nconst changeSchema = z.object({\r\n  short_description: z.string().min(1, 'Short description is required'),\r\n  type: z.string().optional(),\r\n  state: z.string().optional(),\r\n  assigned_to: z.string().optional(),\r\n  justification: z.string().optional(),\r\n  implementation_plan: z.string().optional(),\r\n});\r\n\r\nconst entitySchemas = {\r\n  incident: incidentSchema,\r\n  problem: problemSchema,\r\n  change: changeSchema,\r\n};\r\n\r\nconst entityFields: { [key in 'incident' | 'problem' | 'change']: { name: string; label: string; type: 'input' | 'textarea' }[] } = {\r\n  incident: [\r\n    { name: 'short_description', label: 'Short Description', type: 'input' },\r\n    { name: 'priority', label: 'Priority', type: 'input' },\r\n    { name: 'state', label: 'State', type: 'input' },\r\n    { name: 'assigned_to', label: 'Assigned To', type: 'input' },\r\n    { name: 'description', label: 'Description', type: 'textarea' },\r\n  ],\r\n  problem: [\r\n    { name: 'short_description', label: 'Short Description', type: 'input' },\r\n    { name: 'description', label: 'Description', type: 'textarea' },\r\n    { name: 'workaround', label: 'Workaround', type: 'textarea' },\r\n    { name: 'cause', label: 'Cause', type: 'textarea' },\r\n  ],\r\n  change: [\r\n    { name: 'short_description', label: 'Short Description', type: 'input' },\r\n    { name: 'type', label: 'Type', type: 'input' },\r\n    { name: 'state', label: 'State', type: 'input' },\r\n    { name: 'assigned_to', label: 'Assigned To', type: 'input' },\r\n    { name: 'justification', label: 'Justification', type: 'textarea' },\r\n    { name: 'implementation_plan', label: 'Implementation Plan', type: 'textarea' },\r\n  ],\r\n};\r\n\r\n\r\ninterface EntityEditFormProps {\r\n  type: 'incident' | 'problem' | 'change';\r\n  entity: Entity;\r\n  onSubmit: (values: Partial<Entity>) => void;\r\n}\r\n\r\nexport function EntityEditForm({ type, entity, onSubmit }: EntityEditFormProps) {\r\n  const form = useForm({\r\n    resolver: zodResolver(entitySchemas[type]),\r\n    defaultValues: entity,\r\n  });\r\n\r\n  const fieldsToRender = entityFields[type];\r\n\r\n  return (\r\n    <Form {...form}>\r\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n        {fieldsToRender.map((fieldInfo) => (\r\n          <FormField\r\n            key={fieldInfo.name}\r\n            control={form.control}\r\n            name={fieldInfo.name as any}\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormLabel>{fieldInfo.label}</FormLabel>\r\n                <FormControl>\r\n                  {fieldInfo.type === 'textarea' ? <Textarea {...field} /> : <Input {...field} />}\r\n                </FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n        ))}\r\n        <DialogClose asChild>\r\n          <Button type=\"submit\">Save Changes</Button>\r\n        </DialogClose>\r\n      </form>\r\n    </Form>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3382, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/widgets/EntityWidget.tsx"],"sourcesContent":["\r\n'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport type { Incident, Problem, Change } from '@/lib/types';\r\nimport { Button } from '@/components/ui/button';\r\nimport { ArrowLeft, Pencil } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\r\nimport { EntityEditForm } from './EntityEditForm';\r\n\r\ntype Entity = Incident | Problem | Change;\r\n\r\ninterface EntityWidgetProps {\r\n  widgetId: string;\r\n  type: 'incident' | 'problem' | 'change';\r\n  entities: Entity[];\r\n  onTextSelect: (text: string) => void;\r\n  updateEntity: (widgetId: string, entityNumber: string, updatedData: Partial<Entity>) => void;\r\n  onEntitySelectForChat: (entity: Entity) => void;\r\n}\r\n\r\nconst entityFieldMapping = {\r\n  incident: {\r\n    title: 'Incident',\r\n    fields: {\r\n      short_description: 'Short Description',\r\n      state: 'State',\r\n      priority: 'Priority',\r\n      assigned_to: 'Assigned To',\r\n      description: 'Description',\r\n    },\r\n  },\r\n  problem: {\r\n    title: 'Problem',\r\n    fields: {\r\n      short_description: 'Short Description',\r\n      description: 'Description',\r\n      workaround: 'Workaround',\r\n      cause: 'Cause',\r\n    },\r\n  },\r\n  change: {\r\n    title: 'Change',\r\n    fields: {\r\n      short_description: 'Short Description',\r\n      type: 'Type',\r\n      state: 'State',\r\n      assigned_to: 'Assigned To',\r\n      justification: 'Justification',\r\n      implementation_plan: 'Implementation Plan',\r\n    },\r\n  },\r\n};\r\n\r\nexport function EntityWidget({ widgetId, type, entities, onTextSelect, updateEntity, onEntitySelectForChat }: EntityWidgetProps) {\r\n  const [selectedEntity, setSelectedEntity] = useState<Entity | null>(null);\r\n  const [editingEntity, setEditingEntity] = useState<Entity | null>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleMouseUp = () => {\r\n      const selection = window.getSelection()?.toString().trim();\r\n      if (selection) {\r\n        onTextSelect(selection);\r\n      }\r\n    };\r\n    const container = containerRef.current;\r\n    container?.addEventListener('mouseup', handleMouseUp);\r\n    return () => {\r\n      container?.removeEventListener('mouseup', handleMouseUp);\r\n    };\r\n  }, [onTextSelect]);\r\n\r\n  const handleSelectEntity = (entity: Entity) => {\r\n    setSelectedEntity(entity);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setSelectedEntity(null);\r\n  };\r\n  \r\n  const handleEntityUpdate = (values: Partial<Entity>) => {\r\n    if (editingEntity) {\r\n      updateEntity(widgetId, editingEntity.number, values);\r\n      setEditingEntity(null);\r\n      if(selectedEntity && selectedEntity.number === editingEntity.number) {\r\n        setSelectedEntity({...selectedEntity, ...values});\r\n      }\r\n    }\r\n  };\r\n\r\n  const { title: entityTitle, fields } = entityFieldMapping[type];\r\n\r\n  return (\r\n    <div ref={containerRef} className=\"relative h-full overflow-hidden text-sm @[400px]:text-base\">\r\n      <div className={cn(\"transition-transform duration-300 ease-in-out h-full overflow-y-auto no-scrollbar\", {\r\n        '-translate-x-full': selectedEntity\r\n      })}>\r\n        {entities.map((entity) => (\r\n          <div \r\n            key={entity.number}\r\n            className=\"mb-4 p-2 rounded-md hover:bg-accent/50\"\r\n          >\r\n            <p \r\n              className=\"font-medium cursor-pointer\"\r\n              onClick={() => onEntitySelectForChat(entity)}\r\n            >\r\n              {entity.number}\r\n            </p>\r\n\r\n            <p \r\n              className=\"text-muted-foreground cursor-pointer text-xs @[400px]:text-sm\"\r\n              onClick={() => handleSelectEntity(entity)}\r\n            >\r\n              {entity.short_description}\r\n            </p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className={cn(\r\n        \"absolute top-0 right-0 h-full w-full bg-card p-4 transition-transform duration-300 ease-in-out\",\r\n        \"flex flex-col\",\r\n        selectedEntity ? 'translate-x-0' : 'translate-x-full'\r\n      )}>\r\n        {selectedEntity && (\r\n           <div className=\"flex-1 min-h-0 overflow-auto no-scrollbar\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n               <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7\" onClick={handleBack}>\r\n                <ArrowLeft size={18} />\r\n              </Button>\r\n               <h3 className=\"font-semibold\">{selectedEntity.number}</h3>\r\n                <Dialog onOpenChange={(open) => !open && setEditingEntity(null)}>\r\n                  <DialogTrigger asChild>\r\n                    <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7\" onClick={() => setEditingEntity(selectedEntity)}>\r\n                      <Pencil size={16} />\r\n                      <span className=\"sr-only\">Edit</span>\r\n                    </Button>\r\n                  </DialogTrigger>\r\n                  <DialogContent>\r\n                    <DialogHeader>\r\n                      <DialogTitle>Edit {entityTitle} {editingEntity?.number}</DialogTitle>\r\n                    </DialogHeader>\r\n                    {editingEntity && <EntityEditForm type={type} entity={editingEntity} onSubmit={handleEntityUpdate} />}\r\n                  </DialogContent>\r\n                </Dialog>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              {Object.entries(fields).map(([key, label]) => {\r\n                const rawValue = (selectedEntity as any)[key];\r\n                if (rawValue === undefined || rawValue === null || rawValue === '') return null;\r\n                \r\n                const value = typeof rawValue === 'object' && rawValue.hasOwnProperty('value') ? rawValue.value : rawValue;\r\n\r\n                return (\r\n                  <div key={key}>\r\n                    <h4 className=\"font-medium text-muted-foreground\">{label}</h4>\r\n                    <p className=\"whitespace-pre-wrap\">{value}</p>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n           </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3688, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/avatar.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Avatar = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAvatar.displayName = AvatarPrimitive.Root.displayName\r\n\r\nconst AvatarImage = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Image>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Image\r\n    ref={ref}\r\n    className={cn(\"aspect-square h-full w-full\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\r\n\r\nconst AvatarFallback = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Fallback\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\r\n\r\nexport { Avatar, AvatarImage, AvatarFallback }\r\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,OAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,OAAO,WAAW,GAAG,kKAAA,CAAA,OAAoB,CAAC,WAAW;AAErD,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,+BAA+B;QAC5C,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,kKAAA,CAAA,QAAqB,CAAC,WAAW;AAE3D,MAAM,+BAAiB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,WAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,wEACA;QAED,GAAG,KAAK;;;;;;AAGb,eAAe,WAAW,GAAG,kKAAA,CAAA,WAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 3739, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/widgets/ChatPanel.tsx"],"sourcesContent":["\r\n'use client';\r\n\r\nimport { useState, type FormEvent, useRef, useEffect } from 'react';\r\nimport type { ChatMessage } from '@/lib/types';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Send, Loader2, Bot, User, PanelLeft } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport { Avatar, AvatarFallback, AvatarImage } from '../ui/avatar';\r\n\r\ninterface ChatPanelProps {\r\n  messages: ChatMessage[];\r\n  loading: boolean;\r\n  onSubmit: (query: string) => void;\r\n  agentType: string;\r\n  onClose: () => void;\r\n}\r\n\r\nexport function ChatPanel({ messages, loading, onSubmit, agentType, onClose }: ChatPanelProps) {\r\n  const [query, setQuery] = useState('');\r\n  const scrollAreaRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (scrollAreaRef.current) {\r\n        scrollAreaRef.current.scrollTop = scrollAreaRef.current.scrollHeight;\r\n    }\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    if (!loading) {\r\n      inputRef.current?.focus();\r\n    }\r\n  }, [loading]);\r\n\r\n  const handleSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    if (!query.trim()) return;\r\n    onSubmit(query);\r\n    setQuery('');\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col bg-background/50\">\r\n      <div className=\"p-3 flex items-center justify-between\">\r\n        <h4 className=\"font-semibold text-sm\">Chat with {agentType}</h4>\r\n        <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7\" onClick={onClose}>\r\n          <PanelLeft size={18} />\r\n        </Button>\r\n      </div>\r\n\r\n      <div className=\"flex-1 p-4 overflow-auto no-scrollbar\" ref={scrollAreaRef}>\r\n        <div className=\"space-y-4\">\r\n          {messages.map((message, index) => (\r\n            <div key={index} className={cn('flex items-start gap-3', message.role === 'user' ? 'justify-end' : 'justify-start')}>\r\n              {message.role === 'model' && (\r\n                <Avatar className=\"w-8 h-8 border\">\r\n                    <AvatarFallback><Bot size={18} /></AvatarFallback>\r\n                </Avatar>\r\n              )}\r\n              <div\r\n                className={cn('rounded-lg px-3 py-2 max-w-[80%] text-sm', \r\n                message.role === 'user' ? 'bg-primary text-primary-foreground' : 'bg-muted')}\r\n              >\r\n                <p className=\"whitespace-pre-wrap\">{message.content}</p>\r\n              </div>\r\n              {message.role === 'user' && (\r\n                 <Avatar className=\"w-8 h-8 border\">\r\n                    <AvatarFallback><User size={18} /></AvatarFallback>\r\n                </Avatar>\r\n              )}\r\n            </div>\r\n          ))}\r\n          {loading && (\r\n             <div className='flex items-start gap-3 justify-start'>\r\n                <Avatar className=\"w-8 h-8 border\">\r\n                    <AvatarFallback><Bot size={18} /></AvatarFallback>\r\n                </Avatar>\r\n                <div className='rounded-lg px-3 py-2 max-w-[80%] text-sm bg-muted flex items-center'>\r\n                    <Loader2 className=\"animate-spin h-5 w-5\" />\r\n                </div>\r\n             </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"p-4\">\r\n        <form onSubmit={handleSubmit} className=\"flex w-full items-center gap-2\">\r\n          <Input\r\n            ref={inputRef}\r\n            placeholder=\"Your message...\"\r\n            value={query}\r\n            onChange={(e) => setQuery(e.target.value)}\r\n            disabled={loading}\r\n            className=\"text-xs\"\r\n          />\r\n          <Button type=\"submit\" size=\"icon\" disabled={loading || !query.trim()}>\r\n            {loading ? <Loader2 className=\"animate-spin\" size={16}/> : <Send size={16} />}\r\n          </Button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAGA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AARA;;;;;;;;AAkBO,SAAS,UAAU,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,OAAO,EAAkB;IAC3F,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,gBAAgB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB;IAC7C,MAAM,WAAW,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAoB;IAE1C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,cAAc,OAAO,EAAE;YACvB,cAAc,OAAO,CAAC,SAAS,GAAG,cAAc,OAAO,CAAC,YAAY;QACxE;IACF,GAAG;QAAC;KAAS;IAEb,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,SAAS;YACZ,SAAS,OAAO,EAAE;QACpB;IACF,GAAG;QAAC;KAAQ;IAEZ,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAI,CAAC,MAAM,IAAI,IAAI;QACnB,SAAS;QACT,SAAS;IACX;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;;4BAAwB;4BAAW;;;;;;;kCACjD,8OAAC,kIAAA,CAAA,SAAM;wBAAC,SAAQ;wBAAQ,MAAK;wBAAO,WAAU;wBAAU,SAAS;kCAC/D,cAAA,8OAAC,gNAAA,CAAA,YAAS;4BAAC,MAAM;;;;;;;;;;;;;;;;;0BAIrB,8OAAC;gBAAI,WAAU;gBAAwC,KAAK;0BAC1D,cAAA,8OAAC;oBAAI,WAAU;;wBACZ,SAAS,GAAG,CAAC,CAAC,SAAS,sBACtB,8OAAC;gCAAgB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,0BAA0B,QAAQ,IAAI,KAAK,SAAS,gBAAgB;;oCAChG,QAAQ,IAAI,KAAK,yBAChB,8OAAC,kIAAA,CAAA,SAAM;wCAAC,WAAU;kDACd,cAAA,8OAAC,kIAAA,CAAA,iBAAc;sDAAC,cAAA,8OAAC,gMAAA,CAAA,MAAG;gDAAC,MAAM;;;;;;;;;;;;;;;;kDAGjC,8OAAC;wCACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,4CACd,QAAQ,IAAI,KAAK,SAAS,uCAAuC;kDAEjE,cAAA,8OAAC;4CAAE,WAAU;sDAAuB,QAAQ,OAAO;;;;;;;;;;;oCAEpD,QAAQ,IAAI,KAAK,wBACf,8OAAC,kIAAA,CAAA,SAAM;wCAAC,WAAU;kDACf,cAAA,8OAAC,kIAAA,CAAA,iBAAc;sDAAC,cAAA,8OAAC,kMAAA,CAAA,OAAI;gDAAC,MAAM;;;;;;;;;;;;;;;;;+BAd1B;;;;;wBAmBX,yBACE,8OAAC;4BAAI,WAAU;;8CACZ,8OAAC,kIAAA,CAAA,SAAM;oCAAC,WAAU;8CACd,cAAA,8OAAC,kIAAA,CAAA,iBAAc;kDAAC,cAAA,8OAAC,gMAAA,CAAA,MAAG;4CAAC,MAAM;;;;;;;;;;;;;;;;8CAE/B,8OAAC;oCAAI,WAAU;8CACX,cAAA,8OAAC,iNAAA,CAAA,UAAO;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAOjC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACtC,8OAAC,iIAAA,CAAA,QAAK;4BACJ,KAAK;4BACL,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4BACxC,UAAU;4BACV,WAAU;;;;;;sCAEZ,8OAAC,kIAAA,CAAA,SAAM;4BAAC,MAAK;4BAAS,MAAK;4BAAO,UAAU,WAAW,CAAC,MAAM,IAAI;sCAC/D,wBAAU,8OAAC,iNAAA,CAAA,UAAO;gCAAC,WAAU;gCAAe,MAAM;;;;;qDAAQ,8OAAC,kMAAA,CAAA,OAAI;gCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMnF","debugId":null}},
    {"offset": {"line": 4014, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/widgets/BaseWidget.tsx"],"sourcesContent":["\r\n\r\n'use client';\r\n\r\nimport { useState, type FormEvent, useRef, useCallback, useEffect } from 'react';\r\nimport type { Widget, Problem, Incident, Change, ChatMessage } from '@/lib/types';\r\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';\r\nimport { X, Bot, Minus, Heart, MessageCircle } from 'lucide-react';\r\nimport { GenericWidget } from './GenericWidget';\r\nimport { contextAwareWidgetChat } from '@/ai/flows/context-aware-widget-chat';\r\nimport { EntityWidget } from './EntityWidget';\r\nimport { cn } from '@/lib/utils';\r\nimport { ChatPanel } from './ChatPanel';\r\nimport { WIDGET_EXPANDED_WIDTH, WIDGET_INITIAL_WIDTH } from './WidgetContainer';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\n\r\ninterface BaseWidgetProps {\r\n  widget: Widget;\r\n  removeWidget: (id: string) => void;\r\n  updateEntity: (widgetId: string, entityNumber: string, updatedData: Partial<Problem | Incident | Change>) => void;\r\n  bringToFront: (id: string, isSummaryOrChat?: boolean) => void;\r\n  toggleMinimizeWidget: (id: string) => void;\r\n  toggleFavoriteWidget: (id: string) => void;\r\n}\r\n\r\nexport function BaseWidget({ widget, removeWidget, updateEntity, bringToFront, toggleMinimizeWidget, toggleFavoriteWidget }: BaseWidgetProps) {\r\n  const [chatMessages, setChatMessages] = useState<ChatMessage[]>([]);\r\n  const [isChatOpen, setIsChatOpen] = useState(widget.type === 'generic');\r\n  const [loading, setLoading] = useState(false);\r\n  const widgetRef = useRef<HTMLDivElement>(null);\r\n  const [chatPanelWidth, setChatPanelWidth] = useState(375);\r\n  const [isResizing, setIsResizing] = useState(false);\r\n  const [selectedEntityForChat, setSelectedEntityForChat] = useState<Incident | Problem | Change | null>(null);\r\n  const isMobile = useIsMobile();\r\n\r\n\r\n  useEffect(() => {\r\n    if (isChatOpen && widgetRef.current) {\r\n        setChatPanelWidth(widgetRef.current.offsetWidth / 2);\r\n    }\r\n  }, [isChatOpen]);\r\n\r\n\r\n  const handleResize = useCallback((e: MouseEvent) => {\r\n    if (isResizing && widgetRef.current) {\r\n      const widgetRect = widgetRef.current.getBoundingClientRect();\r\n      const newChatWidth = widgetRect.right - e.clientX;\r\n      \r\n      const totalWidth = widgetRef.current.offsetWidth;\r\n      const minWidth = 200;\r\n      const maxWidth = totalWidth - 250;\r\n      \r\n      if (newChatWidth > minWidth && newChatWidth < maxWidth) {\r\n        setChatPanelWidth(newChatWidth);\r\n      }\r\n    }\r\n  }, [isResizing]);\r\n\r\n  const handleResizeEnd = useCallback(() => {\r\n    setIsResizing(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isResizing) {\r\n      window.addEventListener('mousemove', handleResize);\r\n      window.addEventListener('mouseup', handleResizeEnd);\r\n    } else {\r\n      window.removeEventListener('mousemove', handleResize);\r\n      window.removeEventListener('mouseup', handleResizeEnd);\r\n    }\r\n    return () => {\r\n      window.removeEventListener('mousemove', handleResize);\r\n      window.removeEventListener('mouseup', handleResizeEnd);\r\n    };\r\n  }, [isResizing, handleResize, handleResizeEnd]);\r\n  \r\n  const toggleChat = () => {\r\n    if (!isChatOpen) {\r\n      bringToFront(widget.id, true);\r\n    }\r\n    setIsChatOpen(prev => {\r\n        if (!prev === false) {\r\n            setSelectedEntityForChat(null);\r\n        }\r\n        return !prev;\r\n    });\r\n  }\r\n  \r\n  const handleChatSubmit = async (query: string) => {\r\n    if (!query.trim()) return;\r\n    setLoading(true);\r\n    \r\n    const userMessage: ChatMessage = { role: 'user', content: query };\r\n    const newMessages: ChatMessage[] = [...chatMessages, userMessage];\r\n    setChatMessages(newMessages);\r\n\r\n    if (!isChatOpen) {\r\n      toggleChat();\r\n    }\r\n    \r\n    try {\r\n      const result = await contextAwareWidgetChat({\r\n        widgetType: widget.type,\r\n        widgetData: widget.data,\r\n        userQuery: query,\r\n        selectedEntityData: selectedEntityForChat ?? undefined,\r\n        chatHistory: newMessages.slice(0, -1).map(m => ({role: m.role === 'user' ? 'user' : 'model', content: m.content})),\r\n      });\r\n      const aiResponse: ChatMessage = { role: 'model', content: result.suggestedActions.join('\\n') || \"I don't have any specific suggestions for that.\" };\r\n      setChatMessages(prev => [...prev, aiResponse]);\r\n\r\n    } catch (error) {\r\n      console.error('Context-aware chat failed:', error);\r\n      const errorMessage: ChatMessage = { role: 'model', content: 'Sorry, I encountered an error.' };\r\n      setChatMessages(prev => [...prev, errorMessage]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleTextSelection = (text: string) => {\r\n    if (text) {\r\n      if (!isChatOpen) {\r\n        toggleChat();\r\n      }\r\n      setChatMessages(prev => [\r\n        ...prev,\r\n        { role: 'model', content: `What would you like to ask about \"${text}\"?` }\r\n      ]);\r\n    }\r\n  };\r\n  \r\n  const handleEntitySelectForChat = (entity: Incident | Problem | Change) => {\r\n    setSelectedEntityForChat(entity);\r\n    if (!isChatOpen) {\r\n      setIsChatOpen(true);\r\n    }\r\n    setChatMessages(prev => [\r\n      ...prev,\r\n      { role: 'model', content: `Now focusing on ${widget.type} ${entity.number}. What would you like to know?` }\r\n    ]);\r\n  };\r\n  \r\n  const renderWidgetContent = () => {\r\n    switch (widget.type) {\r\n      case 'incident':\r\n      case 'problem':\r\n      case 'change':\r\n        if (!Array.isArray(widget.data)) {\r\n          return <GenericWidget data=\"Data is not in the correct format.\" />;\r\n        }\r\n        const entities = widget.data.map((e: any) => \r\n            Object.entries(e).reduce((acc, [key, value]) => {\r\n                acc[key] = typeof value === 'object' && value !== null && 'value' in value ? (value as any).value : value;\r\n                return acc;\r\n            }, {} as any)\r\n        );\r\n        return <EntityWidget widgetId={widget.id} type={widget.type} entities={entities} onTextSelect={handleTextSelection} updateEntity={updateEntity} onEntitySelectForChat={handleEntitySelectForChat} />;\r\n      case 'generic':\r\n      default:\r\n        return <GenericWidget data={widget.data} />;\r\n    }\r\n  };\r\n\r\n  const getWidgetWidth = () => {\r\n    if (isMobile) return '100%';\r\n    if (widget.width) return widget.width;\r\n    if (isChatOpen) return WIDGET_EXPANDED_WIDTH;\r\n    return WIDGET_INITIAL_WIDTH;\r\n  };\r\n\r\n  return (\r\n    <Card \r\n      className={cn(\r\n        \"w-full h-full flex flex-col bg-card/80 backdrop-blur-sm overflow-hidden\",\r\n        !isMobile && \"resizable-widget\"\r\n      )}\r\n      ref={widgetRef}\r\n      style={{ \r\n        width: getWidgetWidth(),\r\n        height: isMobile ? 'auto' : widget.height,\r\n      }}\r\n    >\r\n      <div className={cn(!isMobile && \"drag-handle cursor-move\")} onDoubleClick={() => toggleMinimizeWidget(widget.id)}>\r\n        <CardHeader className=\"flex flex-row items-start justify-between p-4\">\r\n            <div className=\"flex-1\">\r\n            <CardTitle className=\"text-lg @[400px]:text-xl @[500px]:text-2xl\">{widget.query}</CardTitle>\r\n            <TooltipProvider>\r\n                <Tooltip>\r\n                <TooltipTrigger asChild>\r\n                    <CardDescription className=\"flex items-center gap-1.5 cursor-help mt-1 text-xs @[400px]:text-sm\">\r\n                    <Bot size={14} className=\"text-primary\" />\r\n                    {widget.agent.agentType}\r\n                    </CardDescription>\r\n                </TooltipTrigger>\r\n                <TooltipContent>\r\n                    <p>{widget.agent.agentBehavior}</p>\r\n                </TooltipContent>\r\n            </Tooltip>\r\n          </TooltipProvider>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n            <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7\" onClick={toggleChat}>\r\n                <MessageCircle size={18} className={isChatOpen ? 'text-primary' : ''} />\r\n                <span className=\"sr-only\">Toggle chat</span>\r\n            </Button>\r\n             <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7\" onClick={() => toggleFavoriteWidget(widget.id)}>\r\n                <Heart size={18} className={widget.isFavorited ? 'fill-primary text-primary' : ''} />\r\n                <span className=\"sr-only\">Favorite widget</span>\r\n            </Button>\r\n             <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7\" onClick={() => toggleMinimizeWidget(widget.id)}>\r\n                <Minus size={18} />\r\n                <span className=\"sr-only\">Minimize widget</span>\r\n            </Button>\r\n            <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7\" onClick={() => removeWidget(widget.id)}>\r\n                <X size={18} />\r\n                <span className=\"sr-only\">Close widget</span>\r\n            </Button>\r\n        </div>\r\n        </CardHeader>\r\n      </div>\r\n\r\n\r\n      <CardContent className=\"flex-1 min-h-0 relative p-0\">\r\n        <div className={cn(\"flex h-full\", isResizing ? 'cursor-col-resize select-none' : '')}>\r\n            <div className=\"h-full flex-1 overflow-auto no-scrollbar\" style={{ width: isChatOpen ? `calc(100% - ${chatPanelWidth}px)` : '100%' }}>\r\n              <div className=\"p-4 h-full\">\r\n                {renderWidgetContent()}\r\n              </div>\r\n            </div>\r\n            \r\n            {isChatOpen && (\r\n              <>\r\n                <div \r\n                  className=\"w-px h-full cursor-col-resize bg-border/50 hover:bg-border transition-colors\"\r\n                  onMouseDown={() => setIsResizing(true)}\r\n                />\r\n                <div style={{ width: `${chatPanelWidth}px` }}>\r\n                    <ChatPanel \r\n                        messages={chatMessages}\r\n                        loading={loading}\r\n                        onSubmit={handleChatSubmit}\r\n                        agentType={widget.agent.agentType}\r\n                        onClose={toggleChat}\r\n                    />\r\n                </div>\r\n              </>\r\n            )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4523, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/widgets/WidgetContainer.tsx"],"sourcesContent":["\r\n'use client';\r\n\r\nimport { useRef, createRef, useState, useEffect, useCallback } from 'react';\r\nimport Draggable, { type DraggableBounds, type DraggableData, type DraggableEvent } from 'react-draggable';\r\nimport type { Widget, Problem, Incident, Change } from '@/lib/types';\r\nimport { BaseWidget } from './BaseWidget';\r\n\r\ninterface WidgetContainerProps {\r\n  widgets: Widget[];\r\n  removeWidget: (id: string) => void;\r\n  updateEntity: (widgetId: string, entityNumber: string, updatedData: Partial<Problem | Incident | Change>) => void;\r\n  bringToFront: (id: string) => void;\r\n  toggleMinimizeWidget: (id: string) => void;\r\n  toggleFavoriteWidget: (id: string) => void;\r\n  updateWidgetPosition: (id: string, x: number, y: number) => void;\r\n  updateWidgetDimensions: (id: string, width: number, height: number) => void;\r\n  sidebarState: 'expanded' | 'collapsed';\r\n  sidebarRef: React.RefObject<HTMLDivElement>;\r\n  chatInputRef: React.RefObject<HTMLDivElement>;\r\n  setIsDragging: (isDragging: boolean) => void;\r\n}\r\n\r\nexport const WIDGET_INITIAL_WIDTH = 450;\r\nexport const WIDGET_EXPANDED_WIDTH = 750;\r\nexport const WIDGET_INITIAL_HEIGHT = 400;\r\n\r\n\r\nexport function WidgetContainer({ \r\n    widgets, \r\n    removeWidget, \r\n    updateEntity, \r\n    bringToFront, \r\n    toggleMinimizeWidget, \r\n    toggleFavoriteWidget, \r\n    updateWidgetPosition, \r\n    updateWidgetDimensions,\r\n    sidebarState, \r\n    sidebarRef, \r\n    chatInputRef,\r\n    setIsDragging\r\n}: WidgetContainerProps) {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const [bounds, setBounds] = useState<{[key: string]: DraggableBounds}>({});\r\n  const resizeObserverRef = useRef<ResizeObserver | null>(null);\r\n  \r\n  const nodeRefs = useRef(new Map<string, React.RefObject<HTMLDivElement>>());\r\n\r\n  widgets.forEach(widget => {\r\n    if (!nodeRefs.current.has(widget.id)) {\r\n      nodeRefs.current.set(widget.id, createRef<HTMLDivElement>());\r\n    }\r\n  });\r\n\r\n  const updateAllBounds = useCallback(() => {\r\n    const container = containerRef.current;\r\n    if (!container) return;\r\n    \r\n    const containerWidth = container.offsetWidth;\r\n    const containerHeight = container.offsetHeight;\r\n\r\n    const newBounds: {[key: string]: DraggableBounds} = {};\r\n    widgets.forEach(widget => {\r\n      const node = nodeRefs.current.get(widget.id)?.current;\r\n      if (node) {\r\n          const currentWidth = node.offsetWidth;\r\n          const currentHeight = node.offsetHeight;\r\n          newBounds[widget.id] = {\r\n            left: 0,\r\n            top: 0,\r\n            right: containerWidth - currentWidth,\r\n            bottom: containerHeight - currentHeight,\r\n          };\r\n      }\r\n    });\r\n    setBounds(newBounds);\r\n  }, [widgets]);\r\n\r\n  useEffect(() => {\r\n    const container = containerRef.current;\r\n    if (!container) return;\r\n\r\n    const resizeObserver = new ResizeObserver(updateAllBounds);\r\n    resizeObserver.observe(container);\r\n    if(sidebarRef.current) resizeObserver.observe(sidebarRef.current);\r\n    if(chatInputRef.current) resizeObserver.observe(chatInputRef.current);\r\n    \r\n    // Set up individual widget observers for resizing\r\n    widgets.forEach(widget => {\r\n        const node = nodeRefs.current.get(widget.id)?.current;\r\n        if (node) {\r\n            resizeObserver.observe(node);\r\n        }\r\n    });\r\n    \r\n    // Store observer to disconnect it later\r\n    resizeObserverRef.current = resizeObserver;\r\n\r\n    return () => {\r\n      resizeObserver.disconnect();\r\n    };\r\n  }, [sidebarState, sidebarRef, chatInputRef, widgets, updateAllBounds]);\r\n  \r\n  const handleDragStop = (id: string, data: DraggableData) => {\r\n    updateWidgetPosition(id, data.x, data.y);\r\n    setIsDragging(false);\r\n  };\r\n  \r\n  const handleResizeStop = (id: string, node: HTMLDivElement) => {\r\n    updateWidgetDimensions(id, node.offsetWidth, node.offsetHeight);\r\n  };\r\n  \r\n  if (widgets.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"relative w-full h-full\" ref={containerRef}>\r\n      {widgets.map((widget) => {\r\n        const nodeRef = nodeRefs.current.get(widget.id)!;\r\n        return (\r\n          <Draggable\r\n              key={widget.id}\r\n              nodeRef={nodeRef}\r\n              handle=\".drag-handle\"\r\n              onStart={() => {\r\n                bringToFront(widget.id);\r\n                setIsDragging(true);\r\n              }}\r\n              onStop={(e: DraggableEvent, data: DraggableData) => handleDragStop(widget.id, data)}\r\n              position={{ x: widget.x ?? 0, y: widget.y ?? 0 }}\r\n              bounds={bounds[widget.id]}\r\n          >\r\n              <div \r\n                className=\"absolute\" \r\n                ref={nodeRef}\r\n                style={{\r\n                    zIndex: widget.zIndex,\r\n                    width: widget.width || WIDGET_INITIAL_WIDTH,\r\n                    height: widget.height || WIDGET_INITIAL_HEIGHT,\r\n                }}\r\n                onMouseUp={() => handleResizeStop(widget.id, nodeRef.current!)}\r\n                onMouseDown={() => bringToFront(widget.id)}\r\n              >\r\n                  <BaseWidget \r\n                      widget={widget} \r\n                      removeWidget={removeWidget} \r\n                      updateEntity={updateEntity}\r\n                      bringToFront={bringToFront}\r\n                      toggleMinimizeWidget={toggleMinimizeWidget}\r\n                      toggleFavoriteWidget={toggleFavoriteWidget}\r\n                  />\r\n              </div>\r\n          </Draggable>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4673, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/popover.tsx"],"sourcesContent":["\r\n\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Popover = PopoverPrimitive.Root\r\n\r\nconst PopoverTrigger = PopoverPrimitive.Trigger\r\n\r\nconst PopoverAnchor = PopoverPrimitive.Anchor\r\n\r\nconst PopoverContent = React.forwardRef<\r\n  React.ElementRef<typeof PopoverPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\r\n>(({ className, align = \"center\", sideOffset = 4, side, ...props }, ref) => (\r\n  <PopoverPrimitive.Portal>\r\n    <PopoverPrimitive.Content\r\n      ref={ref}\r\n      align={align}\r\n      sideOffset={sideOffset}\r\n      side={side}\r\n      className={cn(\r\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </PopoverPrimitive.Portal>\r\n))\r\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\r\n\r\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\r\n"],"names":[],"mappings":";;;;;;;AAGA;AACA;AAEA;AALA;;;;;AAOA,MAAM,UAAU,mKAAA,CAAA,OAAqB;AAErC,MAAM,iBAAiB,mKAAA,CAAA,UAAwB;AAE/C,MAAM,gBAAgB,mKAAA,CAAA,SAAuB;AAE7C,MAAM,+BAAiB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE,oBAClE,8OAAC,mKAAA,CAAA,SAAuB;kBACtB,cAAA,8OAAC,mKAAA,CAAA,UAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,MAAM;YACN,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,8aACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,mKAAA,CAAA,UAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 4717, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ChatInput.tsx"],"sourcesContent":["\r\n'use client';\r\n\r\nimport { useState, useRef, useEffect, type FormEvent } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Send, Mic, Bookmark, Loader2, Sparkles, AlertCircle, FileWarning, GitBranch, BookText, Server, FolderPlus, Edit, Trash2, Save } from 'lucide-react';\r\nimport { Popover, PopoverContent, PopoverTrigger } from './ui/popover';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { cn } from '@/lib/utils';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport {\r\n  Sheet,\r\n  SheetContent,\r\n  SheetDescription,\r\n  SheetHeader,\r\n  SheetTitle,\r\n  SheetTrigger,\r\n} from \"@/components/ui/sheet\"\r\nimport type { Widget } from '@/lib/types';\r\n\r\n\r\ninterface ChatInputProps {\r\n  onSubmit: (query: string) => void;\r\n  onSave: (query: string, name: string) => void;\r\n  loading: boolean;\r\n  widgets: Widget[];\r\n  onWorkspaceAction: (action: 'create' | 'edit' | 'forget' | 'load' | 'save') => void;\r\n}\r\n\r\nconst commands = [\r\n  { name: 'Incidents', query: '@incident', description: 'View and manage incidents', icon: AlertCircle },\r\n  { name: 'Changes', query: '@change', description: 'View and manage change requests', icon: GitBranch },\r\n  { name: 'Problems', query: '@problem', description: 'View and manage problems', icon: FileWarning },\r\n  { name: 'Overview Summary', query: '@summary', description: 'Get a summary of all open widgets', icon: BookText },\r\n  { name: 'Fetch ServiceNow', query: '@servicenow', description: 'Fetch data from ServiceNow', icon: Server },\r\n];\r\n\r\nconst workspaceCommands = [\r\n  { name: 'Create workspace', action: 'create', description: 'Save the current layout as a new workspace', icon: FolderPlus },\r\n  { name: 'Save workspace', action: 'save', description: 'Save changes to the current workspace', icon: Save },\r\n  { name: 'Edit workspace', action: 'edit', description: 'Update or rename the current workspace', icon: Edit },\r\n  { name: 'Forget workspace', action: 'forget', description: 'Clear the saved workspace from memory', icon: Trash2 },\r\n];\r\n\r\nexport function ChatInput({ onSubmit, onSave, loading, widgets, onWorkspaceAction }: ChatInputProps) {\r\n  const [query, setQuery] = useState('');\r\n  const [tokenCount, setTokenCount] = useState(0);\r\n  const [isListening, setIsListening] = useState(false);\r\n  const recognitionRef = useRef<any>(null);\r\n  const { toast } = useToast();\r\n  const [showCommandMenu, setShowCommandMenu] = useState(false);\r\n  const [showWorkspaceMenu, setShowWorkspaceMenu] = useState(false);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const [thinkingDots, setThinkingDots] = useState('.');\r\n\r\n  useEffect(() => {\r\n    let interval: NodeJS.Timeout;\r\n    if (loading) {\r\n      interval = setInterval(() => {\r\n        setThinkingDots(dots => {\r\n          if (dots.length >= 3) return '.';\r\n          return dots + '.';\r\n        });\r\n      }, 500);\r\n    } else {\r\n      setThinkingDots('.');\r\n    }\r\n    return () => clearInterval(interval);\r\n  }, [loading]);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined' || !('SpeechRecognition' in window || 'webkitSpeechRecognition' in window)) {\r\n      console.warn('Speech recognition not supported in this browser.');\r\n      return;\r\n    }\r\n\r\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n    const recognition = new SpeechRecognition();\r\n    recognition.continuous = false;\r\n    recognition.lang = 'en-US';\r\n    recognition.interimResults = false;\r\n    recognition.maxAlternatives = 1;\r\n\r\n    recognition.onresult = (event) => {\r\n      const transcript = event.results[0][0].transcript;\r\n      setQuery(transcript);\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognition.onerror = (event) => {\r\n      console.error('Speech recognition error:', event.error);\r\n      toast({ variant: 'destructive', title: 'Voice Error', description: 'Could not start voice recognition.' });\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognition.onend = () => {\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognitionRef.current = recognition;\r\n  }, [toast]);\r\n\r\n\r\n  const handleSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    if (!query.trim() || loading) return;\r\n    onSubmit(query);\r\n    setQuery('');\r\n    setTokenCount(0);\r\n    setShowCommandMenu(false);\r\n  };\r\n  \r\n  const handleListen = () => {\r\n    if (!recognitionRef.current) {\r\n        toast({ variant: 'destructive', title: 'Unsupported', description: 'Voice recognition is not supported in your browser.' });\r\n        return;\r\n    }\r\n    if (isListening) {\r\n      recognitionRef.current.stop();\r\n    } else {\r\n      recognitionRef.current.start();\r\n    }\r\n    setIsListening(prev => !prev);\r\n  };\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const newQuery = e.target.value;\r\n    setQuery(newQuery);\r\n    // Estimate tokens: 1 token ~ 4 chars\r\n    setTokenCount(Math.ceil(newQuery.length / 4));\r\n  };\r\n\r\n  const handleCommandSelect = (commandQuery: string) => {\r\n    setQuery(commandQuery);\r\n    setShowCommandMenu(false);\r\n    onSubmit(commandQuery);\r\n    setQuery('');\r\n    setTokenCount(0);\r\n  };\r\n  \r\n  const handleWorkspaceAction = (action: 'create' | 'edit' | 'forget' | 'load' | 'save') => {\r\n    onWorkspaceAction(action);\r\n    setShowWorkspaceMenu(false);\r\n    inputRef.current?.focus();\r\n  };\r\n\r\n  const isSummaryDisabled = widgets.length === 0;\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-2\">\r\n      <form onSubmit={handleSubmit} className=\"relative w-full\">\r\n          <Popover open={loading}>\r\n          <PopoverTrigger asChild>\r\n              <div>\r\n              <Input\r\n                  ref={inputRef}\r\n                  value={query}\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"Please type your message here\"\r\n                  className=\"w-full rounded-full h-14 pl-6 pr-16 bg-card/80 border-primary focus-visible:ring-primary/50 text-base shadow-lg\"\r\n                  disabled={loading}\r\n              />\r\n              <Button type=\"submit\" size=\"icon\" disabled={loading || !query.trim()} className=\"absolute right-4 top-1/2 -translate-y-1/2 rounded-full h-10 w-10 bg-primary/20 hover:bg-primary/30 text-primary\">\r\n                  {loading ? <Loader2 className=\"animate-spin\" /> : <Sparkles />}\r\n                  <span className=\"sr-only\">Send</span>\r\n              </Button>\r\n              </div>\r\n          </PopoverTrigger>\r\n          <PopoverContent \r\n              side=\"top\" \r\n              align=\"center\" \r\n              className=\"w-auto py-1 px-3 mb-2 text-sm text-muted-foreground\"\r\n              sideOffset={10}\r\n          >\r\n              Thinking{thinkingDots}\r\n          </PopoverContent>\r\n          </Popover>\r\n      </form>\r\n      <div className=\"flex justify-between items-center px-4\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <Popover open={showCommandMenu} onOpenChange={setShowCommandMenu}>\r\n              <PopoverTrigger asChild>\r\n                  <Button variant=\"link\" className=\"text-xs text-muted-foreground self-start p-0 h-auto\">Use Commands</Button>\r\n              </PopoverTrigger>\r\n              <PopoverContent \r\n                  className=\"w-[400px] p-2 mb-2\" \r\n                  align=\"start\"\r\n                  onCloseAutoFocus={(e) => {\r\n                    e.preventDefault();\r\n                    inputRef.current?.focus();\r\n                  }}\r\n              >\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-xs text-muted-foreground px-2\">Commands</p>\r\n                  {commands.map((command) => {\r\n                    const Icon = command.icon;\r\n                    const isDisabled = command.query === '@summary' && isSummaryDisabled;\r\n                    return (\r\n                      <button\r\n                        key={command.name}\r\n                        type=\"button\"\r\n                        className={cn(\r\n                          \"w-full text-left p-2 rounded-md hover:bg-accent flex items-start gap-3\",\r\n                          isDisabled && \"opacity-50 cursor-not-allowed\"\r\n                        )}\r\n                        onClick={() => handleCommandSelect(command.query)}\r\n                        disabled={isDisabled}\r\n                      >\r\n                        <Icon className=\"w-8 h-8 p-1.5 bg-muted rounded-md mt-0.5\" />\r\n                        <div>\r\n                          <p className=\"font-medium text-sm\">{command.name}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">{command.description}</p>\r\n                        </div>\r\n                      </button>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </PopoverContent>\r\n          </Popover>\r\n          <Popover open={showWorkspaceMenu} onOpenChange={setShowWorkspaceMenu}>\r\n              <PopoverTrigger asChild>\r\n                  <Button variant=\"link\" className=\"text-xs text-muted-foreground self-start p-0 h-auto\">Workspace</Button>\r\n              </PopoverTrigger>\r\n              <PopoverContent \r\n                  className=\"w-[400px] p-2 mb-2\" \r\n                  align=\"start\"\r\n                  onCloseAutoFocus={(e) => {\r\n                    e.preventDefault();\r\n                    inputRef.current?.focus();\r\n                  }}\r\n              >\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-xs text-muted-foreground px-2\">Workspace Actions</p>\r\n                  {workspaceCommands.map((command) => {\r\n                    const Icon = command.icon;\r\n                    return (\r\n                      <button\r\n                        key={command.name}\r\n                        type=\"button\"\r\n                        className=\"w-full text-left p-2 rounded-md hover:bg-accent flex items-start gap-3\"\r\n                        onClick={() => handleWorkspaceAction(command.action as 'create' | 'edit' | 'forget' | 'load' | 'save')}\r\n                      >\r\n                        <Icon className=\"w-8 h-8 p-1.5 bg-muted rounded-md mt-0.5\" />\r\n                        <div>\r\n                          <p className=\"font-medium text-sm\">{command.name}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">{command.description}</p>\r\n                        </div>\r\n                      </button>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </PopoverContent>\r\n          </Popover>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5208, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/services/servicenow.ts"],"sourcesContent":["\r\n'use server';\r\n\r\nimport axios from 'axios';\r\nimport type { Incident } from '@/lib/types';\r\n\r\nexport async function getIncidents(): Promise<Incident[]> {\r\n  const appClient = 'ai_browser';\r\n  const appSecret = 'Appdev2025!';\r\n  const requestUrl = 'https://dev309119.service-now.com/api/now/table/incident?sysparm_limit=10';\r\n\r\n  // Create Basic Auth header\r\n  const auth = Buffer.from(`${appClient}:${appSecret}`).toString('base64');\r\n\r\n  try {\r\n    const response = await axios.get(requestUrl, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Basic ${auth}`,\r\n      },\r\n    });\r\n    return response.data.result;\r\n  } catch (error: any) {\r\n    console.error('ServiceNow API Error:', {\r\n      message: error.message,\r\n      status: error.response?.status,\r\n      statusText: error.response?.statusText,\r\n      data: error.response?.data\r\n    });\r\n    \r\n    // More specific error handling\r\n    if (error.response?.status === 401) {\r\n      throw new Error('Authentication failed. Check your ServiceNow credentials.');\r\n    } else if (error.response?.status === 403) {\r\n      throw new Error('Access forbidden. Check user permissions.');\r\n    } else {\r\n      throw new Error(`Failed to fetch data from ServiceNow: ${error.message}`);\r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;IAMsB,eAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 5221, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/services/sampleDataService.ts"],"sourcesContent":["\r\n'use server';\r\n\r\nimport axios from 'axios';\r\nimport type { Incident, Problem, Change } from '@/lib/types';\r\n\r\nconst getWebhookUrl = () => {\r\n    const url = process.env.SAMPLE_RECORD_WEBHOOK_URL;\r\n    if (!url) {\r\n        throw new Error('SAMPLE_RECORD_WEBHOOK_URL is not configured in .env file.');\r\n    }\r\n    return url;\r\n};\r\n\r\ntype DataType = 'incident' | 'problem' | 'change_request';\r\n\r\nexport async function getSampleData(type: DataType, sysId: string = 'all'): Promise<(Incident | Problem | Change)[]> {\r\n    const webhookUrl = getWebhookUrl();\r\n\r\n    try {\r\n        const response = await axios.get(webhookUrl, {\r\n            params: {\r\n                type: type,\r\n                sys_id: sysId,\r\n            },\r\n        });\r\n\r\n        if (response.status === 200 && response.data) {\r\n            return Array.isArray(response.data) ? response.data : [response.data];\r\n        }\r\n\r\n        console.warn(`Webhook for sample data returned status ${response.status} or no data.`);\r\n        return [];\r\n\r\n    } catch (error) {\r\n        if (axios.isAxiosError(error)) {\r\n            console.error(`Failed to get sample data from webhook for type ${type}:`, error.message);\r\n        } else {\r\n            console.error('An unexpected error occurred while fetching sample data:', error);\r\n        }\r\n        throw new Error(`Failed to fetch sample data for type: ${type}`);\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;IAgBsB,gBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 5234, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/services/workspaceService.ts"],"sourcesContent":["\r\n\r\n'use server';\r\n\r\nimport axios from 'axios';\r\nimport type { Workspace } from '@/lib/types';\r\n\r\nconst getWorkspaceWebhookUrl = () => {\r\n    const url = process.env.WORKSPACE_WEBHOOK_URL;\r\n    if (!url) {\r\n        throw new Error('WORKSPACE_WEBHOOK_URL is not configured in .env file.');\r\n    }\r\n    return url;\r\n};\r\n\r\nconst getUserWorkspacesWebhookUrl = () => {\r\n    const url = process.env.USER_WORKSPACE_WEBHOOK_URL;\r\n    if (!url) {\r\n        console.warn('USER_WORKSPACE_WEBHOOK_URL is not configured in .env file - workspace sync disabled');\r\n        return null;\r\n    }\r\n    return url;\r\n};\r\n\r\nexport async function getWorkspaces(userId: string): Promise<Workspace[]> {\r\n    try {\r\n        const webhookUrl = getUserWorkspacesWebhookUrl();\r\n        if (!webhookUrl) {\r\n            return []; // Gracefully return empty array if webhook URL is not configured\r\n        }\r\n        const response = await axios.get(webhookUrl, { params: { userId, workspaceId: 'all' } });\r\n        if (response.status === 200 && response.data) {\r\n            return Array.isArray(response.data) ? response.data : [response.data];\r\n        }\r\n        return [];\r\n    } catch (error: any) {\r\n        // Only log detailed errors for non-404 status codes\r\n        if (error?.response?.status !== 404) {\r\n            console.error('Failed to get workspaces:', error);\r\n        } else {\r\n            console.warn('Workspace endpoint not found (404) - using local workspace management');\r\n        }\r\n        return [];\r\n    }\r\n}\r\n\r\nexport interface WorkspaceChanges {\r\n    added: Workspace[];\r\n    deleted: string[];\r\n    modified: Workspace[];\r\n    hasChanges: boolean;\r\n}\r\n\r\nexport async function detectWorkspaceChanges(userId: string, currentWorkspaces: Workspace[]): Promise<WorkspaceChanges> {\r\n    try {\r\n        const freshWorkspaces = await getWorkspaces(userId);\r\n        \r\n        const currentMap = new Map(currentWorkspaces.map(ws => [ws.workspaceId, ws]));\r\n        const freshMap = new Map(freshWorkspaces.map(ws => [ws.workspaceId, ws]));\r\n        \r\n        const added: Workspace[] = [];\r\n        const modified: Workspace[] = [];\r\n        const deleted: string[] = [];\r\n        \r\n        // Find added and modified workspaces\r\n        for (const [id, freshWs] of freshMap) {\r\n            const currentWs = currentMap.get(id);\r\n            if (!currentWs) {\r\n                added.push(freshWs);\r\n            } else if (JSON.stringify(currentWs) !== JSON.stringify(freshWs)) {\r\n                modified.push(freshWs);\r\n            }\r\n        }\r\n        \r\n        // Find deleted workspaces\r\n        for (const [id] of currentMap) {\r\n            if (!freshMap.has(id)) {\r\n                deleted.push(id);\r\n            }\r\n        }\r\n        \r\n        return {\r\n            added,\r\n            deleted,\r\n            modified,\r\n            hasChanges: added.length > 0 || deleted.length > 0 || modified.length > 0\r\n        };\r\n    } catch (error) {\r\n        console.error('Failed to detect workspace changes:', error);\r\n        return {\r\n            added: [],\r\n            deleted: [],\r\n            modified: [],\r\n            hasChanges: false\r\n        };\r\n    }\r\n}\r\n\r\n\r\nexport async function saveWorkspace(workspaceData: Omit<Workspace, 'workspaceId' | 'active'> & { workspaceId?: string }): Promise<Workspace | null> {\r\n    const webhookUrl = getWorkspaceWebhookUrl();\r\n    const workspaceId = workspaceData.workspaceId || `ws_${Date.now()}`;\r\n    const payload = {\r\n        ...workspaceData,\r\n        workspaceId: workspaceId,\r\n        active: true,\r\n    };\r\n\r\n    try {\r\n        const response = await axios.post(webhookUrl, payload, { params: { workspaceId } });\r\n        if (response.status === 200 || response.status === 201) {\r\n            // The webhook can return the saved object directly or inside a 'result' property\r\n            return response.data?.result || response.data;\r\n        }\r\n        return null;\r\n    } catch (error: any) {\r\n        if (axios.isAxiosError(error)) {\r\n            // Only log detailed errors for non-404 status codes\r\n            if (error?.response?.status !== 404) {\r\n                console.error('Failed to save workspace:', {\r\n                    message: error.message,\r\n                    status: error.response?.status,\r\n                    data: error.response?.data,\r\n                    url: webhookUrl,\r\n                    sentData: payload\r\n                });\r\n            } else {\r\n                console.warn('Workspace save endpoint not found (404) - workspace not saved to remote');\r\n            }\r\n        } else {\r\n            console.error('An unexpected error occurred during workspace save:', error);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function deleteWorkspace(workspaceId: string): Promise<boolean> {\r\n    const webhookUrl = getWorkspaceWebhookUrl();\r\n    try {\r\n        const response = await axios.delete(webhookUrl, { params: { workspaceId } });\r\n        return response.status === 200 || response.status === 204;\r\n    } catch (error: any) {\r\n        // Only log detailed errors for non-404 status codes\r\n        if (error?.response?.status !== 404) {\r\n            console.error('Failed to delete workspace:', error);\r\n        } else {\r\n            console.warn('Workspace delete endpoint not found (404) - workspace not deleted from remote');\r\n        }\r\n        return false;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;IAmGsB,gBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 5247, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/services/workspaceService.ts"],"sourcesContent":["\r\n\r\n'use server';\r\n\r\nimport axios from 'axios';\r\nimport type { Workspace } from '@/lib/types';\r\n\r\nconst getWorkspaceWebhookUrl = () => {\r\n    const url = process.env.WORKSPACE_WEBHOOK_URL;\r\n    if (!url) {\r\n        throw new Error('WORKSPACE_WEBHOOK_URL is not configured in .env file.');\r\n    }\r\n    return url;\r\n};\r\n\r\nconst getUserWorkspacesWebhookUrl = () => {\r\n    const url = process.env.USER_WORKSPACE_WEBHOOK_URL;\r\n    if (!url) {\r\n        console.warn('USER_WORKSPACE_WEBHOOK_URL is not configured in .env file - workspace sync disabled');\r\n        return null;\r\n    }\r\n    return url;\r\n};\r\n\r\nexport async function getWorkspaces(userId: string): Promise<Workspace[]> {\r\n    try {\r\n        const webhookUrl = getUserWorkspacesWebhookUrl();\r\n        if (!webhookUrl) {\r\n            return []; // Gracefully return empty array if webhook URL is not configured\r\n        }\r\n        const response = await axios.get(webhookUrl, { params: { userId, workspaceId: 'all' } });\r\n        if (response.status === 200 && response.data) {\r\n            return Array.isArray(response.data) ? response.data : [response.data];\r\n        }\r\n        return [];\r\n    } catch (error: any) {\r\n        // Only log detailed errors for non-404 status codes\r\n        if (error?.response?.status !== 404) {\r\n            console.error('Failed to get workspaces:', error);\r\n        } else {\r\n            console.warn('Workspace endpoint not found (404) - using local workspace management');\r\n        }\r\n        return [];\r\n    }\r\n}\r\n\r\nexport interface WorkspaceChanges {\r\n    added: Workspace[];\r\n    deleted: string[];\r\n    modified: Workspace[];\r\n    hasChanges: boolean;\r\n}\r\n\r\nexport async function detectWorkspaceChanges(userId: string, currentWorkspaces: Workspace[]): Promise<WorkspaceChanges> {\r\n    try {\r\n        const freshWorkspaces = await getWorkspaces(userId);\r\n        \r\n        const currentMap = new Map(currentWorkspaces.map(ws => [ws.workspaceId, ws]));\r\n        const freshMap = new Map(freshWorkspaces.map(ws => [ws.workspaceId, ws]));\r\n        \r\n        const added: Workspace[] = [];\r\n        const modified: Workspace[] = [];\r\n        const deleted: string[] = [];\r\n        \r\n        // Find added and modified workspaces\r\n        for (const [id, freshWs] of freshMap) {\r\n            const currentWs = currentMap.get(id);\r\n            if (!currentWs) {\r\n                added.push(freshWs);\r\n            } else if (JSON.stringify(currentWs) !== JSON.stringify(freshWs)) {\r\n                modified.push(freshWs);\r\n            }\r\n        }\r\n        \r\n        // Find deleted workspaces\r\n        for (const [id] of currentMap) {\r\n            if (!freshMap.has(id)) {\r\n                deleted.push(id);\r\n            }\r\n        }\r\n        \r\n        return {\r\n            added,\r\n            deleted,\r\n            modified,\r\n            hasChanges: added.length > 0 || deleted.length > 0 || modified.length > 0\r\n        };\r\n    } catch (error) {\r\n        console.error('Failed to detect workspace changes:', error);\r\n        return {\r\n            added: [],\r\n            deleted: [],\r\n            modified: [],\r\n            hasChanges: false\r\n        };\r\n    }\r\n}\r\n\r\n\r\nexport async function saveWorkspace(workspaceData: Omit<Workspace, 'workspaceId' | 'active'> & { workspaceId?: string }): Promise<Workspace | null> {\r\n    const webhookUrl = getWorkspaceWebhookUrl();\r\n    const workspaceId = workspaceData.workspaceId || `ws_${Date.now()}`;\r\n    const payload = {\r\n        ...workspaceData,\r\n        workspaceId: workspaceId,\r\n        active: true,\r\n    };\r\n\r\n    try {\r\n        const response = await axios.post(webhookUrl, payload, { params: { workspaceId } });\r\n        if (response.status === 200 || response.status === 201) {\r\n            // The webhook can return the saved object directly or inside a 'result' property\r\n            return response.data?.result || response.data;\r\n        }\r\n        return null;\r\n    } catch (error: any) {\r\n        if (axios.isAxiosError(error)) {\r\n            // Only log detailed errors for non-404 status codes\r\n            if (error?.response?.status !== 404) {\r\n                console.error('Failed to save workspace:', {\r\n                    message: error.message,\r\n                    status: error.response?.status,\r\n                    data: error.response?.data,\r\n                    url: webhookUrl,\r\n                    sentData: payload\r\n                });\r\n            } else {\r\n                console.warn('Workspace save endpoint not found (404) - workspace not saved to remote');\r\n            }\r\n        } else {\r\n            console.error('An unexpected error occurred during workspace save:', error);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function deleteWorkspace(workspaceId: string): Promise<boolean> {\r\n    const webhookUrl = getWorkspaceWebhookUrl();\r\n    try {\r\n        const response = await axios.delete(webhookUrl, { params: { workspaceId } });\r\n        return response.status === 200 || response.status === 204;\r\n    } catch (error: any) {\r\n        // Only log detailed errors for non-404 status codes\r\n        if (error?.response?.status !== 404) {\r\n            console.error('Failed to delete workspace:', error);\r\n        } else {\r\n            console.warn('Workspace delete endpoint not found (404) - workspace not deleted from remote');\r\n        }\r\n        return false;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;IAwIsB,kBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 5260, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/services/workspaceService.ts"],"sourcesContent":["\r\n\r\n'use server';\r\n\r\nimport axios from 'axios';\r\nimport type { Workspace } from '@/lib/types';\r\n\r\nconst getWorkspaceWebhookUrl = () => {\r\n    const url = process.env.WORKSPACE_WEBHOOK_URL;\r\n    if (!url) {\r\n        throw new Error('WORKSPACE_WEBHOOK_URL is not configured in .env file.');\r\n    }\r\n    return url;\r\n};\r\n\r\nconst getUserWorkspacesWebhookUrl = () => {\r\n    const url = process.env.USER_WORKSPACE_WEBHOOK_URL;\r\n    if (!url) {\r\n        console.warn('USER_WORKSPACE_WEBHOOK_URL is not configured in .env file - workspace sync disabled');\r\n        return null;\r\n    }\r\n    return url;\r\n};\r\n\r\nexport async function getWorkspaces(userId: string): Promise<Workspace[]> {\r\n    try {\r\n        const webhookUrl = getUserWorkspacesWebhookUrl();\r\n        if (!webhookUrl) {\r\n            return []; // Gracefully return empty array if webhook URL is not configured\r\n        }\r\n        const response = await axios.get(webhookUrl, { params: { userId, workspaceId: 'all' } });\r\n        if (response.status === 200 && response.data) {\r\n            return Array.isArray(response.data) ? response.data : [response.data];\r\n        }\r\n        return [];\r\n    } catch (error: any) {\r\n        // Only log detailed errors for non-404 status codes\r\n        if (error?.response?.status !== 404) {\r\n            console.error('Failed to get workspaces:', error);\r\n        } else {\r\n            console.warn('Workspace endpoint not found (404) - using local workspace management');\r\n        }\r\n        return [];\r\n    }\r\n}\r\n\r\nexport interface WorkspaceChanges {\r\n    added: Workspace[];\r\n    deleted: string[];\r\n    modified: Workspace[];\r\n    hasChanges: boolean;\r\n}\r\n\r\nexport async function detectWorkspaceChanges(userId: string, currentWorkspaces: Workspace[]): Promise<WorkspaceChanges> {\r\n    try {\r\n        const freshWorkspaces = await getWorkspaces(userId);\r\n        \r\n        const currentMap = new Map(currentWorkspaces.map(ws => [ws.workspaceId, ws]));\r\n        const freshMap = new Map(freshWorkspaces.map(ws => [ws.workspaceId, ws]));\r\n        \r\n        const added: Workspace[] = [];\r\n        const modified: Workspace[] = [];\r\n        const deleted: string[] = [];\r\n        \r\n        // Find added and modified workspaces\r\n        for (const [id, freshWs] of freshMap) {\r\n            const currentWs = currentMap.get(id);\r\n            if (!currentWs) {\r\n                added.push(freshWs);\r\n            } else if (JSON.stringify(currentWs) !== JSON.stringify(freshWs)) {\r\n                modified.push(freshWs);\r\n            }\r\n        }\r\n        \r\n        // Find deleted workspaces\r\n        for (const [id] of currentMap) {\r\n            if (!freshMap.has(id)) {\r\n                deleted.push(id);\r\n            }\r\n        }\r\n        \r\n        return {\r\n            added,\r\n            deleted,\r\n            modified,\r\n            hasChanges: added.length > 0 || deleted.length > 0 || modified.length > 0\r\n        };\r\n    } catch (error) {\r\n        console.error('Failed to detect workspace changes:', error);\r\n        return {\r\n            added: [],\r\n            deleted: [],\r\n            modified: [],\r\n            hasChanges: false\r\n        };\r\n    }\r\n}\r\n\r\n\r\nexport async function saveWorkspace(workspaceData: Omit<Workspace, 'workspaceId' | 'active'> & { workspaceId?: string }): Promise<Workspace | null> {\r\n    const webhookUrl = getWorkspaceWebhookUrl();\r\n    const workspaceId = workspaceData.workspaceId || `ws_${Date.now()}`;\r\n    const payload = {\r\n        ...workspaceData,\r\n        workspaceId: workspaceId,\r\n        active: true,\r\n    };\r\n\r\n    try {\r\n        const response = await axios.post(webhookUrl, payload, { params: { workspaceId } });\r\n        if (response.status === 200 || response.status === 201) {\r\n            // The webhook can return the saved object directly or inside a 'result' property\r\n            return response.data?.result || response.data;\r\n        }\r\n        return null;\r\n    } catch (error: any) {\r\n        if (axios.isAxiosError(error)) {\r\n            // Only log detailed errors for non-404 status codes\r\n            if (error?.response?.status !== 404) {\r\n                console.error('Failed to save workspace:', {\r\n                    message: error.message,\r\n                    status: error.response?.status,\r\n                    data: error.response?.data,\r\n                    url: webhookUrl,\r\n                    sentData: payload\r\n                });\r\n            } else {\r\n                console.warn('Workspace save endpoint not found (404) - workspace not saved to remote');\r\n            }\r\n        } else {\r\n            console.error('An unexpected error occurred during workspace save:', error);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function deleteWorkspace(workspaceId: string): Promise<boolean> {\r\n    const webhookUrl = getWorkspaceWebhookUrl();\r\n    try {\r\n        const response = await axios.delete(webhookUrl, { params: { workspaceId } });\r\n        return response.status === 200 || response.status === 204;\r\n    } catch (error: any) {\r\n        // Only log detailed errors for non-404 status codes\r\n        if (error?.response?.status !== 404) {\r\n            console.error('Failed to delete workspace:', error);\r\n        } else {\r\n            console.warn('Workspace delete endpoint not found (404) - workspace not deleted from remote');\r\n        }\r\n        return false;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;IAqDsB,yBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 5273, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/hooks/use-workspace-sync.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { detectWorkspaceChanges, type WorkspaceChanges } from '@/services/workspaceService';\r\nimport { updateCachedWorkspaces } from '@/services/userService';\r\nimport type { Workspace, User } from '@/lib/types';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ninterface UseWorkspaceSyncOptions {\r\n    user: User | null;\r\n    workspaces: Workspace[];\r\n    onWorkspacesChanged: (workspaces: Workspace[]) => void;\r\n    onWorkspacesDeleted: (deletedIds: string[]) => void;\r\n    enabled?: boolean;\r\n    intervalMs?: number;\r\n    showNotifications?: boolean;\r\n}\r\n\r\nexport function useWorkspaceSync({\r\n    user,\r\n    workspaces,\r\n    onWorkspacesChanged,\r\n    onWorkspacesDeleted,\r\n    enabled = true,\r\n    intervalMs = 30000, // Default: 30 seconds\r\n    showNotifications = true\r\n}: UseWorkspaceSyncOptions) {\r\n    const { toast } = useToast();\r\n    const [isChecking, setIsChecking] = useState(false);\r\n    const [lastSyncTime, setLastSyncTime] = useState<Date | null>(null);\r\n    const intervalRef = useRef<NodeJS.Timeout>();\r\n    const isActiveRef = useRef(true);\r\n\r\n    // Pause sync when tab is not visible\r\n    useEffect(() => {\r\n        const handleVisibilityChange = () => {\r\n            isActiveRef.current = !document.hidden;\r\n        };\r\n\r\n        document.addEventListener('visibilitychange', handleVisibilityChange);\r\n        return () => document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n    }, []);\r\n\r\n    const checkForChanges = async (silent = false) => {\r\n        if (!user || !enabled || isChecking || !isActiveRef.current) return;\r\n\r\n        setIsChecking(true);\r\n        try {\r\n            const changes = await detectWorkspaceChanges(user.userId, workspaces);\r\n            \r\n            if (changes.hasChanges) {\r\n                console.log('Workspace changes detected:', changes);\r\n                \r\n                // Apply changes to workspaces\r\n                let updatedWorkspaces = [...workspaces];\r\n                \r\n                // Remove deleted workspaces\r\n                if (changes.deleted.length > 0) {\r\n                    updatedWorkspaces = updatedWorkspaces.filter(\r\n                        ws => !changes.deleted.includes(ws.workspaceId)\r\n                    );\r\n                    onWorkspacesDeleted(changes.deleted);\r\n                }\r\n                \r\n                // Add new workspaces\r\n                if (changes.added.length > 0) {\r\n                    updatedWorkspaces = [...updatedWorkspaces, ...changes.added];\r\n                }\r\n                \r\n                // Update modified workspaces\r\n                if (changes.modified.length > 0) {\r\n                    const modifiedMap = new Map(changes.modified.map(ws => [ws.workspaceId, ws]));\r\n                    updatedWorkspaces = updatedWorkspaces.map(ws => \r\n                        modifiedMap.get(ws.workspaceId) || ws\r\n                    );\r\n                }\r\n                \r\n                // Update cache and state\r\n                updateCachedWorkspaces(updatedWorkspaces);\r\n                onWorkspacesChanged(updatedWorkspaces);\r\n                \r\n                // Show notifications if enabled and not silent\r\n                if (showNotifications && !silent) {\r\n                    const messages = [];\r\n                    if (changes.added.length > 0) {\r\n                        messages.push(`${changes.added.length} workspace(s) added`);\r\n                    }\r\n                    if (changes.modified.length > 0) {\r\n                        messages.push(`${changes.modified.length} workspace(s) updated`);\r\n                    }\r\n                    if (changes.deleted.length > 0) {\r\n                        messages.push(`${changes.deleted.length} workspace(s) removed`);\r\n                    }\r\n                    \r\n                    toast({\r\n                        title: 'Workspaces Updated',\r\n                        description: messages.join(', '),\r\n                        duration: 3000,\r\n                    });\r\n                }\r\n            }\r\n            \r\n            setLastSyncTime(new Date());\r\n        } catch (error) {\r\n            console.error('Failed to sync workspaces:', error);\r\n        } finally {\r\n            setIsChecking(false);\r\n        }\r\n    };\r\n\r\n    // Manual sync function\r\n    const syncNow = () => {\r\n        checkForChanges(false);\r\n    };\r\n\r\n    // Set up periodic sync\r\n    useEffect(() => {\r\n        if (!enabled || !user) {\r\n            if (intervalRef.current) {\r\n                clearInterval(intervalRef.current);\r\n                intervalRef.current = undefined;\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Initial check after a short delay\r\n        const initialTimeout = setTimeout(() => {\r\n            checkForChanges(true); // Silent initial check\r\n        }, 2000);\r\n\r\n        // Set up periodic checks\r\n        intervalRef.current = setInterval(() => {\r\n            checkForChanges(true); // Silent periodic checks\r\n        }, intervalMs);\r\n\r\n        return () => {\r\n            clearTimeout(initialTimeout);\r\n            if (intervalRef.current) {\r\n                clearInterval(intervalRef.current);\r\n            }\r\n        };\r\n    }, [user, enabled, intervalMs, workspaces.length]); // Include workspaces.length to restart when workspaces change\r\n\r\n    // Cleanup on unmount\r\n    useEffect(() => {\r\n        return () => {\r\n            if (intervalRef.current) {\r\n                clearInterval(intervalRef.current);\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    return {\r\n        isChecking,\r\n        lastSyncTime,\r\n        syncNow,\r\n        enabled: enabled && !!user\r\n    };\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5413, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/Profile.tsx"],"sourcesContent":["\r\n'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { Avatar, AvatarFallback, AvatarImage } from './ui/avatar';\r\nimport { Button } from './ui/button';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';\r\nimport { Input } from './ui/input';\r\nimport { Label } from './ui/label';\r\nimport { Separator } from './ui/separator';\r\nimport { Switch } from './ui/switch';\r\nimport { Textarea } from './ui/textarea';\r\nimport { cn } from '@/lib/utils';\r\nimport { updateUserProfile, getUserById } from '@/services/userService';\r\nimport type { User } from '@/lib/types';\r\nimport { Skeleton } from './ui/skeleton';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { Pencil } from 'lucide-react';\r\n\r\ninterface ProfileProps {\r\n    user?: User | null;\r\n    userId?: string;\r\n    onProfileUpdate: () => void;\r\n    isPage?: boolean;\r\n}\r\n\r\nexport function Profile({ user, userId, onProfileUpdate, isPage = false }: ProfileProps) {\r\n  const [profile, setProfile] = useState<User | null>(user || null);\r\n  const [loading, setLoading] = useState(!user);\r\n  const [darkMode, setDarkMode] = useState(false);\r\n  const [emailNotifications, setEmailNotifications] = useState(true);\r\n  const { toast } = useToast();\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchUserData = async () => {\r\n      if (user) {\r\n        setProfile(user);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      \r\n      if (userId) {\r\n        setLoading(true);\r\n        try {\r\n          const userData = await getUserById(userId);\r\n          setProfile(userData);\r\n        } catch (error) {\r\n          console.error('Failed to fetch user data:', error);\r\n          toast({ \r\n            variant: 'destructive', \r\n            title: 'Error', \r\n            description: 'Failed to load user profile.' \r\n          });\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchUserData();\r\n  }, [user, userId, toast]);\r\n\r\n  const handleSaveChanges = async () => {\r\n    if (!profile) return;\r\n    const success = await updateUserProfile(profile);\r\n     if (success) {\r\n      toast({ title: 'Success', description: 'Profile updated successfully!', duration: 3000 });\r\n      onProfileUpdate();\r\n    } else {\r\n      toast({ variant: 'destructive', title: 'Error', description: 'Failed to update profile.' });\r\n    }\r\n  };\r\n  \r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    if (!profile) return;\r\n    const { id, value } = e.target;\r\n    setProfile({ ...profile, [id]: value });\r\n  };\r\n  \r\n  const handleAvatarClick = () => {\r\n    fileInputRef.current?.click();\r\n  };\r\n\r\n  const handleAvatarChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files && e.target.files[0]) {\r\n      const file = e.target.files[0];\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        if (profile) {\r\n          setProfile({ ...profile, avatar: reader.result as string });\r\n        }\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n      return (\r\n        <div className=\"space-y-6\">\r\n            <Card>\r\n                <CardHeader>\r\n                    <Skeleton className=\"h-5 w-2/5\" />\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-8\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <Skeleton className=\"h-24 w-24 rounded-full\" />\r\n                        <div className=\"grid gap-1.5\">\r\n                            <Skeleton className=\"h-8 w-32\" />\r\n                            <Skeleton className=\"h-5 w-48\" />\r\n                            <Skeleton className=\"h-9 w-24 mt-1\" />\r\n                        </div>\r\n                    </div>\r\n                     <div className=\"grid gap-4\">\r\n                        <div className=\"grid gap-2\">\r\n                            <Skeleton className=\"h-4 w-16\" />\r\n                            <Skeleton className=\"h-10 w-full\" />\r\n                        </div>\r\n                         <div className=\"grid gap-2\">\r\n                            <Skeleton className=\"h-4 w-16\" />\r\n                            <Skeleton className=\"h-10 w-full\" />\r\n                        </div>\r\n                         <div className=\"grid gap-2\">\r\n                            <Skeleton className=\"h-4 w-16\" />\r\n                            <Skeleton className=\"h-20 w-full\" />\r\n                        </div>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n      );\r\n  }\r\n\r\n  if (!profile) {\r\n    return <div>Failed to load profile. Please try again later.</div>;\r\n  }\r\n  \r\n  const ProfileHeader = () => (\r\n     <CardHeader>\r\n        <CardTitle>Profile</CardTitle>\r\n        <CardDescription>This is how others will see you on the site.</CardDescription>\r\n    </CardHeader>\r\n  );\r\n\r\n  return (\r\n    <div className={cn(!isPage && \"flex flex-col h-full overflow-hidden\")}>\r\n        <div className={cn(!isPage && \"flex-grow overflow-y-auto no-scrollbar p-6 space-y-6\")}>\r\n            <Card>\r\n                {isPage && <ProfileHeader />}\r\n                <CardContent className={cn(\"space-y-8\", isPage && \"pt-6\")}>\r\n                <div className=\"flex items-center gap-4\">\r\n                    <div className=\"relative group\" onClick={handleAvatarClick}>\r\n                        <Avatar className=\"h-24 w-24\">\r\n                            <AvatarImage src={profile.avatar} alt=\"User avatar\" />\r\n                            <AvatarFallback>{profile.first_name?.substring(0,1)}{profile.last_name?.substring(0,1)}</AvatarFallback>\r\n                        </Avatar>\r\n                        <div className=\"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer\">\r\n                            <Pencil className=\"text-white\" size={32} />\r\n                        </div>\r\n                        <input type=\"file\" ref={fileInputRef} onChange={handleAvatarChange} className=\"hidden\" accept=\"image/*\" />\r\n                    </div>\r\n                    <div className=\"grid gap-1.5\">\r\n                        <h2 className=\"text-2xl font-bold\">{profile.username || `${profile.first_name} ${profile.last_name}`}</h2>\r\n                        <p className=\"text-muted-foreground\">{profile.email}</p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"grid gap-4\">\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"grid gap-2\">\r\n                            <Label htmlFor=\"first_name\">First Name</Label>\r\n                            <Input id=\"first_name\" value={profile.first_name || ''} onChange={handleInputChange} />\r\n                        </div>\r\n                        <div className=\"grid gap-2\">\r\n                            <Label htmlFor=\"last_name\">Last Name</Label>\r\n                            <Input id=\"last_name\" value={profile.last_name || ''} onChange={handleInputChange} />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"grid gap-2\">\r\n                        <Label htmlFor=\"bio\">Bio</Label>\r\n                        <Textarea id=\"bio\" placeholder=\"Tell us a little bit about yourself\" value={profile.bio || ''} onChange={handleInputChange} />\r\n                    </div>\r\n                </div>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n        {!isPage && (\r\n            <div className=\"flex-shrink-0 flex justify-end items-center gap-2 p-6 bg-background/80 backdrop-blur-sm\">\r\n                <Button variant=\"outline\">Cancel</Button>\r\n                <Button onClick={handleSaveChanges}>Save Changes</Button>\r\n            </div>\r\n        )}\r\n         {isPage && (\r\n            <div className=\"flex justify-end mt-6\">\r\n                <Button onClick={handleSaveChanges}>Save Changes</Button>\r\n            </div>\r\n        )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5997, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Switch = React.forwardRef<\r\n  React.ElementRef<typeof SwitchPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <SwitchPrimitives.Root\r\n    className={cn(\r\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <SwitchPrimitives.Thumb\r\n      className={cn(\r\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\r\n      )}\r\n    />\r\n  </SwitchPrimitives.Root>\r\n))\r\nSwitch.displayName = SwitchPrimitives.Root.displayName\r\n\r\nexport { Switch }\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,OAAqB;QACpB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,8OAAC,kKAAA,CAAA,QAAsB;YACrB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,kKAAA,CAAA,OAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 6033, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/Settings.tsx"],"sourcesContent":["\r\n'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Button } from './ui/button';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';\r\nimport { Label } from './ui/label';\r\nimport { Separator } from './ui/separator';\r\nimport { Switch } from './ui/switch';\r\nimport { cn } from '@/lib/utils';\r\nimport { Input } from './ui/input';\r\n\r\ninterface SettingsProps {\r\n    isPage?: boolean;\r\n}\r\n\r\nexport function Settings({ isPage = false }: SettingsProps) {\r\n  const [darkMode, setDarkMode] = useState(false);\r\n  const [emailNotifications, setEmailNotifications] = useState(true);\r\n  const [pushNotifications, setPushNotifications] = useState(false);\r\n\r\n  const handleSaveChanges = () => {\r\n    // In a real application, you would save the settings here.\r\n    console.log('Saving settings:', { darkMode, emailNotifications, pushNotifications });\r\n  };\r\n\r\n  const SettingsHeader = () => (\r\n    <CardHeader>\r\n        <CardTitle>Settings</CardTitle>\r\n        <CardDescription>Manage your account settings and set e-mail preferences.</CardDescription>\r\n    </CardHeader>\r\n  );\r\n\r\n  return (\r\n    <div className={cn(!isPage && \"flex flex-col h-full\")}>\r\n      <div className={cn(!isPage && \"flex-grow space-y-6 pb-6\")}>\r\n         {isPage && <SettingsHeader />}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Display</CardTitle>\r\n            <CardDescription>Manage your display and theme settings.</CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className={cn('transition-opacity', !darkMode && 'opacity-50')}>\r\n                <Label htmlFor=\"dark-mode\">Dark Mode</Label>\r\n                <p className=\"text-sm text-muted-foreground\">Enable dark theme for the application.</p>\r\n              </div>\r\n              <Switch id=\"dark-mode\" checked={darkMode} onCheckedChange={setDarkMode} className={cn('transition-opacity', !darkMode && 'opacity-50')} />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Notifications</CardTitle>\r\n            <CardDescription>Manage how you receive notifications.</CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className={cn('transition-opacity', !emailNotifications && 'opacity-50')}>\r\n                <Label htmlFor=\"email-notifications\">Email Notifications</Label>\r\n                <p className=\"text-sm text-muted-foreground\">Receive notifications about your account via email.</p>\r\n              </div>\r\n              <Switch id=\"email-notifications\" checked={emailNotifications} onCheckedChange={setEmailNotifications} className={cn('transition-opacity', !emailNotifications && 'opacity-50')} />\r\n            </div>\r\n             <Separator />\r\n             <div className=\"flex items-center justify-between\">\r\n              <div className={cn('transition-opacity', !pushNotifications && 'opacity-50')}>\r\n                <Label htmlFor=\"push-notifications\">Push Notifications</Label>\r\n                <p className=\"text-sm text-muted-foreground\">Receive push notifications on your devices.</p>\r\n              </div>\r\n              <Switch id=\"push-notifications\" checked={pushNotifications} onCheckedChange={setPushNotifications} className={cn('transition-opacity', !pushNotifications && 'opacity-50')} />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n      {!isPage && (\r\n        <div className=\"flex-shrink-0 flex justify-end gap-2 pt-4 border-t\">\r\n            <Button variant=\"outline\">Cancel</Button>\r\n            <Button onClick={handleSaveChanges}>Save Changes</Button>\r\n        </div>\r\n      )}\r\n       {isPage && (\r\n        <div className=\"flex justify-end mt-6\">\r\n            <Button onClick={handleSaveChanges}>Save Changes</Button>\r\n        </div>\r\n    )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6370, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Select = SelectPrimitive.Root\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\r\n          \"p-1\",\r\n          position === \"popper\" &&\r\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n        )}\r\n      >\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n))\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6562, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/services/assistantService.ts"],"sourcesContent":["\r\n'use server';\r\n\r\nimport axios from 'axios';\r\nimport type { Assistant } from '@/lib/types';\r\n\r\nconst ASSISTANTS_CACHE_KEY = 'assistantsCache';\r\nlet cache: { timestamp: number; data: Assistant[] } | null = null;\r\nconst CACHE_DURATION = 5 * 60 * 1000; // 5 minutes\r\n\r\nconst getWebhookUrl = () => {\r\n    const url = process.env.GET_OPENAI_ASSISTANTS;\r\n    if (!url) {\r\n        console.warn('GET_OPENAI_ASSISTANTS webhook URL is not configured. Assistant fetching will be skipped.');\r\n        return null;\r\n    }\r\n    return url;\r\n};\r\n\r\nconst getSampleAssistants = (): Assistant[] => [\r\n    {\r\n        id: '1',\r\n        name: 'ODIN (Sample)',\r\n        description: 'You are a helpful assistant named ODIN, you are a meta-agent.... (This is sample data)',\r\n        version: 'gpt-4.1',\r\n        icon: 'bot',\r\n        addedDate: '2023-10-26T10:00:00Z',\r\n    },\r\n    {\r\n        id: '2',\r\n        name: 'Prompt Architect (Sample)',\r\n        description: 'You are a Prompt Architect AI. Your job is to write optimized system prompts...',\r\n        version: 'gpt-4.1',\r\n        icon: 'zap',\r\n        addedDate: '2023-10-25T10:00:00Z',\r\n    },\r\n];\r\n\r\nexport async function getAssistants(forceRefresh = false): Promise<Assistant[]> {\r\n    const now = Date.now();\r\n    if (!forceRefresh && cache && (now - cache.timestamp < CACHE_DURATION)) {\r\n        return cache.data;\r\n    }\r\n\r\n    const webhookUrl = getWebhookUrl();\r\n    const apiKey = process.env.BABLEPHISH_ASSISTANT_API_KEY;\r\n\r\n    if (!webhookUrl) {\r\n        return getSampleAssistants();\r\n    }\r\n    \r\n    if (!apiKey) {\r\n        console.warn('BABLEPHISH_ASSISTANT_API_KEY is not configured. Falling back to sample data.');\r\n        return getSampleAssistants();\r\n    }\r\n\r\n    try {\r\n        const response = await axios.get(webhookUrl, {\r\n            headers: {\r\n                'Authorization': `Bearer ${apiKey}`,\r\n                'OpenAI-Beta': 'assistants=v1'\r\n            },\r\n        });\r\n\r\n        if (response.status === 200 && response.data) {\r\n            // The API can return an object with a 'data' property or a direct array\r\n            const assistantList = Array.isArray(response.data) ? response.data : response.data.data;\r\n\r\n            if (Array.isArray(assistantList)) {\r\n                const assistants = assistantList.map((item: any) => ({\r\n                    id: item.id,\r\n                    name: item.name || 'Unnamed Assistant',\r\n                    description: item.instructions || 'No description provided.',\r\n                    version: item.model || 'N/A',\r\n                    icon: item.tools?.length > 0 ? 'zap' : 'bot',\r\n                    addedDate: item.created_at ? new Date(item.created_at * 1000).toISOString() : new Date().toISOString()\r\n                }));\r\n\r\n                cache = { timestamp: now, data: assistants };\r\n                return assistants;\r\n            }\r\n        }\r\n\r\n        console.warn(`Webhook for assistants returned status ${response.status} or invalid data format.`, response.data);\r\n        return getSampleAssistants();\r\n\r\n    } catch (error) {\r\n        if (axios.isAxiosError(error)) {\r\n            console.error('Failed to get assistants from webhook:', error.message);\r\n        } else {\r\n            console.error('An unexpected error occurred while fetching assistants:', error);\r\n        }\r\n        return getSampleAssistants();\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;IAsCsB,gBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 6575, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/AIStore.tsx"],"sourcesContent":["\r\n'use client';\r\n\r\nimport { useState, useMemo, useEffect } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Search, Heart, RefreshCw, Zap, Bot, Box, Loader2 } from 'lucide-react';\r\nimport Image from 'next/image';\r\nimport { cn } from '@/lib/utils';\r\nimport { getAssistants } from '@/services/assistantService';\r\nimport type { Assistant } from '@/lib/types';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ntype DisplayAssistant = Assistant & {\r\n    isFavorited: boolean;\r\n    iconComponent?: React.ReactNode;\r\n    iconBg?: string;\r\n};\r\n\r\nconst iconMap: { [key: string]: { component: React.ReactNode, bg: string } } = {\r\n    'zap': { component: <Zap className=\"text-green-500\" />, bg: 'bg-green-100' },\r\n    'box': { component: <Box className=\"text-blue-500\" />, bg: 'bg-blue-100' },\r\n    'bot': { component: <Bot className=\"text-pink-500\" />, bg: 'bg-pink-100' },\r\n    'sky_box': { component: <Box className=\"text-sky-500\" />, bg: 'bg-sky-100' },\r\n};\r\n\r\nconst FAVORITES_KEY = 'ai_store_favorites';\r\n\r\nexport function AIStore() {\r\n  const [assistants, setAssistants] = useState<DisplayAssistant[]>([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [sortOrder, setSortOrder] = useState('all');\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const { toast } = useToast();\r\n\r\n  const fetchAssistants = async (forceRefresh = false) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n        const data = await getAssistants(forceRefresh);\r\n        const savedFavorites = JSON.parse(localStorage.getItem(FAVORITES_KEY) || '[]');\r\n        \r\n        const displayAssistants = data.map(a => {\r\n            const iconInfo = iconMap[a.icon] || { component: <Bot className=\"text-gray-500\" />, bg: 'bg-gray-100' };\r\n            return {\r\n                ...a,\r\n                isFavorited: savedFavorites.includes(a.id),\r\n                iconComponent: iconInfo.component,\r\n                iconBg: iconInfo.bg,\r\n                addedDate: a.addedDate || new Date().toISOString(),\r\n            };\r\n        });\r\n\r\n        setAssistants(displayAssistants);\r\n    } catch (err) {\r\n        setError('Failed to load assistants. Please try refreshing.');\r\n        console.error(err);\r\n        toast({\r\n            variant: \"destructive\",\r\n            title: \"Error\",\r\n            description: \"Could not fetch assistants from the server.\"\r\n        });\r\n    } finally {\r\n        setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchAssistants();\r\n  }, []);\r\n  \r\n  const toggleFavorite = (id: string) => {\r\n    let newFavorites: string[] = [];\r\n    const updatedAssistants = assistants.map(a => {\r\n      if (a.id === id) {\r\n        return { ...a, isFavorited: !a.isFavorited };\r\n      }\r\n      return a;\r\n    });\r\n\r\n    setAssistants(updatedAssistants);\r\n    newFavorites = updatedAssistants.filter(a => a.isFavorited).map(a => a.id);\r\n    localStorage.setItem(FAVORITES_KEY, JSON.stringify(newFavorites));\r\n  };\r\n\r\n  const filteredAndSortedAssistants = useMemo(() => {\r\n    let result = assistants.filter(a => a.name.toLowerCase().includes(searchTerm.toLowerCase()));\r\n\r\n    switch (sortOrder) {\r\n      case 'name-asc':\r\n        result.sort((a, b) => a.name.localeCompare(b.name));\r\n        break;\r\n      case 'name-desc':\r\n        result.sort((a, b) => b.name.localeCompare(a.name));\r\n        break;\r\n      case 'favorites':\r\n        result = result.filter(a => a.isFavorited);\r\n        break;\r\n      case 'recent':\r\n        result.sort((a, b) => new Date(b.addedDate).getTime() - new Date(a.addedDate).getTime());\r\n        break;\r\n      case 'all':\r\n      default:\r\n        break;\r\n    }\r\n    return result;\r\n  }, [assistants, searchTerm, sortOrder]);\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col p-6 pt-12 bg-background text-foreground\">\r\n      <header className=\"mb-6\">\r\n        <div className=\"flex justify-between items-center\">\r\n            <div className=\"space-y-1\">\r\n                <h1 className=\"text-2xl font-bold\">Welcome to the AI Storefront</h1>\r\n                <p className=\"text-muted-foreground\">Each Assistant is created to help you do a specific set of tasks. Get answers to your questions, brainstorm ideas, create new content, and more!</p>\r\n            </div>\r\n        </div>\r\n      </header>\r\n      \r\n      <div className=\"flex items-center gap-4 mb-6\">\r\n        <Select value={sortOrder} onValueChange={setSortOrder}>\r\n          <SelectTrigger className=\"w-[180px]\">\r\n            <SelectValue placeholder=\"Sort\" />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            <SelectItem value=\"all\">All</SelectItem>\r\n            <SelectItem value=\"recent\">Recently Added</SelectItem>\r\n            <SelectItem value=\"name-asc\">Name A-Z</SelectItem>\r\n            <SelectItem value=\"name-desc\">Name Z-A</SelectItem>\r\n            <SelectItem value=\"favorites\">Favorites</SelectItem>\r\n          </SelectContent>\r\n        </Select>\r\n        <div className=\"relative flex-1\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n          <Input \r\n            placeholder=\"Search using assistant name\" \r\n            className=\"pl-10\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n          />\r\n        </div>\r\n        <Button variant=\"ghost\" onClick={() => fetchAssistants(true)} disabled={loading}>\r\n            <RefreshCw className={cn(\"mr-2 h-4 w-4\", loading && \"animate-spin\")} />\r\n            Refresh\r\n        </Button>\r\n        <span className=\"text-sm text-muted-foreground\">{filteredAndSortedAssistants.length} assistants</span>\r\n      </div>\r\n\r\n      <div className=\"flex-1 overflow-y-auto no-scrollbar\">\r\n        {loading ? (\r\n            <div className=\"flex justify-center items-center h-full\">\r\n                <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n            </div>\r\n        ) : error ? (\r\n            <div className=\"flex flex-col justify-center items-center h-full text-destructive\">\r\n                <p>{error}</p>\r\n                <Button variant=\"link\" onClick={() => fetchAssistants(true)}>Try again</Button>\r\n            </div>\r\n        ) : (\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {filteredAndSortedAssistants.map(assistant => (\r\n                <Card key={assistant.id} className=\"flex flex-col hover:shadow-lg transition-shadow\">\r\n                <CardHeader className=\"p-4\">\r\n                    <div className=\"flex justify-between items-start\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${assistant.iconBg}`}>\r\n                          {assistant.iconComponent}\r\n                        </div>\r\n                        <CardTitle className=\"text-sm font-semibold\">{assistant.name}</CardTitle>\r\n                    </div>\r\n                    <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\" onClick={() => toggleFavorite(assistant.id)}>\r\n                        <Heart className={cn(\"h-4 w-4\", assistant.isFavorited && \"fill-primary text-primary\")} />\r\n                    </Button>\r\n                    </div>\r\n                </CardHeader>\r\n                <CardContent className=\"flex-1 p-4 pt-0\">\r\n                    <CardDescription className=\"text-xs\">{assistant.description}</CardDescription>\r\n                </CardContent>\r\n                <CardFooter className=\"p-4 pt-0\">\r\n                    <div className=\"text-xs bg-gray-100 dark:bg-gray-800 text-muted-foreground rounded-full px-2 py-0.5\">\r\n                    {assistant.version}\r\n                    </div>\r\n                </CardFooter>\r\n                </Card>\r\n            ))}\r\n            </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7076, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Tabs = TabsPrimitive.Root\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsList.displayName = TabsPrimitive.List.displayName\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsContent.displayName = TabsPrimitive.Content.displayName\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,OAAO,gKAAA,CAAA,OAAkB;AAE/B,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,gKAAA,CAAA,OAAkB;QACjB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,8FACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG,gKAAA,CAAA,OAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,gKAAA,CAAA,UAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,uYACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,gKAAA,CAAA,UAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,gKAAA,CAAA,UAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,mIACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,gKAAA,CAAA,UAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 7129, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/badge.tsx"],"sourcesContent":["\r\nimport * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,wKACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE","debugId":null}},
    {"offset": {"line": 7171, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/services/promptService.ts"],"sourcesContent":["\r\n'use server';\r\n\r\nimport axios from 'axios';\r\nimport type { Prompt } from '@/lib/types';\r\n\r\nconst getWebhookUrl = () => {\r\n    const url = process.env.GET_PROMPT_WEBHOOK_URL;\r\n    if (!url) {\r\n        console.warn('GET_PROMPT_WEBHOOK_URL is not configured in .env file. Prompt fetching will be skipped.');\r\n        return null;\r\n    }\r\n    return url;\r\n};\r\n\r\nexport async function getPrompts(): Promise<Prompt[]> {\r\n    const webhookUrl = getWebhookUrl();\r\n    if (!webhookUrl) {\r\n        return []; // Return empty array if URL is not set\r\n    }\r\n\r\n    try {\r\n        const response = await axios.get(webhookUrl);\r\n\r\n        if (response.status === 200 && response.data) {\r\n            return Array.isArray(response.data) ? response.data : [response.data];\r\n        }\r\n\r\n        console.warn(`Webhook for prompts returned status ${response.status} or no data.`);\r\n        return [];\r\n\r\n    } catch (error) {\r\n        if (axios.isAxiosError(error)) {\r\n            console.error('Failed to get prompts from webhook:', error.message);\r\n        } else {\r\n            console.error('An unexpected error occurred while fetching prompts:', error);\r\n        }\r\n        // Instead of throwing, return empty array to allow the page to render.\r\n        return [];\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;IAesB,aAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 7184, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/PromptCatalog.tsx"],"sourcesContent":["\r\n'use client';\r\n\r\nimport { useState, useMemo, useEffect } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Search, Heart, RefreshCw, Loader2, Pencil, Trash2 } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\r\nimport { Badge } from './ui/badge';\r\nimport { getPrompts } from '@/services/promptService';\r\nimport type { Prompt } from '@/lib/types';\r\n\r\ntype DisplayPrompt = Prompt & { isFavorited: boolean };\r\n\r\nconst assistants = ['All Assistants', 'ODIN', 'NOW Assist Guru', 'Prompt Architect', 'ADEPT Guru', 'NIEA Guru'];\r\nconst tasks = ['Select Task...', 'Content Creation', 'Brainstorming', 'Explanation', 'Summarization', 'Question Generation'];\r\nconst functionalAreas = ['Select Functional Area...', 'Marketing', 'Creative', 'Education', 'Research', 'Human Resources'];\r\n\r\nconst PROMPTS_CACHE_KEY = 'promptCatalogCache';\r\n\r\nexport function PromptCatalog() {\r\n  const [prompts, setPrompts] = useState<DisplayPrompt[]>([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedAssistant, setSelectedAssistant] = useState('All Assistants');\r\n  const [selectedTask, setSelectedTask] = useState('Select Task...');\r\n  const [selectedFunctionalArea, setSelectedFunctionalArea] = useState('Select Functional Area...');\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [activeTab, setActiveTab] = useState('common-prompts');\r\n\r\n\r\n  const fetchPrompts = async (forceRefresh = false) => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    if (!forceRefresh) {\r\n        const cachedPrompts = sessionStorage.getItem(PROMPTS_CACHE_KEY);\r\n        if (cachedPrompts) {\r\n            try {\r\n                const parsedPrompts = JSON.parse(cachedPrompts);\r\n                setPrompts(parsedPrompts);\r\n                setLoading(false);\r\n                return;\r\n            } catch (e) {\r\n                console.error(\"Failed to parse cached prompts\", e);\r\n                sessionStorage.removeItem(PROMPTS_CACHE_KEY);\r\n            }\r\n        }\r\n    } else {\r\n        sessionStorage.removeItem(PROMPTS_CACHE_KEY);\r\n    }\r\n\r\n    try {\r\n        const data = await getPrompts();\r\n        const displayPrompts = data.map(p => ({ ...p, isFavorited: false }));\r\n        setPrompts(displayPrompts);\r\n        sessionStorage.setItem(PROMPTS_CACHE_KEY, JSON.stringify(displayPrompts));\r\n    } catch (err) {\r\n        setError('Failed to load prompts. Please try again later.');\r\n        console.error(err);\r\n    } finally {\r\n        setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPrompts();\r\n  }, []);\r\n\r\n  const toggleFavorite = (id: string) => {\r\n    const newPrompts = prompts.map(p => p.id === id ? {...p, isFavorited: !p.isFavorited} : p);\r\n    setPrompts(newPrompts);\r\n    if (sessionStorage.getItem(PROMPTS_CACHE_KEY)) {\r\n        sessionStorage.setItem(PROMPTS_CACHE_KEY, JSON.stringify(newPrompts));\r\n    }\r\n  };\r\n  \r\n  const applyFilters = (items: DisplayPrompt[]) => {\r\n      return items.filter(prompt => {\r\n        const searchMatch = prompt.title.toLowerCase().includes(searchTerm.toLowerCase()) || prompt.description.toLowerCase().includes(searchTerm.toLowerCase());\r\n        const assistantMatch = selectedAssistant === 'All Assistants' || prompt.assistant === selectedAssistant;\r\n        const taskMatch = selectedTask === 'Select Task...' || prompt.task === selectedTask;\r\n        const functionalAreaMatch = selectedFunctionalArea === 'Select Functional Area...' || prompt.functionalArea === selectedFunctionalArea;\r\n        return searchMatch && assistantMatch && taskMatch && functionalAreaMatch;\r\n      });\r\n  }\r\n\r\n  const filteredPrompts = useMemo(() => {\r\n    return applyFilters(prompts);\r\n  }, [prompts, searchTerm, selectedAssistant, selectedTask, selectedFunctionalArea]);\r\n  \r\n  const favoritedPrompts = useMemo(() => {\r\n    const favorites = prompts.filter(p => p.isFavorited);\r\n    return applyFilters(favorites);\r\n  }, [prompts, searchTerm, selectedAssistant, selectedTask, selectedFunctionalArea]);\r\n  \r\n  const hasFavorites = useMemo(() => prompts.some(p => p.isFavorited), [prompts]);\r\n  \r\n  const handleRefresh = () => {\r\n    fetchPrompts(true);\r\n  };\r\n\r\n  const renderPromptGrid = (promptList: DisplayPrompt[], emptyMessage: string) => {\r\n    if (loading) {\r\n      return <div className=\"flex items-center justify-center h-full\"><Loader2 className=\"h-8 w-8 animate-spin text-primary\" /></div>;\r\n    }\r\n    if (error) {\r\n      return <div className=\"flex items-center justify-center h-full text-destructive\">{error}</div>;\r\n    }\r\n    if (promptList.length === 0) {\r\n      return <div className=\"flex items-center justify-center h-64\"><p className=\"text-muted-foreground\">{emptyMessage}</p></div>;\r\n    }\r\n    return (\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {promptList.map(prompt => (\r\n          <Card key={prompt.id} className=\"group relative flex flex-col hover:shadow-lg transition-shadow\">\r\n            <CardHeader className=\"p-4\">\r\n              <div className=\"flex justify-between items-start\">\r\n                <CardTitle className=\"text-xs font-normal text-muted-foreground\">{prompt.assistant}</CardTitle>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 -mt-2 -mr-2\" onClick={() => toggleFavorite(prompt.id)}>\r\n                  <Heart className={cn(\"h-4 w-4\", prompt.isFavorited && \"fill-primary text-primary\")} />\r\n                </Button>\r\n              </div>\r\n              <p className=\"font-semibold text-sm pt-2\">{prompt.title}</p>\r\n            </CardHeader>\r\n            <CardContent className=\"flex-1 p-4 pt-0\">\r\n              <CardDescription className=\"text-xs\">{prompt.description}</CardDescription>\r\n            </CardContent>\r\n            <CardFooter className=\"p-4 pt-0 flex justify-between items-end\">\r\n              <div className=\"flex-wrap gap-2 flex\">\r\n                  {(prompt.tags || []).map(tag => (\r\n                  <Badge key={tag} variant=\"secondary\">{tag}</Badge>\r\n                  ))}\r\n              </div>\r\n              <div className=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                  <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7\">\r\n                      <Trash2 className=\"h-4 w-4\" />\r\n                  </Button>\r\n                  <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7\">\r\n                      <Pencil className=\"h-4 w-4\" />\r\n                  </Button>\r\n              </div>\r\n            </CardFooter>\r\n          </Card>\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col p-6 pt-12 bg-background text-foreground\">\r\n      <header className=\"mb-6\">\r\n        <div className=\"flex justify-between items-center\">\r\n            <div className=\"space-y-1\">\r\n                <h1 className=\"text-2xl font-bold\">Prompt Catalog</h1>\r\n                <p className=\"text-muted-foreground\">Discover and use pre-built prompts to get the most out of your AI assistants. Browse by category, assistant, or search for specific use cases.</p>\r\n            </div>\r\n        </div>\r\n      </header>\r\n      \r\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"flex-grow flex flex-col\">\r\n        <div className='flex justify-between items-center border-b'>\r\n            <TabsList className=\"bg-transparent p-0\">\r\n                <TabsTrigger value=\"common-prompts\" className=\"data-[state=active]:shadow-none data-[state=active]:border-b-2 border-primary rounded-none\">Common Prompts</TabsTrigger>\r\n                {hasFavorites && (\r\n                    <TabsTrigger value=\"favorite-prompts\" className=\"data-[state=active]:shadow-none data-[state=active]:border-b-2 border-primary rounded-none\">Favorite Prompts</TabsTrigger>\r\n                )}\r\n            </TabsList>\r\n            <Button variant=\"ghost\" onClick={handleRefresh} disabled={loading}>\r\n                <RefreshCw className={cn(\"mr-2 h-4 w-4\", loading && \"animate-spin\")} />\r\n                Refresh\r\n            </Button>\r\n        </div>\r\n\r\n        <div className=\"mt-6 mb-4\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\r\n                <div>\r\n                    <label className=\"text-sm font-medium\">Assistant</label>\r\n                    <Select value={selectedAssistant} onValueChange={setSelectedAssistant}>\r\n                        <SelectTrigger><SelectValue /></SelectTrigger>\r\n                        <SelectContent>{assistants.map(a => <SelectItem key={a} value={a}>{a}</SelectItem>)}</SelectContent>\r\n                    </Select>\r\n                </div>\r\n                <div>\r\n                    <label className=\"text-sm font-medium\">Task</label>\r\n                     <Select value={selectedTask} onValueChange={setSelectedTask}>\r\n                        <SelectTrigger><SelectValue /></SelectTrigger>\r\n                        <SelectContent>{tasks.map(t => <SelectItem key={t} value={t}>{t}</SelectItem>)}</SelectContent>\r\n                    </Select>\r\n                </div>\r\n                <div>\r\n                    <label className=\"text-sm font-medium\">Functional Area</label>\r\n                     <Select value={selectedFunctionalArea} onValueChange={setSelectedFunctionalArea}>\r\n                        <SelectTrigger><SelectValue /></SelectTrigger>\r\n                        <SelectContent>{functionalAreas.map(f => <SelectItem key={f} value={f}>{f}</SelectItem>)}</SelectContent>\r\n                    </Select>\r\n                </div>\r\n            </div>\r\n             <div className=\"relative\">\r\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                <Input \r\n                    placeholder=\"Search prompts...\" \r\n                    className=\"pl-10\"\r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                />\r\n            </div>\r\n        </div>\r\n        \r\n        <div className=\"flex-1 overflow-y-auto no-scrollbar\">\r\n            <TabsContent value=\"common-prompts\" className=\"mt-0\">\r\n                {renderPromptGrid(filteredPrompts, \"No prompts match your criteria.\")}\r\n            </TabsContent>\r\n            <TabsContent value=\"favorite-prompts\" className=\"mt-0\">\r\n                {renderPromptGrid(favoritedPrompts, \"You haven't favorited any prompts yet.\")}\r\n            </TabsContent>\r\n        </div>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7867, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,KAAK;YACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAM,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,mBAAmB;QAAa,GAAG,KAAK;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,2DACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,+EACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,oGACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,kDAAkD;QAC/D,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 7977, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/services/roleService.ts"],"sourcesContent":["interface Role {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  userCount: number;\r\n  permissions: string[];\r\n  createdAt: string;\r\n  active?: boolean;\r\n}\r\n\r\ninterface CreateRoleRequest {\r\n  name: string;\r\n  description: string;\r\n  permissions: string[];\r\n}\r\n\r\ninterface UpdateRoleRequest extends CreateRoleRequest {\r\n  id: string;\r\n}\r\n\r\nclass RoleService {\r\n  private async retryRequest<T>(\r\n    requestFn: () => Promise<T>, \r\n    maxRetries: number = 2, \r\n    delay: number = 1000\r\n  ): Promise<T> {\r\n    let lastError: Error;\r\n    \r\n    for (let attempt = 0; attempt <= maxRetries; attempt++) {\r\n      try {\r\n        return await requestFn();\r\n      } catch (error) {\r\n        lastError = error as Error;\r\n        \r\n        // Don't retry for non-network errors\r\n        if (!(error instanceof TypeError && error.message === 'Failed to fetch')) {\r\n          throw error;\r\n        }\r\n        \r\n        if (attempt < maxRetries) {\r\n          console.log(`Request failed, retrying in ${delay}ms (attempt ${attempt + 1}/${maxRetries + 1})`);\r\n          await new Promise(resolve => setTimeout(resolve, delay));\r\n          delay *= 1.5; // Exponential backoff\r\n        }\r\n      }\r\n    }\r\n    \r\n    throw lastError!;\r\n  }\r\n\r\n  private getWebhookUrl(type: 'get' | 'create_update' | 'delete'): string {\r\n    switch (type) {\r\n      case 'get':\r\n        return process.env.NEXT_PUBLIC_GET_ROLES_WEBHOOK_URL || '';\r\n      case 'create_update':\r\n        return process.env.NEXT_PUBLIC_CREATE_UPDATE_ROLE_WEBHOOK_URL || '';\r\n      case 'delete':\r\n        return process.env.NEXT_PUBLIC_DELETE_ROLE_WEBHOOK_URL || '';\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  private async makeRequest<T>(url: string, options: RequestInit = {}): Promise<T> {\r\n    if (!url) {\r\n      console.error('Webhook URL not configured. Available env vars:', {\r\n        get: process.env.NEXT_PUBLIC_GET_ROLES_WEBHOOK_URL,\r\n        create_update: process.env.NEXT_PUBLIC_CREATE_UPDATE_ROLE_WEBHOOK_URL,\r\n        delete: process.env.NEXT_PUBLIC_DELETE_ROLE_WEBHOOK_URL\r\n      });\r\n      throw new Error('Webhook URL not configured');\r\n    }\r\n\r\n    console.log('Making request to:', url, 'with options:', options);\r\n\r\n    try {\r\n      const response = await fetch(url, {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...options.headers,\r\n        },\r\n        ...options,\r\n      });\r\n\r\n      console.log('Response status:', response.status);\r\n      console.log('Response headers:', Object.fromEntries(response.headers.entries()));\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        console.error(`HTTP Error ${response.status}:`, errorText);\r\n        throw new Error(`HTTP ${response.status}: ${errorText}`);\r\n      }\r\n\r\n      const jsonResponse = await response.json();\r\n      console.log('JSON Response received:', jsonResponse);\r\n      return jsonResponse;\r\n    } catch (error) {\r\n      // Handle network errors specifically\r\n      if (error instanceof TypeError && error.message === 'Failed to fetch') {\r\n        console.error('Network error - Failed to fetch. This could be due to:');\r\n        console.error('1. Network connectivity issues');\r\n        console.error('2. CORS policy blocking the request');\r\n        console.error('3. Server is unreachable');\r\n        console.error('4. SSL/TLS certificate issues');\r\n        console.error('Request details:', { url, method: options.method || 'GET' });\r\n        throw new Error(`Network error: Unable to reach ${url}. Please check your internet connection and server status.`);\r\n      }\r\n      \r\n      // Re-throw other errors\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private getSampleRoles(): Role[] {\r\n    return [\r\n      {\r\n        id: 'sample-admin',\r\n        name: 'Administrator',\r\n        description: 'Full system access with all permissions',\r\n        userCount: 3,\r\n        permissions: ['User Management', 'Role Management', 'System Settings', 'View Reports', 'Export Data', 'Import Data', 'Manage Workspaces', 'AI Tools Access', 'Admin Panel'],\r\n        createdAt: new Date().toLocaleDateString('en-GB'),\r\n        active: true\r\n      },\r\n      {\r\n        id: 'sample-user',\r\n        name: 'Standard User',\r\n        description: 'Basic user with limited permissions',\r\n        userCount: 15,\r\n        permissions: ['View Reports', 'AI Tools Access'],\r\n        createdAt: new Date().toLocaleDateString('en-GB'),\r\n        active: true\r\n      },\r\n      {\r\n        id: 'sample-manager',\r\n        name: 'Manager',\r\n        description: 'Managerial role with workspace and reporting access',\r\n        userCount: 7,\r\n        permissions: ['View Reports', 'Export Data', 'Manage Workspaces', 'AI Tools Access'],\r\n        createdAt: new Date().toLocaleDateString('en-GB'),\r\n        active: true\r\n      }\r\n    ];\r\n  }\r\n\r\n  async getRoles(): Promise<Role[]> {\r\n    const url = this.getWebhookUrl('get');\r\n    \r\n    // If URL is not configured, return sample data\r\n    if (!url) {\r\n      console.log('Webhook URL not configured, returning sample roles');\r\n      return this.getSampleRoles();\r\n    }\r\n    \r\n    try {\r\n      const response = await this.makeRequest<any>(url, {\r\n        method: 'GET',\r\n      });\r\n      \r\n      let roles: Role[] = [];\r\n      \r\n      if (Array.isArray(response)) {\r\n        roles = response;\r\n      } else if (response && typeof response === 'object') {\r\n        roles = response.roles || response.data || response.items || response.result || [];\r\n        if (roles.length === 0) {\r\n          const values = Object.values(response);\r\n          if (values.length > 0 && Array.isArray(values[0])) {\r\n            roles = values[0] as Role[];\r\n          }\r\n        }\r\n      }\r\n      \r\n      const processedRoles = roles.map((role: any) => {\r\n        let permissions: string[] = [];\r\n        if (typeof role.permissions === 'string') {\r\n          try {\r\n            permissions = JSON.parse(role.permissions);\r\n          } catch (e) {\r\n            permissions = [];\r\n          }\r\n        } else if (Array.isArray(role.permissions)) {\r\n          permissions = role.permissions;\r\n        }\r\n\r\n        return {\r\n          id: role.id || role._id?.$oid || role._id || String(Math.random()),\r\n          name: role.name || role.roleName || 'Unknown Role',\r\n          description: role.description || role.desc || '',\r\n          userCount: role.userCount || role.users || 0,\r\n          permissions: permissions,\r\n          createdAt: role.createdAt || role.created || new Date().toLocaleDateString('en-GB'),\r\n          active: role.active === 'True' || role.active === true\r\n        };\r\n      });\r\n      \r\n      return processedRoles;\r\n    } catch (error) {\r\n      console.error('Error fetching roles from webhook:', error);\r\n      // On error, return an empty array to avoid showing sample data\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async createRole(roleData: CreateRoleRequest): Promise<Role> {\r\n    const url = this.getWebhookUrl('create_update');\r\n    \r\n    // If URL is not configured, return a mock created role\r\n    if (!url) {\r\n      console.log('Create webhook URL not configured, returning mock role');\r\n      const newId = crypto.randomUUID();\r\n      const mockRole: Role = {\r\n        id: newId,\r\n        name: roleData.name,\r\n        description: roleData.description,\r\n        userCount: 0,\r\n        permissions: roleData.permissions,\r\n        createdAt: new Date().toLocaleDateString('en-GB'),\r\n        active: true\r\n      };\r\n      return mockRole;\r\n    }\r\n    \r\n    try {\r\n      const response = await this.retryRequest(async () => {\r\n        // Convert permissions array to JSON string for database storage\r\n        const newId = crypto.randomUUID();\r\n        const payload = {\r\n          id: newId,\r\n          name: roleData.name,\r\n          description: roleData.description,\r\n          permissions: JSON.stringify(roleData.permissions),\r\n          active: \"True\",\r\n          userCount: 0,\r\n          createdAt: new Date().toLocaleDateString('en-GB')\r\n        };\r\n        \r\n        console.log('Creating role with payload:', payload);\r\n        \r\n        return await this.makeRequest<{ role?: Role; data?: Role }>(url, {\r\n          method: 'POST',\r\n          body: JSON.stringify(payload),\r\n        });\r\n      });\r\n      \r\n      console.log('Create role response:', response);\r\n      \r\n      const createdRole = response.role || response.data || response;\r\n      if (!createdRole) {\r\n        console.error('Failed to extract role from response:', response);\r\n        throw new Error('Invalid response format: missing role data');\r\n      }\r\n      \r\n      console.log('Successfully created role:', createdRole);\r\n      return createdRole;\r\n    } catch (error) {\r\n      console.error('Error creating role, falling back to mock data:', error);\r\n      // Return a mock role when webhook fails\r\n      const newId = crypto.randomUUID();\r\n      const mockRole: Role = {\r\n        id: newId,\r\n        name: roleData.name,\r\n        description: roleData.description,\r\n        userCount: 0,\r\n        permissions: roleData.permissions,\r\n        createdAt: new Date().toLocaleDateString('en-GB'),\r\n        active: true\r\n      };\r\n      return mockRole;\r\n    }\r\n  }\r\n\r\n  async updateRole(roleData: UpdateRoleRequest): Promise<Role> {\r\n    const url = this.getWebhookUrl('create_update');\r\n    \r\n    // If URL is not configured, return a mock updated role\r\n    if (!url) {\r\n      console.log('Update webhook URL not configured, returning mock updated role');\r\n      const mockRole: Role = {\r\n        id: roleData.id,\r\n        name: roleData.name,\r\n        description: roleData.description,\r\n        userCount: 0,\r\n        permissions: roleData.permissions,\r\n        createdAt: new Date().toLocaleDateString('en-GB'),\r\n        active: true\r\n      };\r\n      return mockRole;\r\n    }\r\n    \r\n    try {\r\n      const response = await this.retryRequest(async () => {\r\n        // Convert permissions array to JSON string for database storage\r\n        const payload = {\r\n          id: roleData.id,\r\n          name: roleData.name,\r\n          description: roleData.description,\r\n          permissions: JSON.stringify(roleData.permissions),\r\n          active: \"True\" // Maintain active status\r\n        };\r\n        \r\n        console.log('Updating role with payload:', payload);\r\n        \r\n        return await this.makeRequest<{ role?: Role; data?: Role }>(url, {\r\n          method: 'PUT',\r\n          body: JSON.stringify(payload),\r\n        });\r\n      });\r\n      \r\n      console.log('Update role response:', response);\r\n      \r\n      const updatedRole = response.role || response.data || response;\r\n      if (!updatedRole) {\r\n        console.error('Failed to extract role from response:', response);\r\n        throw new Error('Invalid response format: missing role data');\r\n      }\r\n      \r\n      console.log('Successfully updated role:', updatedRole);\r\n      return updatedRole;\r\n    } catch (error) {\r\n      console.error('Error updating role, falling back to mock data:', error);\r\n      // Return a mock updated role when webhook fails\r\n      const mockRole: Role = {\r\n        id: roleData.id,\r\n        name: roleData.name,\r\n        description: roleData.description,\r\n        userCount: 0,\r\n        permissions: roleData.permissions,\r\n        createdAt: new Date().toLocaleDateString('en-GB'),\r\n        active: true\r\n      };\r\n      return mockRole;\r\n    }\r\n  }\r\n\r\n  async deleteRole(roleId: string): Promise<void> {\r\n    const url = this.getWebhookUrl('delete');\r\n    \r\n    // If URL is not configured, just log and return (mock deletion)\r\n    if (!url) {\r\n      console.log('Delete webhook URL not configured, mock deleting role:', roleId);\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      await this.retryRequest(async () => {\r\n        console.log('Deleting role with ID:', roleId);\r\n        \r\n        const response = await this.makeRequest<{ success?: boolean; message?: string }>(url, {\r\n          method: 'DELETE',\r\n          body: JSON.stringify({ id: roleId }),\r\n        });\r\n        \r\n        console.log('Delete role response:', response);\r\n        return response;\r\n      });\r\n    } catch (error) {\r\n      console.error('Error deleting role, treating as successful (mock deletion):', error);\r\n      // Don't throw error for delete operations in fallback mode\r\n      return;\r\n    }\r\n  }\r\n}\r\n\r\n// Debug function to test all role webhooks\r\nexport const testRoleWebhooks = async () => {\r\n  console.log('=== TESTING ALL ROLE WEBHOOKS ===');\r\n  \r\n  const webhooks = {\r\n    get: process.env.NEXT_PUBLIC_GET_ROLES_WEBHOOK_URL,\r\n    create_update: process.env.NEXT_PUBLIC_CREATE_UPDATE_ROLE_WEBHOOK_URL,\r\n    delete: process.env.NEXT_PUBLIC_DELETE_ROLE_WEBHOOK_URL\r\n  };\r\n  \r\n  console.log('Configured webhook URLs:', webhooks);\r\n  \r\n  // Test GET endpoint\r\n  if (webhooks.get) {\r\n    console.log('\\n--- Testing GET roles endpoint ---');\r\n    try {\r\n      const response = await fetch(webhooks.get, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n      \r\n      console.log('GET Response status:', response.status);\r\n      console.log('GET Response headers:', Object.fromEntries(response.headers.entries()));\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        console.log('GET Response data:', data);\r\n        console.log('Data type:', typeof data);\r\n        console.log('Is Array:', Array.isArray(data));\r\n        if (data && typeof data === 'object') {\r\n          console.log('Data keys:', Object.keys(data));\r\n        }\r\n      } else {\r\n        const errorText = await response.text();\r\n        console.error('GET Error response:', errorText);\r\n      }\r\n    } catch (error) {\r\n      console.error('GET Request failed:', error);\r\n    }\r\n  } else {\r\n    console.log('GET webhook URL not configured');\r\n  }\r\n  \r\n  // Test CREATE endpoint with sample data\r\n  if (webhooks.create_update) {\r\n    console.log('\\n--- Testing CREATE endpoint ---');\r\n    const testPayload = {\r\n      name: \"Test Role\",\r\n      description: \"Test Description\",\r\n      permissions: JSON.stringify([\"User Management\"]),\r\n      active: \"True\",\r\n      userCount: 0\r\n    };\r\n    \r\n    console.log('Test payload:', testPayload);\r\n    \r\n    try {\r\n      const response = await fetch(webhooks.create_update, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(testPayload)\r\n      });\r\n      \r\n      console.log('CREATE Response status:', response.status);\r\n      console.log('CREATE Response headers:', Object.fromEntries(response.headers.entries()));\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        console.log('CREATE Response data:', data);\r\n      } else {\r\n        const errorText = await response.text();\r\n        console.error('CREATE Error response:', errorText);\r\n      }\r\n    } catch (error) {\r\n      console.error('CREATE Request failed:', error);\r\n    }\r\n  } else {\r\n    console.log('CREATE/UPDATE webhook URL not configured');\r\n  }\r\n  \r\n  console.log('=== WEBHOOK TEST COMPLETE ===');\r\n};\r\n\r\n// Legacy function for backwards compatibility\r\nexport const testRoleWebhook = testRoleWebhooks;\r\n\r\nexport const roleService = new RoleService();\r\nexport type { Role, CreateRoleRequest, UpdateRoleRequest };"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8386, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/checkbox.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\r\nimport { Check } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <CheckboxPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <CheckboxPrimitive.Indicator\r\n      className={cn(\"flex items-center justify-center text-current\")}\r\n    >\r\n      <Check className=\"h-4 w-4\" />\r\n    </CheckboxPrimitive.Indicator>\r\n  </CheckboxPrimitive.Root>\r\n))\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\r\n\r\nexport { Checkbox }\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oKAAA,CAAA,OAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kTACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,oKAAA,CAAA,YAA2B;YAC1B,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE;sBAEd,cAAA,8OAAC,oMAAA,CAAA,QAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,oKAAA,CAAA,OAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 8431, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst ScrollArea = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <ScrollAreaPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\"relative overflow-hidden\", className)}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\r\n      {children}\r\n    </ScrollAreaPrimitive.Viewport>\r\n    <ScrollBar />\r\n    <ScrollAreaPrimitive.Corner />\r\n  </ScrollAreaPrimitive.Root>\r\n))\r\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\r\n\r\nconst ScrollBar = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\r\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\r\n    ref={ref}\r\n    orientation={orientation}\r\n    className={cn(\r\n      \"flex touch-none select-none transition-colors\",\r\n      orientation === \"vertical\" &&\r\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\r\n      orientation === \"horizontal\" &&\r\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\r\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n))\r\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\r\n\r\nexport { ScrollArea, ScrollBar }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,0KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;0BAET,8OAAC,0KAAA,CAAA,WAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,0KAAA,CAAA,SAA0B;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,0KAAA,CAAA,OAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC,0KAAA,CAAA,sBAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,0KAAA,CAAA,kBAAmC;YAAC,WAAU;;;;;;;;;;;AAGnD,UAAU,WAAW,GAAG,0KAAA,CAAA,sBAAuC,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 8499, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/UserManagement.tsx"],"sourcesContent":["\r\n'use client';\r\n\r\nimport { useState, useEffect, useMemo } from 'react';\r\nimport { Button } from './ui/button';\r\nimport { Input } from './ui/input';\r\nimport { Badge } from './ui/badge';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from './ui/table';\r\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from './ui/dialog';\r\nimport { Label } from './ui/label';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';\r\nimport { Card, CardContent, CardHeader } from './ui/card';\r\nimport { Search, UserPlus, Edit2, Trash2, MoreHorizontal, Loader2, ChevronsUpDown } from 'lucide-react';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { getAllUsers, updateUserProfile } from '@/services/userService';\r\nimport { roleService, type Role } from '@/services/roleService';\r\nimport type { User } from '@/lib/types';\r\nimport { Avatar, AvatarFallback, AvatarImage } from './ui/avatar';\r\nimport { Popover, PopoverContent, PopoverTrigger } from './ui/popover';\r\nimport { Checkbox } from './ui/checkbox';\r\nimport { ScrollArea } from './ui/scroll-area';\r\nimport { cn } from '@/lib/utils';\r\nimport { Switch } from './ui/switch';\r\nimport { Textarea } from './ui/textarea';\r\n\r\n\r\nexport function UserManagement() {\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [roles, setRoles] = useState<Role[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedRoleFilter, setSelectedRoleFilter] = useState('All Roles');\r\n  const [isAddUserOpen, setIsAddUserOpen] = useState(false);\r\n  const [editingUser, setEditingUser] = useState<User | null>(null);\r\n  const [newUser, setNewUser] = useState<Partial<User> & { active: boolean }>({\r\n    first_name: '',\r\n    last_name: '',\r\n    email: '',\r\n    roles: [],\r\n    active: true,\r\n    bio: '',\r\n    avatar: '',\r\n    password: '',\r\n    Company: '',\r\n  });\r\n  const { toast } = useToast();\r\n  \r\n  const fetchInitialData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const [fetchedUsers, fetchedRoles] = await Promise.all([\r\n        getAllUsers(),\r\n        roleService.getRoles()\r\n      ]);\r\n      setUsers(fetchedUsers);\r\n      setRoles(fetchedRoles);\r\n    } catch (error) {\r\n       toast({\r\n        title: \"Error\",\r\n        description: \"Failed to fetch users or roles.\",\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchInitialData();\r\n  }, []);\r\n\r\n  const filteredUsers = users.filter(user => {\r\n    const name = `${user.first_name || ''} ${user.last_name || ''}`.toLowerCase();\r\n    const matchesSearch = name.includes(searchTerm.toLowerCase()) ||\r\n                         (user.email || '').toLowerCase().includes(searchTerm.toLowerCase());\r\n    const userRoles = user.roles && user.roles.length > 0 ? user.roles : [];\r\n    const matchesRole = selectedRoleFilter === 'All Roles' || userRoles.includes(selectedRoleFilter);\r\n    return matchesSearch && matchesRole;\r\n  });\r\n\r\n  const availableRoles = useMemo(() => roles, [roles]);\r\n  \r\n  const handleAddUser = async () => {\r\n    if (!newUser.email) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Please provide an email for the new user.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n    \r\n    const userToCreate: Partial<User> = {\r\n        ...newUser,\r\n        active: newUser.active ? 'true' : 'false',\r\n    };\r\n\r\n    const success = await updateUserProfile(userToCreate);\r\n\r\n    if (success) {\r\n        resetForm();\r\n        setIsAddUserOpen(false);\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"User added successfully\"\r\n        });\r\n        fetchInitialData();\r\n    } else {\r\n         toast({\r\n          title: \"Error\",\r\n          description: \"Failed to add user.\",\r\n          variant: \"destructive\"\r\n        });\r\n    }\r\n  };\r\n\r\n  const handleEditUser = (user: User) => {\r\n    setEditingUser(user);\r\n    setNewUser({\r\n      first_name: user.first_name,\r\n      last_name: user.last_name,\r\n      email: user.email,\r\n      roles: user.roles || [],\r\n      userId: user.userId,\r\n      active: user.active === 'true',\r\n      bio: user.bio || '',\r\n      avatar: user.avatar || '',\r\n      password: '', // Don't pre-fill password for security\r\n      Company: user.Company || '',\r\n    });\r\n    setIsAddUserOpen(true);\r\n  };\r\n\r\n  const handleUpdateUser = async () => {\r\n    if (!editingUser) return;\r\n    \r\n    const userToUpdate: Partial<User> = {\r\n        userId: editingUser.userId,\r\n        first_name: newUser.first_name,\r\n        last_name: newUser.last_name,\r\n        email: newUser.email,\r\n        roles: newUser.roles || [],\r\n        active: newUser.active ? 'true' : 'false',\r\n        bio: newUser.bio,\r\n        avatar: newUser.avatar,\r\n        Company: newUser.Company,\r\n    };\r\n    \r\n    // Only include password if it was changed\r\n    if (newUser.password) {\r\n        userToUpdate.password = newUser.password;\r\n    }\r\n\r\n    const success = await updateUserProfile(userToUpdate);\r\n\r\n    if (success) {\r\n      const updatedUsers = users.map(user => \r\n        user.userId === editingUser.userId \r\n          ? { ...user, ...userToUpdate, active: userToUpdate.active! }\r\n          : user\r\n      );\r\n      setUsers(updatedUsers);\r\n      setEditingUser(null);\r\n      resetForm();\r\n      setIsAddUserOpen(false);\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"User updated successfully\"\r\n      });\r\n    } else {\r\n       toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update user.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDeleteUser = (userId: string) => {\r\n    // This would call a deleteUser service in a real app.\r\n    setUsers(users.filter(user => user.userId !== userId));\r\n    toast({\r\n      title: \"Success\",\r\n      description: \"User deleted successfully (client-side). Implement backend delete call.\"\r\n    });\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setNewUser({ \r\n      first_name: '', \r\n      last_name: '', \r\n      email: '', \r\n      roles: [],\r\n      active: true,\r\n      bio: '',\r\n      avatar: '',\r\n      password: '',\r\n      Company: '',\r\n    });\r\n    setEditingUser(null);\r\n  };\r\n\r\n  const handleRoleSelection = (roleName: string) => {\r\n    setNewUser(prev => {\r\n        const roles = prev.roles ? [...prev.roles] : [];\r\n        const index = roles.indexOf(roleName);\r\n        if (index > -1) {\r\n            roles.splice(index, 1);\r\n        } else {\r\n            roles.push(roleName);\r\n        }\r\n        return {...prev, roles};\r\n    })\r\n  };\r\n  \r\n  if (loading) {\r\n    return (\r\n        <div className=\"flex justify-center items-center h-64\">\r\n            <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n        </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-semibold text-gray-900\">User Management</h1>\r\n          <p className=\"text-sm text-gray-600 mt-1\">Manage user accounts and permissions</p>\r\n        </div>\r\n        <Button onClick={() => setIsAddUserOpen(true)} className=\"bg-orange-500 hover:bg-orange-600\">\r\n          <UserPlus className=\"h-4 w-4 mr-2\" />\r\n          Add User\r\n        </Button>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\r\n                <Input\r\n                  placeholder=\"Search users...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"pl-10 w-64\"\r\n                />\r\n              </div>\r\n              <Select value={selectedRoleFilter} onValueChange={setSelectedRoleFilter}>\r\n                <SelectTrigger className=\"w-40\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"All Roles\">All Roles</SelectItem>\r\n                  {availableRoles.map(role => (\r\n                    <SelectItem key={role.id} value={role.name}>{role.name}</SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead>User</TableHead>\r\n                <TableHead>Role</TableHead>\r\n                <TableHead>Status</TableHead>\r\n                <TableHead>Last Login</TableHead>\r\n                <TableHead>Actions</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {filteredUsers.map((user) => {\r\n                const userRoles = user.roles && user.roles.length > 0 ? user.roles : ['User'];\r\n                return (\r\n                <TableRow key={user.userId}>\r\n                  <TableCell>\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Avatar>\r\n                        <AvatarImage src={user.avatar} />\r\n                        <AvatarFallback>{user.first_name?.charAt(0)}{user.last_name?.charAt(0)}</AvatarFallback>\r\n                      </Avatar>\r\n                      <div>\r\n                        <div className=\"font-medium text-blue-600\">{user.first_name} {user.last_name}</div>\r\n                        <div className=\"text-sm text-gray-600\">{user.email}</div>\r\n                      </div>\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <div className=\"flex flex-wrap gap-1\">\r\n                      {userRoles.map(role => (\r\n                          <Badge \r\n                              key={role}\r\n                              variant=\"secondary\" \r\n                              className={cn(\r\n                                  \"font-normal\",\r\n                                  role === 'Admin' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\r\n                              )}\r\n                          >\r\n                          {role}\r\n                          </Badge>\r\n                      ))}\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Badge \r\n                      variant={'default'}\r\n                      className={cn(user.active === 'true' ? 'bg-green-500' : 'bg-gray-400')}\r\n                    >\r\n                      {user.active === 'true' ? 'Active' : 'Inactive'}\r\n                    </Badge>\r\n                  </TableCell>\r\n                  <TableCell className=\"text-gray-600\">Never</TableCell>\r\n                  <TableCell>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => {\r\n                          handleEditUser(user);\r\n                        }}\r\n                        className=\"text-orange-600 hover:text-orange-700\"\r\n                      >\r\n                        <Edit2 className=\"h-4 w-4\" />\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleDeleteUser(user.userId)}\r\n                        className=\"text-red-600 hover:text-red-700\"\r\n                      >\r\n                        <Trash2 className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </div>\r\n                  </TableCell>\r\n                </TableRow>\r\n              )})}\r\n            </TableBody>\r\n          </Table>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Dialog open={isAddUserOpen} onOpenChange={(open) => {\r\n        if (!open) {\r\n          setIsAddUserOpen(false);\r\n          resetForm();\r\n        }\r\n      }}>\r\n        <DialogContent className=\"max-w-2xl\">\r\n          <DialogHeader>\r\n            <DialogTitle>{editingUser ? 'Edit User' : 'Add New User'}</DialogTitle>\r\n            <DialogDescription>\r\n              {editingUser ? 'Update user information and permissions.' : 'Create a new user account with appropriate permissions.'}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"grid gap-4 py-4 max-h-[60vh] overflow-y-auto pr-6\">\r\n            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n              <Label htmlFor=\"first_name\" className=\"text-right\">\r\n                First Name\r\n              </Label>\r\n              <Input\r\n                id=\"first_name\"\r\n                value={newUser.first_name || ''}\r\n                onChange={(e) => setNewUser({ ...newUser, first_name: e.target.value })}\r\n                className=\"col-span-3\"\r\n                placeholder=\"Enter first name\"\r\n              />\r\n            </div>\r\n            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n              <Label htmlFor=\"last_name\" className=\"text-right\">\r\n                Last Name\r\n              </Label>\r\n              <Input\r\n                id=\"last_name\"\r\n                value={newUser.last_name || ''}\r\n                onChange={(e) => setNewUser({ ...newUser, last_name: e.target.value })}\r\n                className=\"col-span-3\"\r\n                placeholder=\"Enter last name\"\r\n              />\r\n            </div>\r\n            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n              <Label htmlFor=\"email\" className=\"text-right\">\r\n                Email\r\n              </Label>\r\n              <Input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                value={newUser.email || ''}\r\n                onChange={(e) => setNewUser({ ...newUser, email: e.target.value })}\r\n                className=\"col-span-3\"\r\n                placeholder=\"Enter email address\"\r\n                disabled={!!editingUser}\r\n              />\r\n            </div>\r\n             <div className=\"grid grid-cols-4 items-center gap-4\">\r\n              <Label htmlFor=\"password\" className=\"text-right\">\r\n                Password\r\n              </Label>\r\n              <Input\r\n                id=\"password\"\r\n                type=\"password\"\r\n                value={newUser.password || ''}\r\n                onChange={(e) => setNewUser({ ...newUser, password: e.target.value })}\r\n                className=\"col-span-3\"\r\n                placeholder={editingUser ? \"Enter new password (optional)\" : \"Enter password\"}\r\n              />\r\n            </div>\r\n            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n              <Label htmlFor=\"Company\" className=\"text-right\">\r\n                Company\r\n              </Label>\r\n              <Input\r\n                id=\"Company\"\r\n                value={newUser.Company || ''}\r\n                onChange={(e) => setNewUser({ ...newUser, Company: e.target.value })}\r\n                className=\"col-span-3\"\r\n                placeholder=\"Enter company name\"\r\n              />\r\n            </div>\r\n            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n              <Label htmlFor=\"avatar\" className=\"text-right\">\r\n                Avatar URL\r\n              </Label>\r\n              <Input\r\n                id=\"avatar\"\r\n                value={newUser.avatar || ''}\r\n                onChange={(e) => setNewUser({ ...newUser, avatar: e.target.value })}\r\n                className=\"col-span-3\"\r\n                placeholder=\"https://example.com/avatar.png\"\r\n              />\r\n            </div>\r\n             <div className=\"grid grid-cols-4 items-start gap-4\">\r\n              <Label htmlFor=\"bio\" className=\"text-right pt-2\">\r\n                Bio\r\n              </Label>\r\n              <Textarea\r\n                id=\"bio\"\r\n                value={newUser.bio || ''}\r\n                onChange={(e) => setNewUser({ ...newUser, bio: e.target.value })}\r\n                className=\"col-span-3\"\r\n                placeholder=\"Tell us about the user\"\r\n                rows={3}\r\n              />\r\n            </div>\r\n            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n              <Label className=\"text-right\">\r\n                Roles\r\n              </Label>\r\n              <Popover>\r\n                <PopoverTrigger asChild>\r\n                    <Button\r\n                        variant=\"outline\"\r\n                        role=\"combobox\"\r\n                        className=\"col-span-3 justify-between font-normal\"\r\n                    >\r\n                        <span className=\"truncate\">\r\n                            {newUser.roles && newUser.roles.length > 0 ? newUser.roles.join(', ') : \"Select roles...\"}\r\n                        </span>\r\n                        <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\r\n                    </Button>\r\n                </PopoverTrigger>\r\n                <PopoverContent className=\"w-[--radix-popover-trigger-width] p-0\">\r\n                    <ScrollArea className=\"h-48\">\r\n                        <div className=\"p-2 space-y-1\">\r\n                            {availableRoles.map(role => (\r\n                                <div key={role.id} className=\"flex items-center space-x-2 p-2 hover:bg-accent rounded-md\">\r\n                                    <Checkbox \r\n                                        id={`role-${role.id}`}\r\n                                        checked={newUser.roles?.includes(role.name)}\r\n                                        onCheckedChange={() => handleRoleSelection(role.name)}\r\n                                    />\r\n                                    <Label htmlFor={`role-${role.id}`} className=\"font-normal flex-1 cursor-pointer\">\r\n                                        {role.name}\r\n                                    </Label>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </ScrollArea>\r\n                </PopoverContent>\r\n              </Popover>\r\n            </div>\r\n             <div className=\"grid grid-cols-4 items-center gap-4\">\r\n              <Label htmlFor=\"active\" className=\"text-right\">\r\n                Active\r\n              </Label>\r\n              <div className=\"col-span-3\">\r\n                <Switch\r\n                    id=\"active\"\r\n                    checked={newUser.active}\r\n                    onCheckedChange={(checked) => setNewUser({ ...newUser, active: checked })}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => {\r\n              setIsAddUserOpen(false);\r\n              resetForm();\r\n            }}>\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={editingUser ? handleUpdateUser : handleAddUser} className=\"bg-orange-500 hover:bg-orange-600\">\r\n              {editingUser ? 'Update User' : 'Add User'}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 9611, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/RoleManagement.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Button } from './ui/button';\r\nimport { Input } from './ui/input';\r\nimport { Badge } from './ui/badge';\r\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from './ui/dialog';\r\nimport { Label } from './ui/label';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';\r\nimport { Search, Plus, Edit2, Trash2, Users, Loader2 } from 'lucide-react';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { Checkbox } from './ui/checkbox';\r\nimport { Textarea } from './ui/textarea';\r\nimport { roleService, testRoleWebhooks, type Role } from '@/services/roleService';\r\n\r\nconst availablePermissions = [\r\n  'User Management',\r\n  'Role Management',\r\n  'System Settings',\r\n  'View Reports',\r\n  'Export Data',\r\n  'Import Data',\r\n  'Manage Workspaces',\r\n  'AI Tools Access',\r\n  'Admin Panel'\r\n];\r\n\r\nexport function RoleManagement() {\r\n  const [roles, setRoles] = useState<Role[]>([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [isAddRoleOpen, setIsAddRoleOpen] = useState(false);\r\n  const [editingRole, setEditingRole] = useState<Role | null>(null);\r\n  const [newRole, setNewRole] = useState({\r\n    name: '',\r\n    description: '',\r\n    permissions: [] as string[]\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const { toast } = useToast();\r\n\r\n  // Load roles on component mount\r\n  useEffect(() => {\r\n    fetchRoles();\r\n  }, []);\r\n\r\n  const fetchRoles = async () => {\r\n    try {\r\n      setLoading(true);\r\n      console.log('Fetching roles...');\r\n      const rolesData = await roleService.getRoles();\r\n      console.log('Roles data received in component:', rolesData);\r\n      setRoles(rolesData);\r\n      \r\n      // Show info toast if using sample data (check if all roles have mock IDs)\r\n      const isUsingSampleData = rolesData.every(role => role.id.startsWith('sample-') || role.id.startsWith('mock-'));\r\n      if (isUsingSampleData && rolesData.length > 0) {\r\n        toast({\r\n          title: \"Demo Mode\",\r\n          description: \"Showing sample role data. Connect to database for live data.\",\r\n          variant: \"default\"\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching roles:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: error instanceof Error ? error.message : \"Failed to load roles\",\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const filteredRoles = roles.filter(role =>\r\n    (role.name || '').toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    (role.description || '').toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const handleAddRole = async () => {\r\n    if (!newRole.name) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Please provide a role name\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setSubmitting(true);\r\n      const createdRole = await roleService.createRole(newRole);\r\n      setRoles([...roles, createdRole]);\r\n      setNewRole({ name: '', description: '', permissions: [] });\r\n      setIsAddRoleOpen(false);\r\n      \r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Role created successfully\"\r\n      });\r\n    } catch (error) {\r\n      console.error('Error creating role:', error);\r\n      const errorMessage = error instanceof Error ? error.message : \"Failed to create role\";\r\n      const isNetworkError = errorMessage.includes('Network error');\r\n      \r\n      toast({\r\n        title: isNetworkError ? \"Network Error\" : \"Error\",\r\n        description: isNetworkError \r\n          ? \"Unable to reach the server. Please check your connection and try again.\"\r\n          : errorMessage,\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleEditRole = (role: Role) => {\r\n    setEditingRole(role);\r\n    setNewRole({\r\n      name: role.name,\r\n      description: role.description,\r\n      permissions: [...role.permissions]\r\n    });\r\n  };\r\n\r\n  const handleUpdateRole = async () => {\r\n    if (!editingRole || !newRole.name) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Please provide a role name\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setSubmitting(true);\r\n      const updatedRole = await roleService.updateRole({\r\n        id: editingRole.id,\r\n        ...newRole\r\n      });\r\n      \r\n      const updatedRoles = roles.map(role => \r\n        role.id === editingRole.id ? updatedRole : role\r\n      );\r\n      \r\n      setRoles(updatedRoles);\r\n      setEditingRole(null);\r\n      setNewRole({ name: '', description: '', permissions: [] });\r\n      \r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Role updated successfully\"\r\n      });\r\n    } catch (error) {\r\n      console.error('Error updating role:', error);\r\n      const errorMessage = error instanceof Error ? error.message : \"Failed to update role\";\r\n      const isNetworkError = errorMessage.includes('Network error');\r\n      \r\n      toast({\r\n        title: isNetworkError ? \"Network Error\" : \"Error\",\r\n        description: isNetworkError \r\n          ? \"Unable to reach the server. Please check your connection and try again.\"\r\n          : errorMessage,\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteRole = async (roleId: string) => {\r\n    try {\r\n      await roleService.deleteRole(roleId);\r\n      setRoles(roles.filter(role => role.id !== roleId));\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Role deleted successfully\"\r\n      });\r\n    } catch (error) {\r\n      console.error('Error deleting role:', error);\r\n      const errorMessage = error instanceof Error ? error.message : \"Failed to delete role\";\r\n      const isNetworkError = errorMessage.includes('Network error');\r\n      \r\n      toast({\r\n        title: isNetworkError ? \"Network Error\" : \"Error\",\r\n        description: isNetworkError \r\n          ? \"Unable to reach the server. Please check your connection and try again.\"\r\n          : errorMessage,\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const handlePermissionChange = (permission: string, checked: boolean) => {\r\n    if (checked) {\r\n      setNewRole({\r\n        ...newRole,\r\n        permissions: [...newRole.permissions, permission]\r\n      });\r\n    } else {\r\n      setNewRole({\r\n        ...newRole,\r\n        permissions: newRole.permissions.filter(p => p !== permission)\r\n      });\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setNewRole({ name: '', description: '', permissions: [] });\r\n    setEditingRole(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-semibold text-gray-900\">Role Management</h1>\r\n          <p className=\"text-sm text-gray-600 mt-1\">Manage roles and permissions</p>\r\n        </div>\r\n        <Button \r\n          onClick={() => setIsAddRoleOpen(true)} \r\n          className=\"bg-orange-500 hover:bg-orange-600\"\r\n          disabled={loading}\r\n        >\r\n          <Plus className=\"h-4 w-4 mr-2\" />\r\n          Add Role\r\n        </Button>\r\n      </div>\r\n\r\n      <div className=\"flex items-center space-x-4 mb-6\">\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\r\n          <Input\r\n            placeholder=\"Search roles...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"pl-10 w-64\"\r\n            disabled={loading}\r\n          />\r\n        </div>\r\n        <Button\r\n          variant=\"outline\"\r\n          onClick={fetchRoles}\r\n          disabled={loading}\r\n        >\r\n          {loading ? (\r\n            <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n          ) : null}\r\n          Refresh\r\n        </Button>\r\n        <Button\r\n          variant=\"outline\"\r\n          onClick={async () => {\r\n            await testRoleWebhooks();\r\n          }}\r\n          disabled={loading}\r\n        >\r\n          Debug All Webhooks\r\n        </Button>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"flex items-center justify-center py-12\">\r\n          <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n          <span className=\"ml-2\">Loading roles...</span>\r\n        </div>\r\n      ) : filteredRoles.length === 0 ? (\r\n        <div className=\"text-center py-12\">\r\n          <p className=\"text-gray-500\">\r\n            {searchTerm ? 'No roles found matching your search' : 'No roles found'}\r\n          </p>\r\n          {!searchTerm && (\r\n            <Button \r\n              onClick={() => setIsAddRoleOpen(true)} \r\n              className=\"mt-4 bg-orange-500 hover:bg-orange-600\"\r\n            >\r\n              <Plus className=\"h-4 w-4 mr-2\" />\r\n              Create your first role\r\n            </Button>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {filteredRoles.map((role) => (\r\n            <Card key={role.id} className=\"relative\">\r\n              <CardHeader>\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div>\r\n                    <CardTitle className=\"text-lg\">{role.name}</CardTitle>\r\n                    <CardDescription className=\"mt-1\">{role.description}</CardDescription>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleEditRole(role)}\r\n                      className=\"text-orange-600 hover:text-orange-700 p-1 h-auto\"\r\n                    >\r\n                      <Edit2 className=\"h-4 w-4\" />\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleDeleteRole(role.id)}\r\n                      className=\"text-red-600 hover:text-red-700 p-1 h-auto\"\r\n                    >\r\n                      <Trash2 className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Users className=\"h-4 w-4 text-gray-500\" />\r\n                    <span className=\"text-sm text-gray-600\">{role.userCount} users</span>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-700 mb-2\">Permissions:</p>\r\n                    <div className=\"flex flex-wrap gap-1\">\r\n                      {(role.permissions || []).map((permission) => (\r\n                        <Badge\r\n                          key={permission}\r\n                          variant=\"secondary\"\r\n                          className=\"text-xs bg-orange-100 text-orange-800\"\r\n                        >\r\n                          {permission}\r\n                        </Badge>\r\n                      ))}\r\n                      {(!role.permissions || role.permissions.length === 0) && (\r\n                        <span className=\"text-xs text-gray-400\">No permissions assigned</span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"text-xs text-gray-500 pt-2 border-t\">\r\n                    Created {role.createdAt}\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <Dialog open={isAddRoleOpen || editingRole !== null} onOpenChange={(open) => {\r\n        if (!open) {\r\n          setIsAddRoleOpen(false);\r\n          resetForm();\r\n        }\r\n      }}>\r\n        <DialogContent className=\"max-w-2xl\">\r\n          <DialogHeader>\r\n            <DialogTitle>{editingRole ? 'Edit Role' : 'Add New Role'}</DialogTitle>\r\n            <DialogDescription>\r\n              {editingRole ? 'Update role information and permissions.' : 'Create a new role with specific permissions.'}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"grid gap-6 py-4\">\r\n            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n              <Label htmlFor=\"role-name\" className=\"text-right\">\r\n                Role Name\r\n              </Label>\r\n              <Input\r\n                id=\"role-name\"\r\n                value={newRole.name}\r\n                onChange={(e) => setNewRole({ ...newRole, name: e.target.value })}\r\n                className=\"col-span-3\"\r\n                placeholder=\"Enter role name\"\r\n                disabled={submitting}\r\n              />\r\n            </div>\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n              <Label htmlFor=\"role-description\" className=\"text-right pt-2\">\r\n                Description\r\n              </Label>\r\n              <Textarea\r\n                id=\"role-description\"\r\n                value={newRole.description}\r\n                onChange={(e) => setNewRole({ ...newRole, description: e.target.value })}\r\n                className=\"col-span-3\"\r\n                placeholder=\"Enter role description\"\r\n                rows={3}\r\n                disabled={submitting}\r\n              />\r\n            </div>\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n              <Label className=\"text-right pt-2\">Permissions</Label>\r\n              <div className=\"col-span-3 space-y-3\">\r\n                {availablePermissions.map((permission) => (\r\n                  <div key={permission} className=\"flex items-center space-x-2\">\r\n                    <Checkbox\r\n                      id={permission}\r\n                      checked={newRole.permissions.includes(permission)}\r\n                      onCheckedChange={(checked) => handlePermissionChange(permission, checked as boolean)}\r\n                      disabled={submitting}\r\n                    />\r\n                    <Label htmlFor={permission} className=\"text-sm font-normal\">\r\n                      {permission}\r\n                    </Label>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button \r\n              variant=\"outline\" \r\n              onClick={() => {\r\n                setIsAddRoleOpen(false);\r\n                resetForm();\r\n              }}\r\n              disabled={submitting}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button \r\n              onClick={editingRole ? handleUpdateRole : handleAddRole} \r\n              className=\"bg-orange-500 hover:bg-orange-600\"\r\n              disabled={submitting}\r\n            >\r\n              {submitting ? (\r\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n              ) : null}\r\n              {editingRole ? 'Update Role' : 'Create Role'}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 10431, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/services/companyService.ts"],"sourcesContent":["import axios from 'axios';\r\nimport type { Company } from '@/lib/types';\r\n\r\nconst getCompanyWebhookUrl = () => {\r\n    const url = process.env.NEXT_PUBLIC_GET_COMPANY_WEBHOOK;\r\n    if (!url) {\r\n        console.warn('NEXT_PUBLIC_GET_COMPANY_WEBHOOK is not configured.');\r\n        return null;\r\n    }\r\n    return url;\r\n};\r\n\r\nconst getUpsertWebhookUrl = () => {\r\n    const url = process.env.NEXT_PUBLIC_UPSERT_WEBHOOK;\r\n    if (!url) {\r\n        console.warn('NEXT_PUBLIC_UPSERT_WEBHOOK is not configured.');\r\n        return null;\r\n    }\r\n    return url;\r\n};\r\n\r\nexport async function getAllCompanies(): Promise<Company[]> {\r\n    const webhookUrl = getCompanyWebhookUrl();\r\n    if (!webhookUrl) {\r\n        return [];\r\n    }\r\n\r\n    try {\r\n        const response = await axios.get(webhookUrl, { params: { id: 'all' } });\r\n        \r\n        if (response.status === 200 && Array.isArray(response.data)) {\r\n            return response.data.map(company => ({\r\n                ...company,\r\n                id: company.id || company._id?.$oid\r\n            }));\r\n        }\r\n        \r\n        // Handle cases where the API returns an object with a 'data' or other property\r\n        if (response.status === 200 && response.data && typeof response.data === 'object') {\r\n            const companyArray = response.data.data || response.data.companies || response.data.items || response.data.result;\r\n            if (Array.isArray(companyArray)) {\r\n                return companyArray.map(company => ({\r\n                    ...company,\r\n                    id: company.id || company._id?.$oid\r\n                }));\r\n            }\r\n        }\r\n        \r\n        console.warn(\"Webhook response for all companies was not in a recognized array format. Returning empty array.\", response.data);\r\n        return [];\r\n    } catch (error) {\r\n        console.error('Failed to get all companies from webhook:', error);\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function getCompanyById(companyId: string): Promise<Company | null> {\r\n    const webhookUrl = getUpsertWebhookUrl();\r\n    if (!webhookUrl) {\r\n        return null;\r\n    }\r\n\r\n    try {\r\n        const response = await axios.get(webhookUrl, { params: { id: companyId } });\r\n        \r\n        if (response.status === 200 && response.data) {\r\n            const companyData = Array.isArray(response.data) ? response.data[0] : response.data;\r\n            if (companyData) {\r\n                return {\r\n                    ...companyData,\r\n                    id: companyData.id || companyData._id?.$oid\r\n                };\r\n            }\r\n        }\r\n        \r\n        console.warn(`No company found for companyId: ${companyId}`);\r\n        return null;\r\n    } catch (error) {\r\n        if (axios.isAxiosError(error)) {\r\n            if (error.response?.status === 404) {\r\n                console.warn(`Company not found (id: ${companyId})`);\r\n                return null;\r\n            } else {\r\n                console.error(`Failed to fetch company by ID ${companyId}:`, error.message);\r\n            }\r\n        } else {\r\n            console.error('An unexpected error occurred:', error);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function updateCompany(companyData: Partial<Company>): Promise<boolean> {\r\n    const webhookUrl = getUpsertWebhookUrl();\r\n    if (!webhookUrl) {\r\n        console.error('Cannot update company: NEXT_PUBLIC_UPSERT_WEBHOOK is not configured.');\r\n        return false;\r\n    }\r\n\r\n    try {\r\n        const response = await axios.post(webhookUrl, companyData);\r\n        return response.status === 200 || response.status === 201;\r\n    } catch (error) {\r\n        console.error('Failed to update company via webhook:', error);\r\n        return false;\r\n    }\r\n}"],"names":[],"mappings":";;;;;AAAA;;AAGA,MAAM,uBAAuB;IACzB,MAAM;IACN,uCAAU;;IAGV;IACA,OAAO;AACX;AAEA,MAAM,sBAAsB;IACxB,MAAM;IACN,uCAAU;;IAGV;IACA,OAAO;AACX;AAEO,eAAe;IAClB,MAAM,aAAa;IACnB,IAAI,CAAC,YAAY;QACb,OAAO,EAAE;IACb;IAEA,IAAI;QACA,MAAM,WAAW,MAAM,qIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,YAAY;YAAE,QAAQ;gBAAE,IAAI;YAAM;QAAE;QAErE,IAAI,SAAS,MAAM,KAAK,OAAO,MAAM,OAAO,CAAC,SAAS,IAAI,GAAG;YACzD,OAAO,SAAS,IAAI,CAAC,GAAG,CAAC,CAAA,UAAW,CAAC;oBACjC,GAAG,OAAO;oBACV,IAAI,QAAQ,EAAE,IAAI,QAAQ,GAAG,EAAE;gBACnC,CAAC;QACL;QAEA,+EAA+E;QAC/E,IAAI,SAAS,MAAM,KAAK,OAAO,SAAS,IAAI,IAAI,OAAO,SAAS,IAAI,KAAK,UAAU;YAC/E,MAAM,eAAe,SAAS,IAAI,CAAC,IAAI,IAAI,SAAS,IAAI,CAAC,SAAS,IAAI,SAAS,IAAI,CAAC,KAAK,IAAI,SAAS,IAAI,CAAC,MAAM;YACjH,IAAI,MAAM,OAAO,CAAC,eAAe;gBAC7B,OAAO,aAAa,GAAG,CAAC,CAAA,UAAW,CAAC;wBAChC,GAAG,OAAO;wBACV,IAAI,QAAQ,EAAE,IAAI,QAAQ,GAAG,EAAE;oBACnC,CAAC;YACL;QACJ;QAEA,QAAQ,IAAI,CAAC,mGAAmG,SAAS,IAAI;QAC7H,OAAO,EAAE;IACb,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,6CAA6C;QAC3D,OAAO,EAAE;IACb;AACJ;AAEO,eAAe,eAAe,SAAiB;IAClD,MAAM,aAAa;IACnB,IAAI,CAAC,YAAY;QACb,OAAO;IACX;IAEA,IAAI;QACA,MAAM,WAAW,MAAM,qIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,YAAY;YAAE,QAAQ;gBAAE,IAAI;YAAU;QAAE;QAEzE,IAAI,SAAS,MAAM,KAAK,OAAO,SAAS,IAAI,EAAE;YAC1C,MAAM,cAAc,MAAM,OAAO,CAAC,SAAS,IAAI,IAAI,SAAS,IAAI,CAAC,EAAE,GAAG,SAAS,IAAI;YACnF,IAAI,aAAa;gBACb,OAAO;oBACH,GAAG,WAAW;oBACd,IAAI,YAAY,EAAE,IAAI,YAAY,GAAG,EAAE;gBAC3C;YACJ;QACJ;QAEA,QAAQ,IAAI,CAAC,CAAC,gCAAgC,EAAE,WAAW;QAC3D,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,IAAI,qIAAA,CAAA,UAAK,CAAC,YAAY,CAAC,QAAQ;YAC3B,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;gBAChC,QAAQ,IAAI,CAAC,CAAC,uBAAuB,EAAE,UAAU,CAAC,CAAC;gBACnD,OAAO;YACX,OAAO;gBACH,QAAQ,KAAK,CAAC,CAAC,8BAA8B,EAAE,UAAU,CAAC,CAAC,EAAE,MAAM,OAAO;YAC9E;QACJ,OAAO;YACH,QAAQ,KAAK,CAAC,iCAAiC;QACnD;QACA,OAAO;IACX;AACJ;AAEO,eAAe,cAAc,WAA6B;IAC7D,MAAM,aAAa;IACnB,IAAI,CAAC,YAAY;QACb,QAAQ,KAAK,CAAC;QACd,OAAO;IACX;IAEA,IAAI;QACA,MAAM,WAAW,MAAM,qIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,YAAY;QAC9C,OAAO,SAAS,MAAM,KAAK,OAAO,SAAS,MAAM,KAAK;IAC1D,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,yCAAyC;QACvD,OAAO;IACX;AACJ","debugId":null}},
    {"offset": {"line": 10542, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/CompanyManagement.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Button } from './ui/button';\r\nimport { Input } from './ui/input';\r\nimport { Badge } from './ui/badge';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from './ui/table';\r\nimport { Card, CardContent, CardHeader } from './ui/card';\r\nimport { Search, Building, Edit2, Trash2, Loader2 } from 'lucide-react';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { getAllCompanies } from '@/services/companyService';\r\nimport type { Company } from '@/lib/types';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface CompanyManagementProps {\r\n  onEditCompany?: (company: Company) => void;\r\n}\r\n\r\nexport function CompanyManagement({ onEditCompany }: CompanyManagementProps) {\r\n  const [companies, setCompanies] = useState<Company[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const { toast } = useToast();\r\n  \r\n  const fetchCompanies = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const fetchedCompanies = await getAllCompanies();\r\n      setCompanies(fetchedCompanies);\r\n    } catch (error) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to fetch companies.\",\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCompanies();\r\n  }, []);\r\n\r\n  const filteredCompanies = companies.filter(company => {\r\n    const matchesSearch = \r\n      company.company_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      company.id.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      company.chat_bot_name.toLowerCase().includes(searchTerm.toLowerCase());\r\n    return matchesSearch;\r\n  });\r\n\r\n  const handleEditCompany = (company: Company) => {\r\n    onEditCompany?.(company);\r\n  };\r\n\r\n  const handleDeleteCompany = (companyId: string) => {\r\n    // This would call a deleteCompany service in a real app.\r\n    setCompanies(companies.filter(company => company.id !== companyId));\r\n    toast({\r\n      title: \"Success\",\r\n      description: \"Company deleted successfully (client-side). Implement backend delete call.\"\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-64\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-semibold text-gray-900\">Company Management</h1>\r\n          <p className=\"text-sm text-gray-600 mt-1\">Manage company accounts and configurations</p>\r\n        </div>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\r\n                <Input\r\n                  placeholder=\"Search companies...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"pl-10 w-64\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead>Company</TableHead>\r\n                <TableHead>Bot Name</TableHead>\r\n                <TableHead>Users</TableHead>\r\n                <TableHead>Environment</TableHead>\r\n                <TableHead>LLM Config</TableHead>\r\n                <TableHead>Actions</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {filteredCompanies.map((company) => (\r\n                <TableRow key={company.id}>\r\n                  <TableCell>\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center\">\r\n                        <Building className=\"h-5 w-5 text-blue-600\" />\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"font-medium text-blue-600\">{company.company_name}</div>\r\n                        <div className=\"text-sm text-gray-600\">ID: {company.id}</div>\r\n                      </div>\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <div className=\"font-medium\">{company.chat_bot_name}</div>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <div className=\"text-center\">\r\n                      <span className=\"text-lg font-medium\">{company.user_count}</span>\r\n                      <div className=\"text-xs text-gray-500\">users</div>\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Badge \r\n                      variant={company.demo_environment ? 'secondary' : 'default'}\r\n                      className={cn(\r\n                        company.demo_environment ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'\r\n                      )}\r\n                    >\r\n                      {company.demo_environment ? 'Demo' : 'Production'}\r\n                    </Badge>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Badge variant=\"outline\">\r\n                      {company.llm_config}\r\n                    </Badge>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleEditCompany(company)}\r\n                        className=\"text-orange-600 hover:text-orange-700\"\r\n                      >\r\n                        <Edit2 className=\"h-4 w-4\" />\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleDeleteCompany(company.id)}\r\n                        className=\"text-red-600 hover:text-red-700\"\r\n                      >\r\n                        <Trash2 className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </div>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 10999, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/components/Dashboard.tsx"],"sourcesContent":["\r\n\r\n'use client';\r\n\r\nimport { useState, useEffect, useRef, useCallback } from 'react';\r\nimport type { Widget, SavedQuery, Problem, Incident, Change, User, Workspace } from '@/lib/types';\r\nimport { generateWidgetFromQuery } from '@/ai/flows/generate-widget-from-query';\r\nimport { agentSpecificWidget } from '@/ai/flows/agent-specific-widget';\r\nimport { saveQueryWithVoiceText } from '@/ai/flows/save-query-with-voice-text';\r\nimport { generateOverviewSummary } from '@/ai/flows/generate-overview-summary';\r\nimport { Sidebar, useSidebar } from '@/components/ui/sidebar';\r\nimport { AppSidebar } from '@/components/layout/AppSidebar';\r\nimport { WidgetContainer, WIDGET_INITIAL_HEIGHT, WIDGET_INITIAL_WIDTH } from '@/components/widgets/WidgetContainer';\r\nimport { ChatInput } from '@/components/ChatInput';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { getIncidents } from '@/services/servicenow';\r\nimport { getUserProfile, getCachedUserData, updateCachedWorkspaces, getCachedWorkspace } from '@/services/userService';\r\nimport { getSampleData } from '@/services/sampleDataService';\r\nimport { getWorkspaces, saveWorkspace, deleteWorkspace } from '@/services/workspaceService';\r\nimport { Menu, Sparkle, Loader2, Save, Edit, X as XIcon, Disc, Pencil, Clock } from 'lucide-react';\r\nimport { Button } from './ui/button';\r\nimport Image from 'next/image';\r\nimport { cn } from '@/lib/utils';\r\nimport { Dialog, DialogClose, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from './ui/dialog';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { useWorkspaceSync } from '@/hooks/use-workspace-sync';\r\nimport { BaseWidget } from './widgets/BaseWidget';\r\nimport { ScrollArea } from './ui/scroll-area';\r\nimport { Input } from './ui/input';\r\nimport { Label } from './ui/label';\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from './ui/tooltip';\r\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetDescription } from './ui/sheet';\r\nimport { Profile } from './Profile';\r\nimport { Settings } from './Settings';\r\nimport { AIStore } from './AIStore';\r\nimport { PromptCatalog } from './PromptCatalog';\r\nimport { UserManagement } from './UserManagement';\r\nimport { RoleManagement } from './RoleManagement';\r\nimport { CompanyManagement } from './CompanyManagement';\r\nimport { CompanyEdit } from './CompanyEdit';\r\n\r\n\r\ntype ViewType = 'dashboard' | 'ai-store' | 'prompt-catalog' | 'profile' | 'settings' | 'user-management' | 'role-management' | 'company-management' | 'company-edit';\r\n\r\nexport function Dashboard() {\r\n  const [currentView, setCurrentView] = useState<ViewType>('dashboard');\r\n  const [widgets, setWidgets] = useState<Widget[]>([]);\r\n  const [favorites, setFavorites] = useState<Widget[]>([]);\r\n  const [savedQueries, setSavedQueries] = useState<SavedQuery[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loadingWorkspaces, setLoadingWorkspaces] = useState(true);\r\n  const { toast } = useToast();\r\n  const { state, openMobile, setOpenMobile } = useSidebar();\r\n  const isMobile = useIsMobile();\r\n  const [nextZIndex, setNextZIndex] = useState(1);\r\n  const [lastRestorePosition, setLastRestorePosition] = useState({ x: 0, y: 0 });\r\n  const sidebarRef = useRef<HTMLDivElement>(null);\r\n  const chatInputRef = useRef<HTMLDivElement>(null);\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [selectedCompany, setSelectedCompany] = useState<any>(null);\r\n\r\n  const [workspaces, setWorkspaces] = useState<Workspace[]>([]);\r\n  const [openWorkspaces, setOpenWorkspaces] = useState<Workspace[]>([]);\r\n  const [currentWorkspaceId, setCurrentWorkspaceId] = useState<string | null>(null);\r\n\r\n  const [isWorkspaceModalOpen, setIsWorkspaceModalOpen] = useState(false);\r\n  const [workspaceName, setWorkspaceName] = useState('');\r\n  const [workspaceToEdit, setWorkspaceToEdit] = useState<Workspace | null>(null);\r\n  const [workspaceAction, setWorkspaceAction] = useState<'create' | 'edit' | 'load' | 'forget' | 'save' | null>(null);\r\n  const [isWorkspaceListOpen, setIsWorkspaceListOpen] = useState(false);\r\n  \r\n  const [isDraggingWidget, setIsDraggingWidget] = useState(false);\r\n\r\n  const activeWorkspace = openWorkspaces.find(ws => ws.workspaceId === currentWorkspaceId) || null;\r\n  const MAX_OPEN_SESSIONS = parseInt(process.env.NEXT_PUBLIC_WORKSPACE_OPEN_SESSIONS || '3', 10);\r\n  \r\n  // Workspace synchronization\r\n  const {\r\n    isChecking: isSyncingWorkspaces,\r\n    lastSyncTime,\r\n    syncNow: syncWorkspacesNow,\r\n    enabled: syncEnabled\r\n  } = useWorkspaceSync({\r\n    user,\r\n    workspaces,\r\n    onWorkspacesChanged: (updatedWorkspaces) => {\r\n      setWorkspaces(updatedWorkspaces);\r\n    },\r\n    onWorkspacesDeleted: (deletedIds) => {\r\n      // Remove deleted workspaces from open sessions\r\n      const remainingOpen = openWorkspaces.filter(ws => !deletedIds.includes(ws.workspaceId));\r\n      setOpenWorkspaces(remainingOpen);\r\n      \r\n      // If current workspace was deleted, switch to first available or clear\r\n      if (currentWorkspaceId && deletedIds.includes(currentWorkspaceId)) {\r\n        if (remainingOpen.length > 0) {\r\n          setCurrentWorkspaceId(remainingOpen[0].workspaceId);\r\n          loadWorkspaceUI(remainingOpen[0]);\r\n        } else {\r\n          setCurrentWorkspaceId(null);\r\n          setWidgets([]);\r\n        }\r\n      }\r\n    },\r\n    enabled: process.env.NEXT_PUBLIC_WORKSPACE_SYNC_ENABLED !== 'false',\r\n    intervalMs: parseInt(process.env.NEXT_PUBLIC_WORKSPACE_SYNC_INTERVAL || '30000', 10),\r\n    showNotifications: process.env.NEXT_PUBLIC_WORKSPACE_SYNC_NOTIFICATIONS !== 'false'\r\n  });\r\n\r\n  const loadUserData = () => {\r\n    // First try to get cached data from login\r\n    const cachedData = getCachedUserData();\r\n    \r\n    if (cachedData.user && cachedData.workspaces.length >= 0) {\r\n      // Use cached data immediately\r\n      setUser(cachedData.user);\r\n      setWorkspaces(cachedData.workspaces);\r\n      setLoadingWorkspaces(false);\r\n      return;\r\n    }\r\n\r\n    // Fallback to fetching if no cached data (shouldn't happen after login)\r\n    fetchUserDataFallback();\r\n  };\r\n\r\n  const fetchUserDataFallback = async () => {\r\n    const session = localStorage.getItem('session');\r\n    if (!session) return;\r\n    const userEmail = JSON.parse(session).email;\r\n    if (!userEmail) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      const profile = await getUserProfile(userEmail);\r\n      setUser(profile);\r\n\r\n      if (profile) {\r\n        const workspacesData = await getWorkspaces(profile.userId);\r\n        setWorkspaces(workspacesData);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch user data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n      setLoadingWorkspaces(false);\r\n    }\r\n  };\r\n  \r\n  useEffect(() => {\r\n    loadUserData();\r\n  }, []);\r\n\r\n  const useDebouncedEffect = (effect: () => void, deps: any[], delay: number) => {\r\n      const callback = useCallback(effect, deps);\r\n      useEffect(() => {\r\n          const handler = setTimeout(() => {\r\n              callback();\r\n          }, delay);\r\n\r\n          return () => {\r\n              clearTimeout(handler);\r\n          };\r\n      }, [callback, delay]);\r\n  };\r\n    \r\n  // Debounced auto-save for workspace changes\r\n  useDebouncedEffect(() => {\r\n      if (activeWorkspace && user && !loading && !isWorkspaceModalOpen && !isDraggingWidget) {\r\n        handleQuickSaveWorkspace(true);\r\n      }\r\n  }, [widgets, activeWorkspace, user, isDraggingWidget], 1000);\r\n  \r\n  const handleProfileUpdate = () => {\r\n    // Refresh user data from server and update cache\r\n    fetchUserDataFallback();\r\n  };\r\n\r\n  const handleViewChange = (view: ViewType) => {\r\n    setCurrentView(view);\r\n  };\r\n\r\n  const handleEditCompany = (company: any) => {\r\n    setSelectedCompany(company);\r\n    setCurrentView('company-edit');\r\n  };\r\n\r\n  const handleBackToCompanyList = () => {\r\n    setSelectedCompany(null);\r\n    setCurrentView('company-management');\r\n  };\r\n\r\n  const handleMainWorkspace = () => {\r\n    // Switch to dashboard view\r\n    setCurrentView('dashboard');\r\n    \r\n    // Clear current workspace (no active workspace selected)\r\n    setCurrentWorkspaceId(null);\r\n    \r\n    // Minimize all current widgets\r\n    setWidgets(prevWidgets => \r\n      prevWidgets.map(widget => ({ ...widget, isMinimized: true }))\r\n    );\r\n    \r\n    // Keep all open workspaces - just deselect the current one\r\n    // This preserves the workspace buttons at the top\r\n  };\r\n\r\n  const renderDashboardView = () => (\r\n    <main className=\"absolute inset-0 z-0\">\r\n      {isMobile ? (\r\n        <div className=\"p-4 space-y-4\" style={{ paddingTop: mobileHeaderHeight, paddingBottom: chatInputAreaHeight }}>\r\n          {normalWidgets.map(widget => (\r\n            <div key={widget.id} className=\"h-auto\">\r\n              <BaseWidget\r\n                widget={widget}\r\n                removeWidget={removeWidget}\r\n                updateEntity={updateEntity}\r\n                bringToFront={bringToFront}\r\n                toggleMinimizeWidget={toggleMinimizeWidget}\r\n                toggleFavoriteWidget={toggleFavoriteWidget}\r\n              />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <WidgetContainer \r\n          widgets={normalWidgets} \r\n          removeWidget={removeWidget} \r\n          updateEntity={updateEntity}\r\n          bringToFront={bringToFront}\r\n          toggleMinimizeWidget={toggleMinimizeWidget}\r\n          toggleFavoriteWidget={toggleFavoriteWidget}\r\n          updateWidgetPosition={updateWidgetPosition}\r\n          updateWidgetDimensions={updateWidgetDimensions}\r\n          sidebarState={state}\r\n          sidebarRef={sidebarRef}\r\n          chatInputRef={chatInputRef}\r\n          setIsDragging={setIsDraggingWidget}\r\n        />\r\n      )}\r\n      \r\n      <div \r\n        className=\"absolute inset-0 flex flex-col items-center pointer-events-none\" \r\n        style={{ paddingLeft: !isMobile && sidebarRef.current && state === 'expanded' ? `${sidebarRef.current.offsetWidth}px`: '0' }}\r\n      >\r\n        {normalWidgets.length === 0 && (\r\n          <div className=\"flex flex-col h-full w-full max-w-xl mx-auto items-center text-center p-4\" style={{ paddingBottom: isMobile ? chatInputAreaHeight : '6rem' }}>\r\n            <div className=\"flex-grow flex flex-col justify-center items-center\">\r\n              <Image\r\n                src=\"/bablephish_logo.svg\"\r\n                alt=\"BabelPhish Logo\"\r\n                width={100}\r\n                height={100}\r\n                className=\"mx-auto mb-6 opacity-50\"\r\n              />\r\n              <h1 className=\"text-2xl font-bold text-muted-foreground mb-4\">\r\n                Welcome to BabelPhish\r\n              </h1>\r\n              <p className=\"text-muted-foreground mb-8 max-w-md\">\r\n                Start by typing a command or query below to create your first widget.\r\n              </p>\r\n              \r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 w-full max-w-lg pointer-events-auto\">\r\n                <p className=\"text-sm text-muted-foreground mb-4 text-center col-span-full\">Quick browse items</p>\r\n                <div className=\"space-y-2 col-span-full\">\r\n                  {starterPrompts.map((prompt, index) => {\r\n                    const Icon = prompt.icon;\r\n                    return (\r\n                      <Button \r\n                        key={index}\r\n                        variant=\"link\"\r\n                        className=\"w-full justify-start h-auto py-3 px-4 text-left text-sm bg-transparent pointer-events-auto rounded-lg\"\r\n                        onClick={() => handleStarterPrompt(prompt.query)}\r\n                      >\r\n                        <Icon className=\"mr-3 text-primary\" size={20}/>\r\n                        {prompt.text}\r\n                      </Button>\r\n                    )\r\n                  })}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </main>\r\n  );\r\n\r\n  const renderCurrentView = () => {\r\n    switch (currentView) {\r\n      case 'dashboard':\r\n        return renderDashboardView();\r\n      case 'ai-store':\r\n        return (\r\n          <div className=\"flex-1 overflow-y-auto p-6\">\r\n            <AIStore />\r\n          </div>\r\n        );\r\n      case 'prompt-catalog':\r\n        return (\r\n          <div className=\"flex-1 overflow-y-auto p-6\">\r\n            <PromptCatalog />\r\n          </div>\r\n        );\r\n      case 'profile':\r\n        return (\r\n          <div className=\"flex-1 overflow-y-auto p-6\">\r\n            <div className=\"max-w-4xl mx-auto\">\r\n              <Profile user={user} onProfileUpdate={handleProfileUpdate} isPage={true} />\r\n            </div>\r\n          </div>\r\n        );\r\n      case 'settings':\r\n        return (\r\n          <div className=\"flex-1 overflow-y-auto p-6\">\r\n            <div className=\"max-w-4xl mx-auto\">\r\n              <Settings isPage={true} />\r\n            </div>\r\n          </div>\r\n        );\r\n      case 'user-management':\r\n        return (\r\n          <div className=\"flex-1 overflow-y-auto p-6\">\r\n            <div className=\"max-w-6xl mx-auto\">\r\n              <UserManagement />\r\n            </div>\r\n          </div>\r\n        );\r\n      case 'role-management':\r\n        return (\r\n          <div className=\"flex-1 overflow-y-auto p-6\">\r\n            <div className=\"max-w-6xl mx-auto\">\r\n              <RoleManagement />\r\n            </div>\r\n          </div>\r\n        );\r\n      case 'company-management':\r\n        return (\r\n          <div className=\"flex-1 overflow-y-auto p-6\">\r\n            <div className=\"max-w-6xl mx-auto\">\r\n              <CompanyManagement onEditCompany={handleEditCompany} />\r\n            </div>\r\n          </div>\r\n        );\r\n      case 'company-edit':\r\n        return (\r\n          <div className=\"flex-1 overflow-y-auto p-6\">\r\n            <CompanyEdit \r\n              company={selectedCompany} \r\n              onBack={handleBackToCompanyList}\r\n              onSave={handleBackToCompanyList}\r\n            />\r\n          </div>\r\n        );\r\n      default:\r\n        return renderDashboardView();\r\n    }\r\n  };\r\n  \r\n  const fetchWorkspaces = async (userId: string, forceRefresh = false) => {\r\n    if (!userId) return;\r\n    \r\n    // Use cached data first if not forcing refresh\r\n    if (!forceRefresh) {\r\n      const { workspaces: cachedWorkspaces } = getCachedUserData();\r\n      if (cachedWorkspaces.length > 0) {\r\n        setWorkspaces(cachedWorkspaces);\r\n        setLoadingWorkspaces(false);\r\n        return;\r\n      }\r\n    }\r\n    \r\n    setLoadingWorkspaces(true);\r\n    try {\r\n        const data = await getWorkspaces(userId);\r\n        setWorkspaces(data);\r\n        updateCachedWorkspaces(data);\r\n    } catch (error) {\r\n        console.error(\"Failed to fetch workspaces\", error);\r\n    } finally {\r\n        setLoadingWorkspaces(false);\r\n    }\r\n  };\r\n  \r\n  const refreshWorkspaces = () => {\r\n    if (user) {\r\n      syncWorkspacesNow();\r\n    }\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n    if (!activeWorkspace) {\r\n      setWidgets([]);\r\n    }\r\n  }, [activeWorkspace]);\r\n  \r\n  const bringToFront = (id: string, isSummaryOrChat?: boolean) => {\r\n    setWidgets(prevWidgets => {\r\n      const currentMaxZ = prevWidgets.reduce((max, w) => Math.max(max, w.zIndex), 0) || 1;\r\n      const newZIndex = isSummaryOrChat ? 100 : currentMaxZ + 1;\r\n  \r\n      return prevWidgets.map(w => w.id === id ? { ...w, zIndex: newZIndex } : w);\r\n    });\r\n  };\r\n  \r\n  const createWidgetFromDefinition = (widgetDef: Omit<Widget, 'id' | 'isMinimized'>, id?: string) => {\r\n    const newZIndex = nextZIndex;\r\n    setNextZIndex(newZIndex + 1);\r\n\r\n    const sidebarWidth = state === 'expanded' && sidebarRef.current ? sidebarRef.current.offsetWidth : 0;\r\n    const workspaceWidth = window.innerWidth - sidebarWidth;\r\n    const workspaceHeight = window.innerHeight;\r\n    \r\n    // Add some randomness to avoid perfect stacking\r\n    const randomOffsetX = Math.floor(Math.random() * 50) - 25; \r\n    const randomOffsetY = Math.floor(Math.random() * 50) - 25;\r\n\r\n    const initialX = sidebarWidth + (workspaceWidth / 2) - (WIDGET_INITIAL_WIDTH / 2) + randomOffsetX;\r\n    const initialY = (workspaceHeight / 2) - (WIDGET_INITIAL_HEIGHT / 2) + randomOffsetY;\r\n    \r\n    const newWidget: Widget = {\r\n      ...widgetDef,\r\n      id: id || Date.now().toString(),\r\n      isMinimized: false,\r\n      x: widgetDef.x ?? initialX,\r\n      y: widgetDef.y ?? initialY,\r\n      width: widgetDef.width ?? WIDGET_INITIAL_WIDTH,\r\n      height: widgetDef.height ?? WIDGET_INITIAL_HEIGHT,\r\n    };\r\n    \r\n    setWidgets((prev) => [...prev, newWidget]);\r\n  }\r\n\r\n  const handleCreateWidget = async (query: string) => {\r\n    if (!query.trim()) return;\r\n    setLoading(true);\r\n    const lowerCaseQuery = query.toLowerCase();\r\n\r\n    let newWidgetDef: Omit<Widget, 'id' | 'zIndex' | 'isMinimized'> | null = null;\r\n    \r\n    try {\r\n      if (lowerCaseQuery.includes('@servicenow')) {\r\n        const incidentData = await getIncidents();\r\n        newWidgetDef = {\r\n          query: 'ServiceNow Records',\r\n          data: incidentData,\r\n          agent: { agentType: 'Incident Agent', agentBehavior: 'Manages and resolves incidents.' },\r\n          type: 'incident',\r\n          isFavorited: false,\r\n        };\r\n      } else if (lowerCaseQuery.includes('@incident')) {\r\n        const incidentData = await getSampleData('incident');\r\n        newWidgetDef = {\r\n          query: 'Incidents',\r\n          data: incidentData,\r\n          agent: { agentType: 'Incident Agent', agentBehavior: 'Manages and resolves incidents.' },\r\n          type: 'incident',\r\n          isFavorited: false,\r\n        };\r\n\r\n      } else if (lowerCaseQuery.includes('@change')) {\r\n         const changeData = await getSampleData('change_request');\r\n        newWidgetDef = {\r\n          query: 'Changes',\r\n          data: changeData,\r\n          agent: { agentType: 'Change Agent', agentBehavior: 'Manages and tracks change requests.' },\r\n          type: 'change',\r\n          isFavorited: false,\r\n        };\r\n\r\n      } else if (lowerCaseQuery.includes('@problem')) {\r\n        const problemData = await getSampleData('problem');\r\n        newWidgetDef = {\r\n          query: 'Problem',\r\n          data: problemData,\r\n          agent: { agentType: 'Problem Agent', agentBehavior: 'Manages and resolves problems.' },\r\n          type: 'problem',\r\n          isFavorited: false,\r\n        };\r\n      } else if (lowerCaseQuery.includes('@summary')) {\r\n        const allWidgetData = widgets.map(w => ({ type: w.type, query: w.query, data: w.data }));\r\n        const result = await generateOverviewSummary({ widgetData: allWidgetData });\r\n  \r\n        newWidgetDef = {\r\n          query: 'Overview Summary',\r\n          data: result.summary,\r\n          agent: { agentType: 'Summary Agent', agentBehavior: 'Provides a summary of all open widgets.' },\r\n          type: 'generic',\r\n          isFavorited: false,\r\n        };\r\n      } else {\r\n        const allWorkspacesData = openWorkspaces.flatMap(ws => {\r\n            try {\r\n              const widgetsInWorkspace: Widget[] = JSON.parse(ws.workspace_data);\r\n              return widgetsInWorkspace.map(w => ({ type: w.type, query: w.query, data: w.data }));\r\n            } catch (e) {\r\n              console.error(`Could not parse workspace data for ${ws.workspace_name}`, e);\r\n              return [];\r\n            }\r\n          });\r\n\r\n          const result = await generateWidgetFromQuery({ query, workspaceData: allWorkspacesData });\r\n          \r\n          if (result.workspace_to_load) {\r\n            const workspaceToLoad = workspaces.find(ws => ws.workspace_name.toLowerCase().includes(result.workspace_to_load!.toLowerCase()));\r\n            if (workspaceToLoad) {\r\n              setWorkspaceAction('load');\r\n              handleWorkspaceListSelect(workspaceToLoad);\r\n            } else {\r\n              toast({ variant: 'destructive', title: 'Not Found', description: `Workspace \"${result.workspace_to_load}\" not found.` });\r\n            }\r\n          }\r\n          \r\n          const agent = await agentSpecificWidget({ widgetData: result.answer });\r\n    \r\n          newWidgetDef = {\r\n            query: query,\r\n            data: result.answer,\r\n            agent: agent,\r\n            type: 'generic',\r\n            isFavorited: false,\r\n          };\r\n      }\r\n\r\n      if (newWidgetDef) {\r\n        const fullWidgetDef = {\r\n          ...newWidgetDef,\r\n          zIndex: newWidgetDef.type === 'generic' ? 100 : nextZIndex,\r\n        };\r\n        createWidgetFromDefinition(fullWidgetDef);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to create widget:', error);\r\n      toast({\r\n        variant: 'destructive',\r\n        title: 'Error',\r\n        description: 'Could not create widget. The AI service may be temporarily unavailable. Please try again later.',\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveQuery = async (query: string, name: string) => {\r\n    if (!query.trim() || !name.trim()) return;\r\n    try {\r\n      const result = await saveQueryWithVoiceText({ queryName: name, queryText: query });\r\n      if (result.success) {\r\n        setSavedQueries(prev => [...prev, { name, query }]);\r\n        toast({\r\n          title: 'Query Saved',\r\n          description: `\"${name}\" has been saved successfully.`,\r\n        });\r\n      } else {\r\n        toast({\r\n          variant: 'destructive',\r\n          title: 'Save Failed',\r\n          description: result.message,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to save query:', error);\r\n      toast({\r\n        variant: 'destructive',\r\n        title: 'Error',\r\n        description: 'Could not save the query.',\r\n      });\r\n    }\r\n  };\r\n\r\n  const removeWidget = (id: string) => {\r\n    setWidgets((prev) => prev.filter((w) => w.id !== id));\r\n  };\r\n\r\n  const toggleMinimizeWidget = (id: string) => {\r\n    setWidgets(prevWidgets =>\r\n      prevWidgets.map(widget => {\r\n        if (widget.id === id) {\r\n          const isMinimized = !widget.isMinimized;\r\n          let newPosition = {};\r\n          if (!isMinimized) { // Restoring\r\n            const newX = lastRestorePosition.x + 20;\r\n            const newY = lastRestorePosition.y + 20;\r\n            setLastRestorePosition({ x: newX, y: newY });\r\n            newPosition = { x: newX, y: newY };\r\n          }\r\n          return { ...widget, isMinimized, ...newPosition };\r\n        }\r\n        return widget;\r\n      })\r\n    );\r\n  };\r\n  \r\n  const handleRestoreFavorite = (fav: Widget) => {\r\n    const activeWidget = widgets.find(w => w.id === fav.id);\r\n    if (!activeWidget) {\r\n       // Create a new widget instance from the favorite definition\r\n       createWidgetFromDefinition({ ...fav, isFavorited: true }, fav.id);\r\n    } else {\r\n      // If widget is just minimized, un-minimize it and bring to front\r\n      if (activeWidget.isMinimized) {\r\n        toggleMinimizeWidget(activeWidget.id);\r\n      }\r\n      bringToFront(activeWidget.id);\r\n    }\r\n  };\r\n\r\n const toggleFavoriteWidget = (id: string) => {\r\n    let widgetToToggle: Widget | undefined = widgets.find(w => w.id === id);\r\n    if (!widgetToToggle) {\r\n      widgetToToggle = favorites.find(f => f.id === id);\r\n    }\r\n    if (!widgetToToggle) return;\r\n  \r\n    const isCurrentlyFavorited = widgetToToggle.isFavorited;\r\n  \r\n    // Update the widget in the main widgets array if it exists\r\n    setWidgets(prev => \r\n      prev.map(w => \r\n        w.id === id ? { ...w, isFavorited: !isCurrentlyFavorited } : w\r\n      )\r\n    );\r\n  \r\n    // Update the favorites list\r\n    if (!isCurrentlyFavorited) {\r\n      // Add to favorites if not already there\r\n      setFavorites(prev => {\r\n        if (prev.some(f => f.id === id)) {\r\n          return prev.map(f => f.id === id ? { ...widgetToToggle!, isFavorited: true } : f);\r\n        }\r\n        return [...prev, { ...widgetToToggle!, isFavorited: true }];\r\n      });\r\n    } else {\r\n      // Remove from favorites\r\n      setFavorites(prev => prev.filter(f => f.id !== id));\r\n    }\r\n  };\r\n\r\n\r\n  const updateWidgetPosition = (id: string, x: number, y: number) => {\r\n    setWidgets(prevWidgets =>\r\n      prevWidgets.map(widget =>\r\n        widget.id === id ? { ...widget, x, y } : widget\r\n      )\r\n    );\r\n  };\r\n\r\n  const updateWidgetDimensions = (id: string, width: number, height: number) => {\r\n    setWidgets(prevWidgets =>\r\n        prevWidgets.map(widget =>\r\n            widget.id === id ? { ...widget, width, height } : widget\r\n        )\r\n    );\r\n  };\r\n\r\n\r\n  const updateEntity = (widgetId: string, entityNumber: string, updatedData: Partial<Problem | Incident | Change>) => {\r\n    const updateInData = (data: any[]) =>\r\n      data.map((entity: any) =>\r\n        entity.number === entityNumber ? { ...entity, ...updatedData } : entity\r\n      );\r\n  \r\n    setWidgets(prevWidgets =>\r\n      prevWidgets.map(widget => {\r\n        if (widget.id === widgetId && (widget.type === 'problem' || widget.type === 'incident' || widget.type === 'change')) {\r\n          if (!Array.isArray(widget.data)) return widget;\r\n          return { ...widget, data: updateInData(widget.data) };\r\n        }\r\n        return widget;\r\n      })\r\n    );\r\n  \r\n    setFavorites(prevFavorites =>\r\n      prevFavorites.map(fav => {\r\n        if (fav.id === widgetId && (fav.type === 'problem' || fav.type === 'incident' || fav.type === 'change')) {\r\n          if (!Array.isArray(fav.data)) return fav;\r\n          return { ...fav, data: updateInData(fav.data) };\r\n        }\r\n        return fav;\r\n      })\r\n    );\r\n  };\r\n  \r\n  const handleWorkspaceAction = (action: 'create' | 'edit' | 'forget' | 'load' | 'save') => {\r\n    setWorkspaceAction(action);\r\n    if (action === 'create') {\r\n        setWorkspaceName('');\r\n        setWorkspaceToEdit(null);\r\n        setIsWorkspaceModalOpen(true);\r\n    } else if (action === 'edit') {\r\n        if (user) fetchWorkspaces(user.userId, true); // Force refresh when editing\r\n        setIsWorkspaceListOpen(true);\r\n    } else if (action === 'forget') {\r\n        handleDeleteWorkspace();\r\n    } else if (action === 'load') {\r\n        if (user) fetchWorkspaces(user.userId);\r\n        setIsWorkspaceListOpen(true);\r\n    } else if (action === 'save') {\r\n        handleQuickSaveWorkspace();\r\n    }\r\n  };\r\n    \r\n    const handleQuickSaveWorkspace = async (silent = false) => {\r\n        if (!activeWorkspace) {\r\n            if (!silent) handleWorkspaceAction('create');\r\n            return;\r\n        }\r\n        if (!user) return;\r\n        \r\n        const widgetContent = widgets.map(({ x, y, width, height, zIndex, ...rest }) => rest);\r\n        const widgetCoordinates = widgets.map(({ id, x, y, width, height, zIndex }) => ({\r\n            id,\r\n            x: Math.round(x || 0),\r\n            y: Math.round(y || 0),\r\n            width: width || WIDGET_INITIAL_WIDTH,\r\n            height: height || WIDGET_INITIAL_HEIGHT,\r\n            zIndex,\r\n        }));\r\n\r\n        const workspace_data = JSON.stringify(widgetContent);\r\n        const cordinates = JSON.stringify(widgetCoordinates);\r\n        \r\n        const result = await saveWorkspace({\r\n            userId: user.userId,\r\n            workspace_name: activeWorkspace.workspace_name,\r\n            workspace_data,\r\n            cordinates,\r\n            workspaceId: activeWorkspace.workspaceId\r\n        });\r\n\r\n        if (result) {\r\n            if (!silent) {\r\n                toast({ title: 'Success', description: `Workspace \"${activeWorkspace.workspace_name}\" saved.`, duration: 2000 });\r\n            }\r\n            // After saving, force a refresh of the workspace data from the server\r\n            if (user) {\r\n                await fetchWorkspaces(user.userId, true);\r\n                const updatedWs = workspaces.find(ws => ws.workspaceId === activeWorkspace.workspaceId);\r\n                if (updatedWs) {\r\n                    loadWorkspaceUI(updatedWs);\r\n                }\r\n            }\r\n        } else {\r\n            if (!silent) {\r\n                toast({ variant: 'destructive', title: 'Error', description: 'Failed to save workspace.' });\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleSaveWorkspace = async () => {\r\n      if (!user || !workspaceName.trim()) {\r\n        toast({ variant: 'destructive', title: 'Error', description: 'User not found or workspace name is empty.' });\r\n        return;\r\n      }\r\n    \r\n      setLoading(true);\r\n      const isCreating = workspaceAction === 'create';\r\n      const isEditing = workspaceAction === 'edit' && workspaceToEdit;\r\n    \r\n      let workspace_data: string;\r\n      let cordinates: string | undefined;\r\n    \r\n      if (isCreating) {\r\n        const widgetContent = widgets.map(({ x, y, width, height, zIndex, ...rest }) => rest);\r\n        const widgetCoordinates = widgets.map(({ id, x, y, width, height, zIndex }) => ({\r\n          id,\r\n          x: Math.round(x || 0),\r\n          y: Math.round(y || 0),\r\n          width: width || WIDGET_INITIAL_WIDTH,\r\n          height: height || WIDGET_INITIAL_HEIGHT,\r\n          zIndex,\r\n        }));\r\n        workspace_data = JSON.stringify(widgetContent);\r\n        cordinates = JSON.stringify(widgetCoordinates);\r\n      } else if (isEditing) {\r\n        workspace_data = workspaceToEdit.workspace_data;\r\n        cordinates = workspaceToEdit.cordinates;\r\n      } else {\r\n        // Fallback for saving an unnamed workspace (shouldn't happen with the new flow)\r\n        const widgetContent = widgets.map(({ x, y, width, height, zIndex, ...rest }) => rest);\r\n         const widgetCoordinates = widgets.map(({ id, x, y, width, height, zIndex }) => ({\r\n          id,\r\n          x: Math.round(x || 0),\r\n          y: Math.round(y || 0),\r\n          width: width || WIDGET_INITIAL_WIDTH,\r\n          height: height || WIDGET_INITIAL_HEIGHT,\r\n          zIndex,\r\n        }));\r\n        workspace_data = JSON.stringify(widgetContent);\r\n        cordinates = JSON.stringify(widgetCoordinates);\r\n      }\r\n    \r\n      const workspaceIdToSave = isCreating ? undefined : workspaceToEdit!.workspaceId;\r\n    \r\n      const result = await saveWorkspace({\r\n        userId: user.userId,\r\n        workspace_name: workspaceName,\r\n        workspace_data,\r\n        cordinates,\r\n        workspaceId: workspaceIdToSave,\r\n      });\r\n      setLoading(false);\r\n    \r\n      if (result) {\r\n        toast({ title: 'Success', description: `Workspace \"${workspaceName}\" saved.`, duration: 2000 });\r\n        \r\n        await fetchWorkspaces(user.userId, true);\r\n    \r\n        if (isCreating) {\r\n          const newWorkspace = { ...result, last_accessed: new Date().toISOString() };\r\n          setOpenWorkspaces(prev => [...prev, newWorkspace]);\r\n          setCurrentWorkspaceId(newWorkspace.workspaceId);\r\n        } else if (isEditing) {\r\n          // Update the open workspace tab with the new name\r\n          setOpenWorkspaces(prev =>\r\n            prev.map(ws =>\r\n              ws.workspaceId === workspaceToEdit.workspaceId\r\n                ? { ...ws, workspace_name: workspaceName }\r\n                : ws\r\n            )\r\n          );\r\n        }\r\n      } else {\r\n        toast({ variant: 'destructive', title: 'Error', description: 'Failed to save workspace.' });\r\n      }\r\n      setIsWorkspaceModalOpen(false);\r\n      setWorkspaceName('');\r\n      setWorkspaceToEdit(null);\r\n    };\r\n    \r\n    const handleDeleteWorkspace = async () => {\r\n        if (!activeWorkspace) {\r\n            toast({ variant: 'destructive', title: 'Error', description: 'No active workspace to forget.' });\r\n            return;\r\n        }\r\n        \r\n        setLoading(true);\r\n        const success = await deleteWorkspace(activeWorkspace.workspaceId);\r\n        setLoading(false);\r\n        if (success) {\r\n            const deletedId = activeWorkspace.workspaceId;\r\n            setWorkspaces(prev => prev.filter(ws => ws.workspaceId !== deletedId));\r\n            closeWorkspace(deletedId);\r\n            toast({ title: 'Success', description: `Workspace \"${activeWorkspace.workspace_name}\" has been forgotten.`, duration: 2000 });\r\n        } else {\r\n            toast({ variant: 'destructive', title: 'Error', description: 'Failed to forget workspace.' });\r\n        }\r\n    };\r\n    \r\n    const loadWorkspaceUI = (workspace: Workspace) => {\r\n        try {\r\n            if (workspace.workspace_data && workspace.workspace_data.trim() !== '') {\r\n                const contentData = JSON.parse(workspace.workspace_data);\r\n                if (workspace.cordinates) {\r\n                    const layoutData = JSON.parse(workspace.cordinates);\r\n                    const layoutMap = new Map(layoutData.map((l: any) => [l.id, l]));\r\n                    const mergedWidgets = contentData.map((widget: any) => ({\r\n                        ...widget,\r\n                        ...(layoutMap.get(widget.id) || {}),\r\n                    }));\r\n                    setWidgets(mergedWidgets);\r\n                } else {\r\n                    // Fallback for old format\r\n                    setWidgets(contentData);\r\n                }\r\n            } else {\r\n                setWidgets([]);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to parse workspace data\", error);\r\n            toast({variant: \"destructive\", title: \"Error\", description: \"Could not load workspace.\"})\r\n        }\r\n    }\r\n    \r\n    const loadWorkspaceDirectly = (workspace: Workspace) => {\r\n        // Always switch to dashboard view when loading a workspace\r\n        setCurrentView('dashboard');\r\n        \r\n        // Check if workspace is already open\r\n        if (openWorkspaces.find(ws => ws.workspaceId === workspace.workspaceId)) {\r\n            setCurrentWorkspaceId(workspace.workspaceId);\r\n            loadWorkspaceUI(workspace);\r\n            return;\r\n        }\r\n\r\n        // Check workspace limit\r\n        if (openWorkspaces.length >= MAX_OPEN_SESSIONS) {\r\n            toast({\r\n                variant: 'destructive',\r\n                title: 'Limit Reached',\r\n                description: `You can only have ${MAX_OPEN_SESSIONS} workspaces open at a time.`\r\n            });\r\n            return;\r\n        }\r\n        \r\n        // Add to open workspaces and load\r\n        setOpenWorkspaces(prev => [...prev, workspace]);\r\n        setCurrentWorkspaceId(workspace.workspaceId);\r\n        loadWorkspaceUI(workspace);\r\n    };\r\n    \r\n    const handleWorkspaceListSelect = (workspace: Workspace) => {\r\n        setIsWorkspaceListOpen(false);\r\n        if (workspaceAction === 'load') {\r\n            if (openWorkspaces.find(ws => ws.workspaceId === workspace.workspaceId)) {\r\n                setCurrentWorkspaceId(workspace.workspaceId);\r\n                loadWorkspaceUI(workspace);\r\n                return;\r\n            }\r\n\r\n            if (openWorkspaces.length >= MAX_OPEN_SESSIONS) {\r\n                toast({\r\n                    variant: 'destructive',\r\n                    title: 'Limit Reached',\r\n                    description: `You can only have ${MAX_OPEN_SESSIONS} workspaces open at a time.`\r\n                });\r\n                return;\r\n            }\r\n            \r\n            setOpenWorkspaces(prev => [...prev, workspace]);\r\n            setCurrentWorkspaceId(workspace.workspaceId);\r\n            loadWorkspaceUI(workspace);\r\n        } else if (workspaceAction === 'edit') {\r\n            setWorkspaceToEdit(workspace);\r\n            setWorkspaceName(workspace.workspace_name);\r\n            setIsWorkspaceModalOpen(true);\r\n        }\r\n    };\r\n\r\n    const switchWorkspace = (workspaceId: string) => {\r\n        const workspaceToSwitch = openWorkspaces.find(ws => ws.workspaceId === workspaceId);\r\n        if (workspaceToSwitch) {\r\n            setCurrentWorkspaceId(workspaceId);\r\n            loadWorkspaceUI(workspaceToSwitch);\r\n        }\r\n    }\r\n    \r\n    const closeWorkspace = (workspaceId: string) => {\r\n        const remainingWorkspaces = openWorkspaces.filter(ws => ws.workspaceId !== workspaceId);\r\n        setOpenWorkspaces(remainingWorkspaces);\r\n\r\n        if (currentWorkspaceId === workspaceId) {\r\n            if (remainingWorkspaces.length > 0) {\r\n                const newCurrent = remainingWorkspaces[0];\r\n                setCurrentWorkspaceId(newCurrent.workspaceId);\r\n                loadWorkspaceUI(newCurrent);\r\n            } else {\r\n                setCurrentWorkspaceId(null);\r\n                setWidgets([]); // Clear widgets if no workspace is open\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n  const normalWidgets = widgets.filter(w => !w.isMinimized);\r\n  const minimizedWidgets = widgets.filter(w => w.isMinimized && !favorites.some(fav => fav.id === w.id));\r\n\r\n  const starterPrompts = [\r\n    { text: 'Get my incidents', query: '@incident', icon: Sparkle },\r\n    { text: 'Show me high priority changes', query: '@change high priority', icon: Sparkle },\r\n    { text: 'Are there any recurring problems?', query: '@problem recurring', icon: Sparkle },\r\n  ];\r\n\r\n  const handleStarterPrompt = (query: string) => {\r\n    handleCreateWidget(query);\r\n  };\r\n\r\n  const renderSidebar = () => (\r\n    <AppSidebar \r\n      user={user}\r\n      minimizedWidgets={minimizedWidgets} \r\n      favoritedWidgets={favorites}\r\n      onRestoreWidget={toggleMinimizeWidget}\r\n      onRestoreFavorite={handleRestoreFavorite}\r\n      onProfileUpdate={handleProfileUpdate}\r\n      workspaces={workspaces}\r\n      onLoadWorkspace={loadWorkspaceDirectly}\r\n      onWorkspaceAction={handleWorkspaceAction}\r\n      currentView={currentView}\r\n      onViewChange={handleViewChange}\r\n      onMainWorkspace={handleMainWorkspace}\r\n      onRefreshWorkspaces={refreshWorkspaces}\r\n      isSyncingWorkspaces={isSyncingWorkspaces}\r\n      syncEnabled={syncEnabled}\r\n      lastSyncTime={lastSyncTime}\r\n      activeWorkspaceId={currentWorkspaceId}\r\n    />\r\n  );\r\n  \r\n  const mobileHeaderHeight = 56; // 14 * 4\r\n  const chatInputAreaHeight = 96; // 24 * 4\r\n  \r\n  return (\r\n    <div className=\"relative flex h-screen w-screen overflow-hidden bg-background\">\r\n      {isMobile ? (\r\n        <Sheet open={openMobile} onOpenChange={setOpenMobile}>\r\n          <SheetContent side=\"left\" className=\"p-0 w-[300px] bg-card/95\">\r\n            <SheetHeader>\r\n                <SheetTitle className=\"sr-only\">Main Menu</SheetTitle>\r\n                <SheetDescription className=\"sr-only\">\r\n                    Navigate through workspaces, favorites, and settings.\r\n                </SheetDescription>\r\n            </SheetHeader>\r\n            {renderSidebar()}\r\n          </SheetContent>\r\n        </Sheet>\r\n      ) : (\r\n        <div ref={sidebarRef} className=\"z-50\">\r\n          <Sidebar side=\"left\" collapsible=\"icon\" variant={state === 'collapsed' ? 'floating' : 'sidebar'}>\r\n            {renderSidebar()}\r\n          </Sidebar>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden relative\">\r\n        {renderCurrentView()}\r\n        \r\n        {/* Header for mobile and desktop workspaces */}\r\n        {isMobile ? (\r\n            <header className=\"absolute top-0 left-0 right-0 p-2 flex items-center justify-between z-30\" style={{ height: mobileHeaderHeight }}>\r\n                <Button variant=\"ghost\" size=\"icon\" onClick={() => setOpenMobile(true)}>\r\n                <Menu />\r\n                </Button>\r\n                {activeWorkspace && (\r\n                <div className=\"text-sm font-semibold truncate px-2\">\r\n                    {activeWorkspace.workspace_name}\r\n                </div>\r\n                )}\r\n                <div className=\"w-10\"></div>\r\n            </header>\r\n         ) : (\r\n            // Only show workspace buttons when on dashboard view\r\n            currentView === 'dashboard' && (\r\n                <div className=\"absolute top-0 left-0 right-0 flex items-center justify-center gap-2 p-4 bg-transparent z-30 pointer-events-none\">\r\n                  <div className=\"flex items-center justify-center gap-2 pointer-events-auto\">\r\n                    {openWorkspaces.map(ws => (\r\n                    <TooltipProvider key={ws.workspaceId}>\r\n                        <div className=\"group relative flex flex-col items-center\">\r\n                            <Button\r\n                            variant={ws.workspaceId === currentWorkspaceId ? \"secondary\" : \"ghost\"}\r\n                            size=\"sm\"\r\n                            className=\"rounded-full px-6 py-2 h-auto shadow-lg\"\r\n                            onClick={() => switchWorkspace(ws.workspaceId)}\r\n                            >\r\n                            {ws.workspace_name}\r\n                            </Button>\r\n                            <div className=\"flex items-center justify-end w-full gap-1 mt-2 h-6 opacity-0 group-hover:opacity-100 transition-opacity pr-2\">\r\n                            <Tooltip>\r\n                                <TooltipTrigger asChild>\r\n                                <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6\" onClick={() => handleQuickSaveWorkspace()}><Save size={14} /></Button>\r\n                                </TooltipTrigger>\r\n                                <TooltipContent>Save</TooltipContent>\r\n                            </Tooltip>\r\n                            <Tooltip>\r\n                                <TooltipTrigger asChild>\r\n                                <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6\" onClick={() => {\r\n                                        setWorkspaceAction('edit');\r\n                                        setWorkspaceToEdit(ws);\r\n                                        setWorkspaceName(ws.workspace_name);\r\n                                        setIsWorkspaceModalOpen(true);\r\n                                }}><Pencil size={14} /></Button>\r\n                                </TooltipTrigger>\r\n                                <TooltipContent>Edit</TooltipContent>\r\n                            </Tooltip>\r\n                            <Tooltip>\r\n                                <TooltipTrigger asChild>\r\n                                <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6\" onClick={() => closeWorkspace(ws.workspaceId)}><XIcon size={14} /></Button>\r\n                                </TooltipTrigger>\r\n                                <TooltipContent>Close</TooltipContent>\r\n                            </Tooltip>\r\n                            </div>\r\n                        </div>\r\n                    </TooltipProvider>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n            )\r\n         )}\r\n        \r\n        {/* Chat Input - only show for dashboard view */}\r\n        {currentView === 'dashboard' && (\r\n            <div ref={chatInputRef} className={cn(\"z-40 transition-transform duration-300 ease-in-out absolute bottom-0 left-0 right-0\")} style={{ paddingLeft: !isMobile && sidebarRef.current && state === 'expanded' ? `${sidebarRef.current.offsetWidth}px`: '0' }}>\r\n                <div className=\"p-4 bg-transparent w-full max-w-xl mx-auto\">\r\n                    <ChatInput onSubmit={handleCreateWidget} onSave={handleSaveQuery} loading={loading} widgets={widgets} onWorkspaceAction={handleWorkspaceAction} />\r\n                </div>\r\n            </div>\r\n        )}\r\n      </div>\r\n        <Dialog open={isWorkspaceModalOpen} onOpenChange={setIsWorkspaceModalOpen}>\r\n            <DialogContent size=\"form\">\r\n                <DialogHeader>\r\n                    <DialogTitle>{workspaceAction === 'create' ? 'Create' : 'Edit'} Workspace</DialogTitle>\r\n                    <DialogDescription>\r\n                        {workspaceAction === 'create' \r\n                            ? \"Give your workspace a name to save the current layout.\"\r\n                            : `Renaming workspace: ${workspaceToEdit?.workspace_name}`\r\n                        }\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n                <div className=\"grid gap-4 py-4\">\r\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                        <Label htmlFor=\"workspace-name\" className=\"text-right\">Name</Label>\r\n                        <Input\r\n                            id=\"workspace-name\"\r\n                            value={workspaceName}\r\n                            onChange={(e) => setWorkspaceName(e.target.value)}\r\n                            className=\"col-span-3\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <DialogFooter>\r\n                    <DialogClose asChild><Button variant=\"outline\">Cancel</Button></DialogClose>\r\n                    <Button onClick={handleSaveWorkspace} disabled={!workspaceName.trim() || loading}>\r\n                        {loading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                        Save\r\n                    </Button>\r\n                </DialogFooter>\r\n            </DialogContent>\r\n        </Dialog>\r\n        <Dialog open={isWorkspaceListOpen} onOpenChange={setIsWorkspaceListOpen}>\r\n            <DialogContent>\r\n                <DialogHeader>\r\n                    <DialogTitle>{workspaceAction === 'load' ? 'Load Workspace' : 'Edit Workspace'}</DialogTitle>\r\n                    <DialogDescription>\r\n                        {workspaceAction === 'load' \r\n                            ? \"Select a saved workspace to load it onto your dashboard.\"\r\n                            : \"Select a workspace to edit its name.\"\r\n                        }\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n                <div className=\"py-4\">\r\n                    {loadingWorkspaces ? <Loader2 className=\"mx-auto animate-spin\" /> : (\r\n                        <div className=\"space-y-2\">\r\n                            {workspaces.map(ws => (\r\n                                <Button key={ws.workspaceId} variant=\"ghost\" className=\"w-full justify-start\" onClick={() => handleWorkspaceListSelect(ws)}>\r\n                                    {ws.workspace_name}\r\n                                </Button>\r\n                            ))}\r\n                            {workspaces.length === 0 && <p className=\"text-sm text-muted-foreground text-center\">No saved workspaces found.</p>}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CO,SAAS;IACd,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY;IACzD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACnD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACvD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAgB,EAAE;IACjE,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3D,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,WAAQ,AAAD;IACzB,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,aAAa,EAAE,GAAG,CAAA,GAAA,mIAAA,CAAA,aAAU,AAAD;IACtD,MAAM,WAAW,CAAA,GAAA,8HAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QAAE,GAAG;QAAG,GAAG;IAAE;IAC5E,MAAM,aAAa,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB;IAC1C,MAAM,eAAe,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB;IAC5C,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAO;IAE5D,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe,EAAE;IAC5D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe,EAAE;IACpE,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAE5E,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjE,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAoB;IACzE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAyD;IAC9G,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE/D,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEzD,MAAM,kBAAkB,eAAe,IAAI,CAAC,CAAA,KAAM,GAAG,WAAW,KAAK,uBAAuB;IAC5F,MAAM,oBAAoB,SAAS,QAAQ,GAAG,CAAC,mCAAmC,IAAI,KAAK;IAE3F,4BAA4B;IAC5B,MAAM,EACJ,YAAY,mBAAmB,EAC/B,YAAY,EACZ,SAAS,iBAAiB,EAC1B,SAAS,WAAW,EACrB,GAAG,CAAA,GAAA,wIAAA,CAAA,mBAAgB,AAAD,EAAE;QACnB;QACA;QACA,qBAAqB,CAAC;YACpB,cAAc;QAChB;QACA,qBAAqB,CAAC;YACpB,+CAA+C;YAC/C,MAAM,gBAAgB,eAAe,MAAM,CAAC,CAAA,KAAM,CAAC,WAAW,QAAQ,CAAC,GAAG,WAAW;YACrF,kBAAkB;YAElB,uEAAuE;YACvE,IAAI,sBAAsB,WAAW,QAAQ,CAAC,qBAAqB;gBACjE,IAAI,cAAc,MAAM,GAAG,GAAG;oBAC5B,sBAAsB,aAAa,CAAC,EAAE,CAAC,WAAW;oBAClD,gBAAgB,aAAa,CAAC,EAAE;gBAClC,OAAO;oBACL,sBAAsB;oBACtB,WAAW,EAAE;gBACf;YACF;QACF;QACA,SAAS,QAAQ,GAAG,CAAC,kCAAkC,KAAK;QAC5D,YAAY,SAAS,QAAQ,GAAG,CAAC,mCAAmC,IAAI,SAAS;QACjF,mBAAmB,QAAQ,GAAG,CAAC,wCAAwC,KAAK;IAC9E;IAEA,MAAM,eAAe;QACnB,0CAA0C;QAC1C,MAAM,aAAa,CAAA,GAAA,8HAAA,CAAA,oBAAiB,AAAD;QAEnC,IAAI,WAAW,IAAI,IAAI,WAAW,UAAU,CAAC,MAAM,IAAI,GAAG;YACxD,8BAA8B;YAC9B,QAAQ,WAAW,IAAI;YACvB,cAAc,WAAW,UAAU;YACnC,qBAAqB;YACrB;QACF;QAEA,wEAAwE;QACxE;IACF;IAEA,MAAM,wBAAwB;QAC5B,MAAM,UAAU,aAAa,OAAO,CAAC;QACrC,IAAI,CAAC,SAAS;QACd,MAAM,YAAY,KAAK,KAAK,CAAC,SAAS,KAAK;QAC3C,IAAI,CAAC,WAAW;QAEhB,WAAW;QACX,IAAI;YACF,MAAM,UAAU,MAAM,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD,EAAE;YACrC,QAAQ;YAER,IAAI,SAAS;gBACX,MAAM,iBAAiB,MAAM,CAAA,GAAA,uJAAA,CAAA,gBAAa,AAAD,EAAE,QAAQ,MAAM;gBACzD,cAAc;YAChB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,8BAA8B;QAC9C,SAAU;YACR,WAAW;YACX,qBAAqB;QACvB;IACF;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR;IACF,GAAG,EAAE;IAEL,MAAM,qBAAqB,CAAC,QAAoB,MAAa;QACzD,MAAM,WAAW,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,QAAQ;QACrC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;YACN,MAAM,UAAU,WAAW;gBACvB;YACJ,GAAG;YAEH,OAAO;gBACH,aAAa;YACjB;QACJ,GAAG;YAAC;YAAU;SAAM;IACxB;IAEA,4CAA4C;IAC5C,mBAAmB;QACf,IAAI,mBAAmB,QAAQ,CAAC,WAAW,CAAC,wBAAwB,CAAC,kBAAkB;YACrF,yBAAyB;QAC3B;IACJ,GAAG;QAAC;QAAS;QAAiB;QAAM;KAAiB,EAAE;IAEvD,MAAM,sBAAsB;QAC1B,iDAAiD;QACjD;IACF;IAEA,MAAM,mBAAmB,CAAC;QACxB,eAAe;IACjB;IAEA,MAAM,oBAAoB,CAAC;QACzB,mBAAmB;QACnB,eAAe;IACjB;IAEA,MAAM,0BAA0B;QAC9B,mBAAmB;QACnB,eAAe;IACjB;IAEA,MAAM,sBAAsB;QAC1B,2BAA2B;QAC3B,eAAe;QAEf,yDAAyD;QACzD,sBAAsB;QAEtB,+BAA+B;QAC/B,WAAW,CAAA,cACT,YAAY,GAAG,CAAC,CAAA,SAAU,CAAC;oBAAE,GAAG,MAAM;oBAAE,aAAa;gBAAK,CAAC;IAG7D,2DAA2D;IAC3D,kDAAkD;IACpD;IAEA,MAAM,sBAAsB,kBAC1B,8OAAC;YAAK,WAAU;;gBACb,yBACC,8OAAC;oBAAI,WAAU;oBAAgB,OAAO;wBAAE,YAAY;wBAAoB,eAAe;oBAAoB;8BACxG,cAAc,GAAG,CAAC,CAAA,uBACjB,8OAAC;4BAAoB,WAAU;sCAC7B,cAAA,8OAAC,2IAAA,CAAA,aAAU;gCACT,QAAQ;gCACR,cAAc;gCACd,cAAc;gCACd,cAAc;gCACd,sBAAsB;gCACtB,sBAAsB;;;;;;2BAPhB,OAAO,EAAE;;;;;;;;;yCAavB,8OAAC,gJAAA,CAAA,kBAAe;oBACd,SAAS;oBACT,cAAc;oBACd,cAAc;oBACd,cAAc;oBACd,sBAAsB;oBACtB,sBAAsB;oBACtB,sBAAsB;oBACtB,wBAAwB;oBACxB,cAAc;oBACd,YAAY;oBACZ,cAAc;oBACd,eAAe;;;;;;8BAInB,8OAAC;oBACC,WAAU;oBACV,OAAO;wBAAE,aAAa,CAAC,YAAY,WAAW,OAAO,IAAI,UAAU,aAAa,GAAG,WAAW,OAAO,CAAC,WAAW,CAAC,EAAE,CAAC,GAAE;oBAAI;8BAE1H,cAAc,MAAM,KAAK,mBACxB,8OAAC;wBAAI,WAAU;wBAA4E,OAAO;4BAAE,eAAe,WAAW,sBAAsB;wBAAO;kCACzJ,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,6HAAA,CAAA,UAAK;oCACJ,KAAI;oCACJ,KAAI;oCACJ,OAAO;oCACP,QAAQ;oCACR,WAAU;;;;;;8CAEZ,8OAAC;oCAAG,WAAU;8CAAgD;;;;;;8CAG9D,8OAAC;oCAAE,WAAU;8CAAsC;;;;;;8CAInD,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAE,WAAU;sDAA+D;;;;;;sDAC5E,8OAAC;4CAAI,WAAU;sDACZ,eAAe,GAAG,CAAC,CAAC,QAAQ;gDAC3B,MAAM,OAAO,OAAO,IAAI;gDACxB,qBACE,8OAAC,kIAAA,CAAA,SAAM;oDAEL,SAAQ;oDACR,WAAU;oDACV,SAAS,IAAM,oBAAoB,OAAO,KAAK;;sEAE/C,8OAAC;4DAAK,WAAU;4DAAoB,MAAM;;;;;;wDACzC,OAAO,IAAI;;mDANP;;;;;4CASX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAUhB,MAAM,oBAAoB;QACxB,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,qBACE,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,6HAAA,CAAA,UAAO;;;;;;;;;;YAGd,KAAK;gBACH,qBACE,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,mIAAA,CAAA,gBAAa;;;;;;;;;;YAGpB,KAAK;gBACH,qBACE,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,6HAAA,CAAA,UAAO;4BAAC,MAAM;4BAAM,iBAAiB;4BAAqB,QAAQ;;;;;;;;;;;;;;;;YAI3E,KAAK;gBACH,qBACE,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,8HAAA,CAAA,WAAQ;4BAAC,QAAQ;;;;;;;;;;;;;;;;YAI1B,KAAK;gBACH,qBACE,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,oIAAA,CAAA,iBAAc;;;;;;;;;;;;;;;YAIvB,KAAK;gBACH,qBACE,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,oIAAA,CAAA,iBAAc;;;;;;;;;;;;;;;YAIvB,KAAK;gBACH,qBACE,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,uIAAA,CAAA,oBAAiB;4BAAC,eAAe;;;;;;;;;;;;;;;;YAI1C,KAAK;gBACH,qBACE,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,iIAAA,CAAA,cAAW;wBACV,SAAS;wBACT,QAAQ;wBACR,QAAQ;;;;;;;;;;;YAIhB;gBACE,OAAO;QACX;IACF;IAEA,MAAM,kBAAkB,OAAO,QAAgB,eAAe,KAAK;QACjE,IAAI,CAAC,QAAQ;QAEb,+CAA+C;QAC/C,IAAI,CAAC,cAAc;YACjB,MAAM,EAAE,YAAY,gBAAgB,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,oBAAiB,AAAD;YACzD,IAAI,iBAAiB,MAAM,GAAG,GAAG;gBAC/B,cAAc;gBACd,qBAAqB;gBACrB;YACF;QACF;QAEA,qBAAqB;QACrB,IAAI;YACA,MAAM,OAAO,MAAM,CAAA,GAAA,uJAAA,CAAA,gBAAa,AAAD,EAAE;YACjC,cAAc;YACd,CAAA,GAAA,8HAAA,CAAA,yBAAsB,AAAD,EAAE;QAC3B,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,8BAA8B;QAChD,SAAU;YACN,qBAAqB;QACzB;IACF;IAEA,MAAM,oBAAoB;QACxB,IAAI,MAAM;YACR;QACF;IACF;IAGA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,iBAAiB;YACpB,WAAW,EAAE;QACf;IACF,GAAG;QAAC;KAAgB;IAEpB,MAAM,eAAe,CAAC,IAAY;QAChC,WAAW,CAAA;YACT,MAAM,cAAc,YAAY,MAAM,CAAC,CAAC,KAAK,IAAM,KAAK,GAAG,CAAC,KAAK,EAAE,MAAM,GAAG,MAAM;YAClF,MAAM,YAAY,kBAAkB,MAAM,cAAc;YAExD,OAAO,YAAY,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK;oBAAE,GAAG,CAAC;oBAAE,QAAQ;gBAAU,IAAI;QAC1E;IACF;IAEA,MAAM,6BAA6B,CAAC,WAA+C;QACjF,MAAM,YAAY;QAClB,cAAc,YAAY;QAE1B,MAAM,eAAe,UAAU,cAAc,WAAW,OAAO,GAAG,WAAW,OAAO,CAAC,WAAW,GAAG;QACnG,MAAM,iBAAiB,OAAO,UAAU,GAAG;QAC3C,MAAM,kBAAkB,OAAO,WAAW;QAE1C,gDAAgD;QAChD,MAAM,gBAAgB,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,MAAM;QACvD,MAAM,gBAAgB,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,MAAM;QAEvD,MAAM,WAAW,eAAgB,iBAAiB,IAAM,gJAAA,CAAA,uBAAoB,GAAG,IAAK;QACpF,MAAM,WAAW,AAAC,kBAAkB,IAAM,gJAAA,CAAA,wBAAqB,GAAG,IAAK;QAEvE,MAAM,YAAoB;YACxB,GAAG,SAAS;YACZ,IAAI,MAAM,KAAK,GAAG,GAAG,QAAQ;YAC7B,aAAa;YACb,GAAG,UAAU,CAAC,IAAI;YAClB,GAAG,UAAU,CAAC,IAAI;YAClB,OAAO,UAAU,KAAK,IAAI,gJAAA,CAAA,uBAAoB;YAC9C,QAAQ,UAAU,MAAM,IAAI,gJAAA,CAAA,wBAAqB;QACnD;QAEA,WAAW,CAAC,OAAS;mBAAI;gBAAM;aAAU;IAC3C;IAEA,MAAM,qBAAqB,OAAO;QAChC,IAAI,CAAC,MAAM,IAAI,IAAI;QACnB,WAAW;QACX,MAAM,iBAAiB,MAAM,WAAW;QAExC,IAAI,eAAqE;QAEzE,IAAI;YACF,IAAI,eAAe,QAAQ,CAAC,gBAAgB;gBAC1C,MAAM,eAAe,MAAM,CAAA,GAAA,uJAAA,CAAA,eAAY,AAAD;gBACtC,eAAe;oBACb,OAAO;oBACP,MAAM;oBACN,OAAO;wBAAE,WAAW;wBAAkB,eAAe;oBAAkC;oBACvF,MAAM;oBACN,aAAa;gBACf;YACF,OAAO,IAAI,eAAe,QAAQ,CAAC,cAAc;gBAC/C,MAAM,eAAe,MAAM,CAAA,GAAA,uJAAA,CAAA,gBAAa,AAAD,EAAE;gBACzC,eAAe;oBACb,OAAO;oBACP,MAAM;oBACN,OAAO;wBAAE,WAAW;wBAAkB,eAAe;oBAAkC;oBACvF,MAAM;oBACN,aAAa;gBACf;YAEF,OAAO,IAAI,eAAe,QAAQ,CAAC,YAAY;gBAC5C,MAAM,aAAa,MAAM,CAAA,GAAA,uJAAA,CAAA,gBAAa,AAAD,EAAE;gBACxC,eAAe;oBACb,OAAO;oBACP,MAAM;oBACN,OAAO;wBAAE,WAAW;wBAAgB,eAAe;oBAAsC;oBACzF,MAAM;oBACN,aAAa;gBACf;YAEF,OAAO,IAAI,eAAe,QAAQ,CAAC,aAAa;gBAC9C,MAAM,cAAc,MAAM,CAAA,GAAA,uJAAA,CAAA,gBAAa,AAAD,EAAE;gBACxC,eAAe;oBACb,OAAO;oBACP,MAAM;oBACN,OAAO;wBAAE,WAAW;wBAAiB,eAAe;oBAAiC;oBACrF,MAAM;oBACN,aAAa;gBACf;YACF,OAAO,IAAI,eAAe,QAAQ,CAAC,aAAa;gBAC9C,MAAM,gBAAgB,QAAQ,GAAG,CAAC,CAAA,IAAK,CAAC;wBAAE,MAAM,EAAE,IAAI;wBAAE,OAAO,EAAE,KAAK;wBAAE,MAAM,EAAE,IAAI;oBAAC,CAAC;gBACtF,MAAM,SAAS,MAAM,CAAA,GAAA,0JAAA,CAAA,0BAAuB,AAAD,EAAE;oBAAE,YAAY;gBAAc;gBAEzE,eAAe;oBACb,OAAO;oBACP,MAAM,OAAO,OAAO;oBACpB,OAAO;wBAAE,WAAW;wBAAiB,eAAe;oBAA0C;oBAC9F,MAAM;oBACN,aAAa;gBACf;YACF,OAAO;gBACL,MAAM,oBAAoB,eAAe,OAAO,CAAC,CAAA;oBAC7C,IAAI;wBACF,MAAM,qBAA+B,KAAK,KAAK,CAAC,GAAG,cAAc;wBACjE,OAAO,mBAAmB,GAAG,CAAC,CAAA,IAAK,CAAC;gCAAE,MAAM,EAAE,IAAI;gCAAE,OAAO,EAAE,KAAK;gCAAE,MAAM,EAAE,IAAI;4BAAC,CAAC;oBACpF,EAAE,OAAO,GAAG;wBACV,QAAQ,KAAK,CAAC,CAAC,mCAAmC,EAAE,GAAG,cAAc,EAAE,EAAE;wBACzE,OAAO,EAAE;oBACX;gBACF;gBAEA,MAAM,SAAS,MAAM,CAAA,GAAA,0JAAA,CAAA,0BAAuB,AAAD,EAAE;oBAAE;oBAAO,eAAe;gBAAkB;gBAEvF,IAAI,OAAO,iBAAiB,EAAE;oBAC5B,MAAM,kBAAkB,WAAW,IAAI,CAAC,CAAA,KAAM,GAAG,cAAc,CAAC,WAAW,GAAG,QAAQ,CAAC,OAAO,iBAAiB,CAAE,WAAW;oBAC5H,IAAI,iBAAiB;wBACnB,mBAAmB;wBACnB,0BAA0B;oBAC5B,OAAO;wBACL,MAAM;4BAAE,SAAS;4BAAe,OAAO;4BAAa,aAAa,CAAC,WAAW,EAAE,OAAO,iBAAiB,CAAC,YAAY,CAAC;wBAAC;oBACxH;gBACF;gBAEA,MAAM,QAAQ,MAAM,CAAA,GAAA,0JAAA,CAAA,sBAAmB,AAAD,EAAE;oBAAE,YAAY,OAAO,MAAM;gBAAC;gBAEpE,eAAe;oBACb,OAAO;oBACP,MAAM,OAAO,MAAM;oBACnB,OAAO;oBACP,MAAM;oBACN,aAAa;gBACf;YACJ;YAEA,IAAI,cAAc;gBAChB,MAAM,gBAAgB;oBACpB,GAAG,YAAY;oBACf,QAAQ,aAAa,IAAI,KAAK,YAAY,MAAM;gBAClD;gBACA,2BAA2B;YAC7B;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,MAAM;gBACJ,SAAS;gBACT,OAAO;gBACP,aAAa;YACf;QACF,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,kBAAkB,OAAO,OAAe;QAC5C,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,KAAK,IAAI,IAAI;QACnC,IAAI;YACF,MAAM,SAAS,MAAM,CAAA,GAAA,0JAAA,CAAA,yBAAsB,AAAD,EAAE;gBAAE,WAAW;gBAAM,WAAW;YAAM;YAChF,IAAI,OAAO,OAAO,EAAE;gBAClB,gBAAgB,CAAA,OAAQ;2BAAI;wBAAM;4BAAE;4BAAM;wBAAM;qBAAE;gBAClD,MAAM;oBACJ,OAAO;oBACP,aAAa,CAAC,CAAC,EAAE,KAAK,8BAA8B,CAAC;gBACvD;YACF,OAAO;gBACL,MAAM;oBACJ,SAAS;oBACT,OAAO;oBACP,aAAa,OAAO,OAAO;gBAC7B;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;YACvC,MAAM;gBACJ,SAAS;gBACT,OAAO;gBACP,aAAa;YACf;QACF;IACF;IAEA,MAAM,eAAe,CAAC;QACpB,WAAW,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IACnD;IAEA,MAAM,uBAAuB,CAAC;QAC5B,WAAW,CAAA,cACT,YAAY,GAAG,CAAC,CAAA;gBACd,IAAI,OAAO,EAAE,KAAK,IAAI;oBACpB,MAAM,cAAc,CAAC,OAAO,WAAW;oBACvC,IAAI,cAAc,CAAC;oBACnB,IAAI,CAAC,aAAa;wBAChB,MAAM,OAAO,oBAAoB,CAAC,GAAG;wBACrC,MAAM,OAAO,oBAAoB,CAAC,GAAG;wBACrC,uBAAuB;4BAAE,GAAG;4BAAM,GAAG;wBAAK;wBAC1C,cAAc;4BAAE,GAAG;4BAAM,GAAG;wBAAK;oBACnC;oBACA,OAAO;wBAAE,GAAG,MAAM;wBAAE;wBAAa,GAAG,WAAW;oBAAC;gBAClD;gBACA,OAAO;YACT;IAEJ;IAEA,MAAM,wBAAwB,CAAC;QAC7B,MAAM,eAAe,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,IAAI,EAAE;QACtD,IAAI,CAAC,cAAc;YAChB,4DAA4D;YAC5D,2BAA2B;gBAAE,GAAG,GAAG;gBAAE,aAAa;YAAK,GAAG,IAAI,EAAE;QACnE,OAAO;YACL,iEAAiE;YACjE,IAAI,aAAa,WAAW,EAAE;gBAC5B,qBAAqB,aAAa,EAAE;YACtC;YACA,aAAa,aAAa,EAAE;QAC9B;IACF;IAED,MAAM,uBAAuB,CAAC;QAC3B,IAAI,iBAAqC,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACpE,IAAI,CAAC,gBAAgB;YACnB,iBAAiB,UAAU,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAChD;QACA,IAAI,CAAC,gBAAgB;QAErB,MAAM,uBAAuB,eAAe,WAAW;QAEvD,2DAA2D;QAC3D,WAAW,CAAA,OACT,KAAK,GAAG,CAAC,CAAA,IACP,EAAE,EAAE,KAAK,KAAK;oBAAE,GAAG,CAAC;oBAAE,aAAa,CAAC;gBAAqB,IAAI;QAIjE,4BAA4B;QAC5B,IAAI,CAAC,sBAAsB;YACzB,wCAAwC;YACxC,aAAa,CAAA;gBACX,IAAI,KAAK,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK;oBAC/B,OAAO,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK;4BAAE,GAAG,cAAc;4BAAG,aAAa;wBAAK,IAAI;gBACjF;gBACA,OAAO;uBAAI;oBAAM;wBAAE,GAAG,cAAc;wBAAG,aAAa;oBAAK;iBAAE;YAC7D;QACF,OAAO;YACL,wBAAwB;YACxB,aAAa,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACjD;IACF;IAGA,MAAM,uBAAuB,CAAC,IAAY,GAAW;QACnD,WAAW,CAAA,cACT,YAAY,GAAG,CAAC,CAAA,SACd,OAAO,EAAE,KAAK,KAAK;oBAAE,GAAG,MAAM;oBAAE;oBAAG;gBAAE,IAAI;IAG/C;IAEA,MAAM,yBAAyB,CAAC,IAAY,OAAe;QACzD,WAAW,CAAA,cACP,YAAY,GAAG,CAAC,CAAA,SACZ,OAAO,EAAE,KAAK,KAAK;oBAAE,GAAG,MAAM;oBAAE;oBAAO;gBAAO,IAAI;IAG5D;IAGA,MAAM,eAAe,CAAC,UAAkB,cAAsB;QAC5D,MAAM,eAAe,CAAC,OACpB,KAAK,GAAG,CAAC,CAAC,SACR,OAAO,MAAM,KAAK,eAAe;oBAAE,GAAG,MAAM;oBAAE,GAAG,WAAW;gBAAC,IAAI;QAGrE,WAAW,CAAA,cACT,YAAY,GAAG,CAAC,CAAA;gBACd,IAAI,OAAO,EAAE,KAAK,YAAY,CAAC,OAAO,IAAI,KAAK,aAAa,OAAO,IAAI,KAAK,cAAc,OAAO,IAAI,KAAK,QAAQ,GAAG;oBACnH,IAAI,CAAC,MAAM,OAAO,CAAC,OAAO,IAAI,GAAG,OAAO;oBACxC,OAAO;wBAAE,GAAG,MAAM;wBAAE,MAAM,aAAa,OAAO,IAAI;oBAAE;gBACtD;gBACA,OAAO;YACT;QAGF,aAAa,CAAA,gBACX,cAAc,GAAG,CAAC,CAAA;gBAChB,IAAI,IAAI,EAAE,KAAK,YAAY,CAAC,IAAI,IAAI,KAAK,aAAa,IAAI,IAAI,KAAK,cAAc,IAAI,IAAI,KAAK,QAAQ,GAAG;oBACvG,IAAI,CAAC,MAAM,OAAO,CAAC,IAAI,IAAI,GAAG,OAAO;oBACrC,OAAO;wBAAE,GAAG,GAAG;wBAAE,MAAM,aAAa,IAAI,IAAI;oBAAE;gBAChD;gBACA,OAAO;YACT;IAEJ;IAEA,MAAM,wBAAwB,CAAC;QAC7B,mBAAmB;QACnB,IAAI,WAAW,UAAU;YACrB,iBAAiB;YACjB,mBAAmB;YACnB,wBAAwB;QAC5B,OAAO,IAAI,WAAW,QAAQ;YAC1B,IAAI,MAAM,gBAAgB,KAAK,MAAM,EAAE,OAAO,6BAA6B;YAC3E,uBAAuB;QAC3B,OAAO,IAAI,WAAW,UAAU;YAC5B;QACJ,OAAO,IAAI,WAAW,QAAQ;YAC1B,IAAI,MAAM,gBAAgB,KAAK,MAAM;YACrC,uBAAuB;QAC3B,OAAO,IAAI,WAAW,QAAQ;YAC1B;QACJ;IACF;IAEE,MAAM,2BAA2B,OAAO,SAAS,KAAK;QAClD,IAAI,CAAC,iBAAiB;YAClB,IAAI,CAAC,QAAQ,sBAAsB;YACnC;QACJ;QACA,IAAI,CAAC,MAAM;QAEX,MAAM,gBAAgB,QAAQ,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,GAAK;QAChF,MAAM,oBAAoB,QAAQ,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,GAAK,CAAC;gBAC5E;gBACA,GAAG,KAAK,KAAK,CAAC,KAAK;gBACnB,GAAG,KAAK,KAAK,CAAC,KAAK;gBACnB,OAAO,SAAS,gJAAA,CAAA,uBAAoB;gBACpC,QAAQ,UAAU,gJAAA,CAAA,wBAAqB;gBACvC;YACJ,CAAC;QAED,MAAM,iBAAiB,KAAK,SAAS,CAAC;QACtC,MAAM,aAAa,KAAK,SAAS,CAAC;QAElC,MAAM,SAAS,MAAM,CAAA,GAAA,uJAAA,CAAA,gBAAa,AAAD,EAAE;YAC/B,QAAQ,KAAK,MAAM;YACnB,gBAAgB,gBAAgB,cAAc;YAC9C;YACA;YACA,aAAa,gBAAgB,WAAW;QAC5C;QAEA,IAAI,QAAQ;YACR,IAAI,CAAC,QAAQ;gBACT,MAAM;oBAAE,OAAO;oBAAW,aAAa,CAAC,WAAW,EAAE,gBAAgB,cAAc,CAAC,QAAQ,CAAC;oBAAE,UAAU;gBAAK;YAClH;YACA,sEAAsE;YACtE,IAAI,MAAM;gBACN,MAAM,gBAAgB,KAAK,MAAM,EAAE;gBACnC,MAAM,YAAY,WAAW,IAAI,CAAC,CAAA,KAAM,GAAG,WAAW,KAAK,gBAAgB,WAAW;gBACtF,IAAI,WAAW;oBACX,gBAAgB;gBACpB;YACJ;QACJ,OAAO;YACH,IAAI,CAAC,QAAQ;gBACT,MAAM;oBAAE,SAAS;oBAAe,OAAO;oBAAS,aAAa;gBAA4B;YAC7F;QACJ;IACJ;IAEA,MAAM,sBAAsB;QAC1B,IAAI,CAAC,QAAQ,CAAC,cAAc,IAAI,IAAI;YAClC,MAAM;gBAAE,SAAS;gBAAe,OAAO;gBAAS,aAAa;YAA6C;YAC1G;QACF;QAEA,WAAW;QACX,MAAM,aAAa,oBAAoB;QACvC,MAAM,YAAY,oBAAoB,UAAU;QAEhD,IAAI;QACJ,IAAI;QAEJ,IAAI,YAAY;YACd,MAAM,gBAAgB,QAAQ,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,GAAK;YAChF,MAAM,oBAAoB,QAAQ,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,GAAK,CAAC;oBAC9E;oBACA,GAAG,KAAK,KAAK,CAAC,KAAK;oBACnB,GAAG,KAAK,KAAK,CAAC,KAAK;oBACnB,OAAO,SAAS,gJAAA,CAAA,uBAAoB;oBACpC,QAAQ,UAAU,gJAAA,CAAA,wBAAqB;oBACvC;gBACF,CAAC;YACD,iBAAiB,KAAK,SAAS,CAAC;YAChC,aAAa,KAAK,SAAS,CAAC;QAC9B,OAAO,IAAI,WAAW;YACpB,iBAAiB,gBAAgB,cAAc;YAC/C,aAAa,gBAAgB,UAAU;QACzC,OAAO;YACL,gFAAgF;YAChF,MAAM,gBAAgB,QAAQ,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,GAAK;YAC/E,MAAM,oBAAoB,QAAQ,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,GAAK,CAAC;oBAC/E;oBACA,GAAG,KAAK,KAAK,CAAC,KAAK;oBACnB,GAAG,KAAK,KAAK,CAAC,KAAK;oBACnB,OAAO,SAAS,gJAAA,CAAA,uBAAoB;oBACpC,QAAQ,UAAU,gJAAA,CAAA,wBAAqB;oBACvC;gBACF,CAAC;YACD,iBAAiB,KAAK,SAAS,CAAC;YAChC,aAAa,KAAK,SAAS,CAAC;QAC9B;QAEA,MAAM,oBAAoB,aAAa,YAAY,gBAAiB,WAAW;QAE/E,MAAM,SAAS,MAAM,CAAA,GAAA,uJAAA,CAAA,gBAAa,AAAD,EAAE;YACjC,QAAQ,KAAK,MAAM;YACnB,gBAAgB;YAChB;YACA;YACA,aAAa;QACf;QACA,WAAW;QAEX,IAAI,QAAQ;YACV,MAAM;gBAAE,OAAO;gBAAW,aAAa,CAAC,WAAW,EAAE,cAAc,QAAQ,CAAC;gBAAE,UAAU;YAAK;YAE7F,MAAM,gBAAgB,KAAK,MAAM,EAAE;YAEnC,IAAI,YAAY;gBACd,MAAM,eAAe;oBAAE,GAAG,MAAM;oBAAE,eAAe,IAAI,OAAO,WAAW;gBAAG;gBAC1E,kBAAkB,CAAA,OAAQ;2BAAI;wBAAM;qBAAa;gBACjD,sBAAsB,aAAa,WAAW;YAChD,OAAO,IAAI,WAAW;gBACpB,kDAAkD;gBAClD,kBAAkB,CAAA,OAChB,KAAK,GAAG,CAAC,CAAA,KACP,GAAG,WAAW,KAAK,gBAAgB,WAAW,GAC1C;4BAAE,GAAG,EAAE;4BAAE,gBAAgB;wBAAc,IACvC;YAGV;QACF,OAAO;YACL,MAAM;gBAAE,SAAS;gBAAe,OAAO;gBAAS,aAAa;YAA4B;QAC3F;QACA,wBAAwB;QACxB,iBAAiB;QACjB,mBAAmB;IACrB;IAEA,MAAM,wBAAwB;QAC1B,IAAI,CAAC,iBAAiB;YAClB,MAAM;gBAAE,SAAS;gBAAe,OAAO;gBAAS,aAAa;YAAiC;YAC9F;QACJ;QAEA,WAAW;QACX,MAAM,UAAU,MAAM,CAAA,GAAA,uJAAA,CAAA,kBAAe,AAAD,EAAE,gBAAgB,WAAW;QACjE,WAAW;QACX,IAAI,SAAS;YACT,MAAM,YAAY,gBAAgB,WAAW;YAC7C,cAAc,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,KAAM,GAAG,WAAW,KAAK;YAC3D,eAAe;YACf,MAAM;gBAAE,OAAO;gBAAW,aAAa,CAAC,WAAW,EAAE,gBAAgB,cAAc,CAAC,qBAAqB,CAAC;gBAAE,UAAU;YAAK;QAC/H,OAAO;YACH,MAAM;gBAAE,SAAS;gBAAe,OAAO;gBAAS,aAAa;YAA8B;QAC/F;IACJ;IAEA,MAAM,kBAAkB,CAAC;QACrB,IAAI;YACA,IAAI,UAAU,cAAc,IAAI,UAAU,cAAc,CAAC,IAAI,OAAO,IAAI;gBACpE,MAAM,cAAc,KAAK,KAAK,CAAC,UAAU,cAAc;gBACvD,IAAI,UAAU,UAAU,EAAE;oBACtB,MAAM,aAAa,KAAK,KAAK,CAAC,UAAU,UAAU;oBAClD,MAAM,YAAY,IAAI,IAAI,WAAW,GAAG,CAAC,CAAC,IAAW;4BAAC,EAAE,EAAE;4BAAE;yBAAE;oBAC9D,MAAM,gBAAgB,YAAY,GAAG,CAAC,CAAC,SAAgB,CAAC;4BACpD,GAAG,MAAM;4BACT,GAAI,UAAU,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;wBACtC,CAAC;oBACD,WAAW;gBACf,OAAO;oBACH,0BAA0B;oBAC1B,WAAW;gBACf;YACJ,OAAO;gBACH,WAAW,EAAE;YACjB;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,kCAAkC;YAChD,MAAM;gBAAC,SAAS;gBAAe,OAAO;gBAAS,aAAa;YAA2B;QAC3F;IACJ;IAEA,MAAM,wBAAwB,CAAC;QAC3B,2DAA2D;QAC3D,eAAe;QAEf,qCAAqC;QACrC,IAAI,eAAe,IAAI,CAAC,CAAA,KAAM,GAAG,WAAW,KAAK,UAAU,WAAW,GAAG;YACrE,sBAAsB,UAAU,WAAW;YAC3C,gBAAgB;YAChB;QACJ;QAEA,wBAAwB;QACxB,IAAI,eAAe,MAAM,IAAI,mBAAmB;YAC5C,MAAM;gBACF,SAAS;gBACT,OAAO;gBACP,aAAa,CAAC,kBAAkB,EAAE,kBAAkB,2BAA2B,CAAC;YACpF;YACA;QACJ;QAEA,kCAAkC;QAClC,kBAAkB,CAAA,OAAQ;mBAAI;gBAAM;aAAU;QAC9C,sBAAsB,UAAU,WAAW;QAC3C,gBAAgB;IACpB;IAEA,MAAM,4BAA4B,CAAC;QAC/B,uBAAuB;QACvB,IAAI,oBAAoB,QAAQ;YAC5B,IAAI,eAAe,IAAI,CAAC,CAAA,KAAM,GAAG,WAAW,KAAK,UAAU,WAAW,GAAG;gBACrE,sBAAsB,UAAU,WAAW;gBAC3C,gBAAgB;gBAChB;YACJ;YAEA,IAAI,eAAe,MAAM,IAAI,mBAAmB;gBAC5C,MAAM;oBACF,SAAS;oBACT,OAAO;oBACP,aAAa,CAAC,kBAAkB,EAAE,kBAAkB,2BAA2B,CAAC;gBACpF;gBACA;YACJ;YAEA,kBAAkB,CAAA,OAAQ;uBAAI;oBAAM;iBAAU;YAC9C,sBAAsB,UAAU,WAAW;YAC3C,gBAAgB;QACpB,OAAO,IAAI,oBAAoB,QAAQ;YACnC,mBAAmB;YACnB,iBAAiB,UAAU,cAAc;YACzC,wBAAwB;QAC5B;IACJ;IAEA,MAAM,kBAAkB,CAAC;QACrB,MAAM,oBAAoB,eAAe,IAAI,CAAC,CAAA,KAAM,GAAG,WAAW,KAAK;QACvE,IAAI,mBAAmB;YACnB,sBAAsB;YACtB,gBAAgB;QACpB;IACJ;IAEA,MAAM,iBAAiB,CAAC;QACpB,MAAM,sBAAsB,eAAe,MAAM,CAAC,CAAA,KAAM,GAAG,WAAW,KAAK;QAC3E,kBAAkB;QAElB,IAAI,uBAAuB,aAAa;YACpC,IAAI,oBAAoB,MAAM,GAAG,GAAG;gBAChC,MAAM,aAAa,mBAAmB,CAAC,EAAE;gBACzC,sBAAsB,WAAW,WAAW;gBAC5C,gBAAgB;YACpB,OAAO;gBACH,sBAAsB;gBACtB,WAAW,EAAE,GAAG,wCAAwC;YAC5D;QACJ;IACJ;IAGF,MAAM,gBAAgB,QAAQ,MAAM,CAAC,CAAA,IAAK,CAAC,EAAE,WAAW;IACxD,MAAM,mBAAmB,QAAQ,MAAM,CAAC,CAAA,IAAK,EAAE,WAAW,IAAI,CAAC,UAAU,IAAI,CAAC,CAAA,MAAO,IAAI,EAAE,KAAK,EAAE,EAAE;IAEpG,MAAM,iBAAiB;QACrB;YAAE,MAAM;YAAoB,OAAO;YAAa,MAAM,wMAAA,CAAA,UAAO;QAAC;QAC9D;YAAE,MAAM;YAAiC,OAAO;YAAyB,MAAM,wMAAA,CAAA,UAAO;QAAC;QACvF;YAAE,MAAM;YAAqC,OAAO;YAAsB,MAAM,wMAAA,CAAA,UAAO;QAAC;KACzF;IAED,MAAM,sBAAsB,CAAC;QAC3B,mBAAmB;IACrB;IAEA,MAAM,gBAAgB,kBACpB,8OAAC,0IAAA,CAAA,aAAU;YACT,MAAM;YACN,kBAAkB;YAClB,kBAAkB;YAClB,iBAAiB;YACjB,mBAAmB;YACnB,iBAAiB;YACjB,YAAY;YACZ,iBAAiB;YACjB,mBAAmB;YACnB,aAAa;YACb,cAAc;YACd,iBAAiB;YACjB,qBAAqB;YACrB,qBAAqB;YACrB,aAAa;YACb,cAAc;YACd,mBAAmB;;;;;;IAIvB,MAAM,qBAAqB,IAAI,SAAS;IACxC,MAAM,sBAAsB,IAAI,SAAS;IAEzC,qBACE,8OAAC;QAAI,WAAU;;YACZ,yBACC,8OAAC,iIAAA,CAAA,QAAK;gBAAC,MAAM;gBAAY,cAAc;0BACrC,cAAA,8OAAC,iIAAA,CAAA,eAAY;oBAAC,MAAK;oBAAO,WAAU;;sCAClC,8OAAC,iIAAA,CAAA,cAAW;;8CACR,8OAAC,iIAAA,CAAA,aAAU;oCAAC,WAAU;8CAAU;;;;;;8CAChC,8OAAC,iIAAA,CAAA,mBAAgB;oCAAC,WAAU;8CAAU;;;;;;;;;;;;wBAIzC;;;;;;;;;;;qCAIL,8OAAC;gBAAI,KAAK;gBAAY,WAAU;0BAC9B,cAAA,8OAAC,mIAAA,CAAA,UAAO;oBAAC,MAAK;oBAAO,aAAY;oBAAO,SAAS,UAAU,cAAc,aAAa;8BACnF;;;;;;;;;;;0BAKP,8OAAC;gBAAI,WAAU;;oBACZ;oBAGA,yBACG,8OAAC;wBAAO,WAAU;wBAA2E,OAAO;4BAAE,QAAQ;wBAAmB;;0CAC7H,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAQ,MAAK;gCAAO,SAAS,IAAM,cAAc;0CACjE,cAAA,8OAAC,kMAAA,CAAA,OAAI;;;;;;;;;;4BAEJ,iCACD,8OAAC;gCAAI,WAAU;0CACV,gBAAgB,cAAc;;;;;;0CAGnC,8OAAC;gCAAI,WAAU;;;;;;;;;;;+BAGnB,qDAAqD;oBACrD,gBAAgB,6BACZ,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;sCACZ,eAAe,GAAG,CAAC,CAAA,mBACpB,8OAAC,mIAAA,CAAA,kBAAe;8CACZ,cAAA,8OAAC;wCAAI,WAAU;;0DACX,8OAAC,kIAAA,CAAA,SAAM;gDACP,SAAS,GAAG,WAAW,KAAK,qBAAqB,cAAc;gDAC/D,MAAK;gDACL,WAAU;gDACV,SAAS,IAAM,gBAAgB,GAAG,WAAW;0DAE5C,GAAG,cAAc;;;;;;0DAElB,8OAAC;gDAAI,WAAU;;kEACf,8OAAC,mIAAA,CAAA,UAAO;;0EACJ,8OAAC,mIAAA,CAAA,iBAAc;gEAAC,OAAO;0EACvB,cAAA,8OAAC,kIAAA,CAAA,SAAM;oEAAC,SAAQ;oEAAQ,MAAK;oEAAO,WAAU;oEAAU,SAAS,IAAM;8EAA4B,cAAA,8OAAC,kMAAA,CAAA,OAAI;wEAAC,MAAM;;;;;;;;;;;;;;;;0EAE/G,8OAAC,mIAAA,CAAA,iBAAc;0EAAC;;;;;;;;;;;;kEAEpB,8OAAC,mIAAA,CAAA,UAAO;;0EACJ,8OAAC,mIAAA,CAAA,iBAAc;gEAAC,OAAO;0EACvB,cAAA,8OAAC,kIAAA,CAAA,SAAM;oEAAC,SAAQ;oEAAQ,MAAK;oEAAO,WAAU;oEAAU,SAAS;wEACzD,mBAAmB;wEACnB,mBAAmB;wEACnB,iBAAiB,GAAG,cAAc;wEAClC,wBAAwB;oEAChC;8EAAG,cAAA,8OAAC,sMAAA,CAAA,SAAM;wEAAC,MAAM;;;;;;;;;;;;;;;;0EAEjB,8OAAC,mIAAA,CAAA,iBAAc;0EAAC;;;;;;;;;;;;kEAEpB,8OAAC,mIAAA,CAAA,UAAO;;0EACJ,8OAAC,mIAAA,CAAA,iBAAc;gEAAC,OAAO;0EACvB,cAAA,8OAAC,kIAAA,CAAA,SAAM;oEAAC,SAAQ;oEAAQ,MAAK;oEAAO,WAAU;oEAAU,SAAS,IAAM,eAAe,GAAG,WAAW;8EAAG,cAAA,8OAAC,4LAAA,CAAA,IAAK;wEAAC,MAAM;;;;;;;;;;;;;;;;0EAEpH,8OAAC,mIAAA,CAAA,iBAAc;0EAAC;;;;;;;;;;;;;;;;;;;;;;;;mCAhCN,GAAG,WAAW;;;;;;;;;;;;;;;oBA4C/C,gBAAgB,6BACb,8OAAC;wBAAI,KAAK;wBAAc,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE;wBAAwF,OAAO;4BAAE,aAAa,CAAC,YAAY,WAAW,OAAO,IAAI,UAAU,aAAa,GAAG,WAAW,OAAO,CAAC,WAAW,CAAC,EAAE,CAAC,GAAE;wBAAI;kCACrP,cAAA,8OAAC;4BAAI,WAAU;sCACX,cAAA,8OAAC,+HAAA,CAAA,YAAS;gCAAC,UAAU;gCAAoB,QAAQ;gCAAiB,SAAS;gCAAS,SAAS;gCAAS,mBAAmB;;;;;;;;;;;;;;;;;;;;;;0BAKrI,8OAAC,kIAAA,CAAA,SAAM;gBAAC,MAAM;gBAAsB,cAAc;0BAC9C,cAAA,8OAAC,kIAAA,CAAA,gBAAa;oBAAC,MAAK;;sCAChB,8OAAC,kIAAA,CAAA,eAAY;;8CACT,8OAAC,kIAAA,CAAA,cAAW;;wCAAE,oBAAoB,WAAW,WAAW;wCAAO;;;;;;;8CAC/D,8OAAC,kIAAA,CAAA,oBAAiB;8CACb,oBAAoB,WACf,2DACA,CAAC,oBAAoB,EAAE,iBAAiB,gBAAgB;;;;;;;;;;;;sCAItE,8OAAC;4BAAI,WAAU;sCACX,cAAA,8OAAC;gCAAI,WAAU;;kDACX,8OAAC,iIAAA,CAAA,QAAK;wCAAC,SAAQ;wCAAiB,WAAU;kDAAa;;;;;;kDACvD,8OAAC,iIAAA,CAAA,QAAK;wCACF,IAAG;wCACH,OAAO;wCACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;wCAChD,WAAU;;;;;;;;;;;;;;;;;sCAItB,8OAAC,kIAAA,CAAA,eAAY;;8CACT,8OAAC,kIAAA,CAAA,cAAW;oCAAC,OAAO;8CAAC,cAAA,8OAAC,kIAAA,CAAA,SAAM;wCAAC,SAAQ;kDAAU;;;;;;;;;;;8CAC/C,8OAAC,kIAAA,CAAA,SAAM;oCAAC,SAAS;oCAAqB,UAAU,CAAC,cAAc,IAAI,MAAM;;wCACpE,yBAAW,8OAAC,iNAAA,CAAA,UAAO;4CAAC,WAAU;;;;;;wCAA+B;;;;;;;;;;;;;;;;;;;;;;;;0BAM9E,8OAAC,kIAAA,CAAA,SAAM;gBAAC,MAAM;gBAAqB,cAAc;0BAC7C,cAAA,8OAAC,kIAAA,CAAA,gBAAa;;sCACV,8OAAC,kIAAA,CAAA,eAAY;;8CACT,8OAAC,kIAAA,CAAA,cAAW;8CAAE,oBAAoB,SAAS,mBAAmB;;;;;;8CAC9D,8OAAC,kIAAA,CAAA,oBAAiB;8CACb,oBAAoB,SACf,6DACA;;;;;;;;;;;;sCAId,8OAAC;4BAAI,WAAU;sCACV,kCAAoB,8OAAC,iNAAA,CAAA,UAAO;gCAAC,WAAU;;;;;qDACpC,8OAAC;gCAAI,WAAU;;oCACV,WAAW,GAAG,CAAC,CAAA,mBACZ,8OAAC,kIAAA,CAAA,SAAM;4CAAsB,SAAQ;4CAAQ,WAAU;4CAAuB,SAAS,IAAM,0BAA0B;sDAClH,GAAG,cAAc;2CADT,GAAG,WAAW;;;;;oCAI9B,WAAW,MAAM,KAAK,mBAAK,8OAAC;wCAAE,WAAU;kDAA4C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQjH","debugId":null}},
    {"offset": {"line": 12760, "column": 0}, "map": {"version":3,"sources":["file:///S:/Development/BabelPhish/code_base/ai_browser/src/app/dashboard/page.tsx"],"sourcesContent":["\r\n'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Dashboard } from \"@/components/Dashboard\";\r\nimport { SidebarProvider } from \"@/components/ui/sidebar\";\r\n\r\nexport default function DashboardPage() {\r\n  const router = useRouter();\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const session = localStorage.getItem('session');\r\n    if (!session) {\r\n      router.push('/');\r\n    } else {\r\n      setIsAuthenticated(true);\r\n    }\r\n  }, [router]);\r\n\r\n  if (!isAuthenticated) {\r\n    return null; // or a loading spinner\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <SidebarProvider defaultOpen={true}>\r\n        <Dashboard />\r\n      </SidebarProvider>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,UAAU,aAAa,OAAO,CAAC;QACrC,IAAI,CAAC,SAAS;YACZ,OAAO,IAAI,CAAC;QACd,OAAO;YACL,mBAAmB;QACrB;IACF,GAAG;QAAC;KAAO;IAEX,IAAI,CAAC,iBAAiB;QACpB,OAAO,MAAM,uBAAuB;IACtC;IAEA,qBACE,8OAAC;kBACC,cAAA,8OAAC,mIAAA,CAAA,kBAAe;YAAC,aAAa;sBAC5B,cAAA,8OAAC,+HAAA,CAAA,YAAS;;;;;;;;;;;;;;;AAIlB","debugId":null}}]
}