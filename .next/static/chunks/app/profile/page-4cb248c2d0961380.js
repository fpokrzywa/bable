(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{968:(e,a,s)=>{"use strict";s.d(a,{b:()=>n});var t=s(2115),r=s(3540),l=s(5155),i=t.forwardRef((e,a)=>(0,l.jsx)(r.sG.label,{...e,ref:a,onMouseDown:a=>{var s;a.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i.displayName="Label";var n=i},1107:(e,a,s)=>{Promise.resolve().then(s.bind(s,3246))},3246:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>g});var t=s(5155),r=s(2115),l=s(5695),i=s(31),n=s(5791),o=s(7481),d=s(4744),c=s(5712),u=s(3971),f=s(7906),h=s(8382),m=s(285),p=s(8341),x=s(8856);function v(){let e=(0,l.useRouter)(),[a,s]=(0,r.useState)(!1),{toast:v}=(0,o.dj)(),{state:g,openMobile:w,setOpenMobile:j}=(0,i.cL)(),N=(0,f.a)(),[b,k]=(0,r.useState)(null),[y,S]=(0,r.useState)([]),[E,L]=(0,r.useState)(!0),P=()=>{let a=localStorage.getItem("session");if(!a)return void e.push("/");let t=JSON.parse(a).email;if(!t)return void e.push("/");s(!0);let r=(0,d.Ob)();if(r.user&&r.workspaces.length>=0){k(r.user),S(r.workspaces),L(!1);return}R(t)},R=async e=>{L(!0);try{let[a,s]=await Promise.all([(0,d.VM)(e),(0,c.F)(e)]);k(a),S(s)}catch(e){console.error("Failed to fetch initial data:",e),v({variant:"destructive",title:"Error",description:"Could not load user data."})}finally{L(!1)}};if((0,r.useEffect)(()=>{P()},[e]),!a)return null;let A=()=>(0,t.jsx)(n.G,{user:b,minimizedWidgets:[],favoritedWidgets:[],onRestoreWidget:()=>{},onRestoreFavorite:()=>{},onProfileUpdate:()=>{let e=JSON.parse(localStorage.getItem("session")||"{}").email;e&&R(e)},workspaces:y,onLoadWorkspace:a=>{e.push("/dashboard"),v({title:"Switching to ".concat(a.workspace_name,"..."),description:"Redirecting to dashboard."})},onWorkspaceAction:a=>{e.push("/dashboard"),v({title:"Redirecting to dashboard to manage workspaces."})}});return E?(0,t.jsx)(()=>(0,t.jsxs)("div",{className:"flex h-screen w-screen items-center justify-center",children:[(0,t.jsx)(x.E,{className:"h-full w-16"}),(0,t.jsxs)("div",{className:"flex-1 p-8",children:[(0,t.jsx)(x.E,{className:"h-8 w-1/4 mb-4"}),(0,t.jsx)(x.E,{className:"h-4 w-1/2 mb-8"}),(0,t.jsx)(x.E,{className:"h-64 w-full"})]})]}),{}):(0,t.jsxs)("div",{className:"relative flex h-screen w-screen overflow-hidden bg-background",children:[N?(0,t.jsx)(h.cj,{open:w,onOpenChange:j,children:(0,t.jsxs)(h.h,{side:"left",className:"p-0 w-[300px] bg-card/95",children:[(0,t.jsxs)(h.Fm,{children:[(0,t.jsx)(h.qp,{className:"sr-only",children:"Main Menu"}),(0,t.jsx)(h.Qs,{className:"sr-only",children:"Navigate through workspaces, favorites, and settings."})]}),A()]})}):(0,t.jsx)("div",{className:"z-50 h-full",children:(0,t.jsx)(i.Bx,{side:"left",collapsible:"icon",variant:"collapsed"===g?"floating":"sidebar",children:A()})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden relative transition-all duration-300 ease-in-out",style:{paddingLeft:N?"0px":"expanded"===g?"var(--sidebar-width)":"calc(var(--sidebar-width-icon, 3.5rem))"},children:[(0,t.jsx)("main",{className:"flex-1 overflow-y-auto no-scrollbar pt-[calc(5vh)]",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-6",children:(0,t.jsx)(u.W,{user:b,onProfileUpdate:()=>{let e=JSON.parse(localStorage.getItem("session")||"{}").email;e&&R(e)},isPage:!0})})}),N&&(0,t.jsx)("header",{className:"absolute top-0 left-0 right-0 p-2 flex items-center justify-between z-30",style:{height:56},children:(0,t.jsx)(m.$,{variant:"ghost",size:"icon",onClick:()=>j(!0),children:(0,t.jsx)(p.A,{})})})]})]})}let g=()=>(0,t.jsx)(i.GB,{defaultOpen:!0,children:(0,t.jsx)(v,{})})},5943:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(157).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},5977:(e,a,s)=>{"use strict";s.d(a,{H4:()=>N,_V:()=>j,bL:()=>w});var t=s(2115),r=s(6081),l=s(9033),i=s(2712),n=s(3540),o=s(5155),d="Avatar",[c,u]=(0,r.A)(d),[f,h]=c(d),m=t.forwardRef((e,a)=>{let{__scopeAvatar:s,...r}=e,[l,i]=t.useState("idle");return(0,o.jsx)(f,{scope:s,imageLoadingStatus:l,onImageLoadingStatusChange:i,children:(0,o.jsx)(n.sG.span,{...r,ref:a})})});m.displayName=d;var p="AvatarImage",x=t.forwardRef((e,a)=>{let{__scopeAvatar:s,src:r,onLoadingStatusChange:d=()=>{},...c}=e,u=h(p,s),f=function(e,a){let[s,r]=t.useState("idle");return(0,i.N)(()=>{if(!e)return void r("error");let s=!0,t=new window.Image,l=e=>()=>{s&&r(e)};return r("loading"),t.onload=l("loaded"),t.onerror=l("error"),t.src=e,a&&(t.referrerPolicy=a),()=>{s=!1}},[e,a]),s}(r,c.referrerPolicy),m=(0,l.c)(e=>{d(e),u.onImageLoadingStatusChange(e)});return(0,i.N)(()=>{"idle"!==f&&m(f)},[f,m]),"loaded"===f?(0,o.jsx)(n.sG.img,{...c,ref:a,src:r}):null});x.displayName=p;var v="AvatarFallback",g=t.forwardRef((e,a)=>{let{__scopeAvatar:s,delayMs:r,...l}=e,i=h(v,s),[d,c]=t.useState(void 0===r);return t.useEffect(()=>{if(void 0!==r){let e=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(e)}},[r]),d&&"loaded"!==i.imageLoadingStatus?(0,o.jsx)(n.sG.span,{...l,ref:a}):null});g.displayName=v;var w=m,j=x,N=g}},e=>{var a=a=>e(e.s=a);e.O(0,[802,977,195,488,413,971,441,684,358],()=>a(1107)),_N_E=e.O()}]);