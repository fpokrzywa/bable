"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[971],{1394:(e,s,a)=>{a.d(s,{BK:()=>c,eu:()=>d,q5:()=>n});var l=a(5155),r=a(2115),i=a(5977),t=a(9434);let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(i.bL,{ref:s,className:(0,t.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});d.displayName=i.bL.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(i._V,{ref:s,className:(0,t.cn)("aspect-square h-full w-full",a),...r})});c.displayName=i._V.displayName;let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(i.H4,{ref:s,className:(0,t.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});n.displayName=i.H4.displayName},3971:(e,s,a)=>{a.d(s,{W:()=>j});var l=a(5155),r=a(2115),i=a(1394),t=a(285),d=a(6695),c=a(2523),n=a(5057),o=a(8539),u=a(9434),f=a(4744),m=a(8856),x=a(7481),h=a(5943);function j(e){var s,a;let{user:j,userId:p,onProfileUpdate:g,isPage:N=!1}=e,[v,b]=(0,r.useState)(j||null),[w,y]=(0,r.useState)(!j),[k,E]=(0,r.useState)(!1),[_,C]=(0,r.useState)(!0),{toast:F}=(0,x.dj)(),R=(0,r.useRef)(null);(0,r.useEffect)(()=>{(async()=>{if(j){b(j),y(!1);return}if(p){y(!0);try{let e=await (0,f.kl)(p);b(e)}catch(e){console.error("Failed to fetch user data:",e),F({variant:"destructive",title:"Error",description:"Failed to load user profile."})}finally{y(!1)}}})()},[j,p,F]);let S=async()=>{v&&(await (0,f.eg)(v)?(F({title:"Success",description:"Profile updated successfully!",duration:3e3}),g()):F({variant:"destructive",title:"Error",description:"Failed to update profile."}))},T=e=>{if(!v)return;let{id:s,value:a}=e.target;b({...v,[s]:a})};return w?(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)(d.Zp,{children:[(0,l.jsx)(d.aR,{children:(0,l.jsx)(m.E,{className:"h-5 w-2/5"})}),(0,l.jsxs)(d.Wu,{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(m.E,{className:"h-24 w-24 rounded-full"}),(0,l.jsxs)("div",{className:"grid gap-1.5",children:[(0,l.jsx)(m.E,{className:"h-8 w-32"}),(0,l.jsx)(m.E,{className:"h-5 w-48"}),(0,l.jsx)(m.E,{className:"h-9 w-24 mt-1"})]})]}),(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(m.E,{className:"h-4 w-16"}),(0,l.jsx)(m.E,{className:"h-10 w-full"})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(m.E,{className:"h-4 w-16"}),(0,l.jsx)(m.E,{className:"h-10 w-full"})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(m.E,{className:"h-4 w-16"}),(0,l.jsx)(m.E,{className:"h-20 w-full"})]})]})]})]})}):v?(0,l.jsxs)("div",{className:(0,u.cn)(!N&&"flex flex-col h-full overflow-hidden"),children:[(0,l.jsx)("div",{className:(0,u.cn)(!N&&"flex-grow overflow-y-auto no-scrollbar p-6 space-y-6"),children:(0,l.jsxs)(d.Zp,{children:[N&&(0,l.jsx)(()=>(0,l.jsxs)(d.aR,{children:[(0,l.jsx)(d.ZB,{children:"Profile"}),(0,l.jsx)(d.BT,{children:"This is how others will see you on the site."})]}),{}),(0,l.jsxs)(d.Wu,{className:(0,u.cn)("space-y-8",N&&"pt-6"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("div",{className:"relative group",onClick:()=>{var e;null==(e=R.current)||e.click()},children:[(0,l.jsxs)(i.eu,{className:"h-24 w-24",children:[(0,l.jsx)(i.BK,{src:v.avatar,alt:"User avatar"}),(0,l.jsxs)(i.q5,{children:[null==(s=v.first_name)?void 0:s.substring(0,1),null==(a=v.last_name)?void 0:a.substring(0,1)]})]}),(0,l.jsx)("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:(0,l.jsx)(h.A,{className:"text-white",size:32})}),(0,l.jsx)("input",{type:"file",ref:R,onChange:e=>{if(e.target.files&&e.target.files[0]){let s=e.target.files[0],a=new FileReader;a.onloadend=()=>{v&&b({...v,avatar:a.result})},a.readAsDataURL(s)}},className:"hidden",accept:"image/*"})]}),(0,l.jsxs)("div",{className:"grid gap-1.5",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold",children:v.username||"".concat(v.first_name," ").concat(v.last_name)}),(0,l.jsx)("p",{className:"text-muted-foreground",children:v.email})]})]}),(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(n.J,{htmlFor:"first_name",children:"First Name"}),(0,l.jsx)(c.p,{id:"first_name",value:v.first_name||"",onChange:T})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(n.J,{htmlFor:"last_name",children:"Last Name"}),(0,l.jsx)(c.p,{id:"last_name",value:v.last_name||"",onChange:T})]})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(n.J,{htmlFor:"bio",children:"Bio"}),(0,l.jsx)(o.T,{id:"bio",placeholder:"Tell us a little bit about yourself",value:v.bio||"",onChange:T})]})]})]})]})}),!N&&(0,l.jsxs)("div",{className:"flex-shrink-0 flex justify-end items-center gap-2 p-6 bg-background/80 backdrop-blur-sm",children:[(0,l.jsx)(t.$,{variant:"outline",children:"Cancel"}),(0,l.jsx)(t.$,{onClick:S,children:"Save Changes"})]}),N&&(0,l.jsx)("div",{className:"flex justify-end mt-6",children:(0,l.jsx)(t.$,{onClick:S,children:"Save Changes"})})]}):(0,l.jsx)("div",{children:"Failed to load profile. Please try again later."})}},5057:(e,s,a)=>{a.d(s,{J:()=>n});var l=a(5155),r=a(2115),i=a(968),t=a(2085),d=a(9434);let c=(0,t.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(i.b,{ref:s,className:(0,d.cn)(c(),a),...r})});n.displayName=i.b.displayName},8539:(e,s,a)=>{a.d(s,{T:()=>t});var l=a(5155),r=a(2115),i=a(9434);let t=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...r})});t.displayName="Textarea"}}]);