"use strict";exports.id=657,exports.ids=[657],exports.modules={3315:(e,s,a)=>{a.d(s,{eu:()=>v,q5:()=>y,BK:()=>w});var l=a(60687),r=a(43210),i=a(11273),d=a(13495),t=a(66156),n=a(3416),c="Avatar",[o,u]=(0,i.A)(c),[m,f]=o(c),x=r.forwardRef((e,s)=>{let{__scopeAvatar:a,...i}=e,[d,t]=r.useState("idle");return(0,l.jsx)(m,{scope:a,imageLoadingStatus:d,onImageLoadingStatusChange:t,children:(0,l.jsx)(n.sG.span,{...i,ref:s})})});x.displayName=c;var h="AvatarImage",g=r.forwardRef((e,s)=>{let{__scopeAvatar:a,src:i,onLoadingStatusChange:c=()=>{},...o}=e,u=f(h,a),m=function(e,s){let[a,l]=r.useState("idle");return(0,t.N)(()=>{if(!e)return void l("error");let a=!0,r=new window.Image,i=e=>()=>{a&&l(e)};return l("loading"),r.onload=i("loaded"),r.onerror=i("error"),r.src=e,s&&(r.referrerPolicy=s),()=>{a=!1}},[e,s]),a}(i,o.referrerPolicy),x=(0,d.c)(e=>{c(e),u.onImageLoadingStatusChange(e)});return(0,t.N)(()=>{"idle"!==m&&x(m)},[m,x]),"loaded"===m?(0,l.jsx)(n.sG.img,{...o,ref:s,src:i}):null});g.displayName=h;var j="AvatarFallback",p=r.forwardRef((e,s)=>{let{__scopeAvatar:a,delayMs:i,...d}=e,t=f(j,a),[c,o]=r.useState(void 0===i);return r.useEffect(()=>{if(void 0!==i){let e=window.setTimeout(()=>o(!0),i);return()=>window.clearTimeout(e)}},[i]),c&&"loaded"!==t.imageLoadingStatus?(0,l.jsx)(n.sG.span,{...d,ref:s}):null});p.displayName=j;var N=a(4780);let v=r.forwardRef(({className:e,...s},a)=>(0,l.jsx)(x,{ref:a,className:(0,N.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...s}));v.displayName=x.displayName;let w=r.forwardRef(({className:e,...s},a)=>(0,l.jsx)(g,{ref:a,className:(0,N.cn)("aspect-square h-full w-full",e),...s}));w.displayName=g.displayName;let y=r.forwardRef(({className:e,...s},a)=>(0,l.jsx)(p,{ref:a,className:(0,N.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...s}));y.displayName=p.displayName},16657:(e,s,a)=>{a.d(s,{W:()=>g});var l=a(60687),r=a(43210),i=a(3315),d=a(29523),t=a(44493),n=a(89667),c=a(80013),o=a(34729),u=a(4780),m=a(49048),f=a(85726),x=a(29867),h=a(69861);function g({user:e,userId:s,onProfileUpdate:a,isPage:g=!1}){let[j,p]=(0,r.useState)(e||null),[N,v]=(0,r.useState)(!e),[w,y]=(0,r.useState)(!1),[b,E]=(0,r.useState)(!0),{toast:R}=(0,x.dj)(),S=(0,r.useRef)(null),k=async()=>{j&&(await (0,m.eg)(j)?(R({title:"Success",description:"Profile updated successfully!",duration:3e3}),a()):R({variant:"destructive",title:"Error",description:"Failed to update profile."}))},C=e=>{if(!j)return;let{id:s,value:a}=e.target;p({...j,[s]:a})};return N?(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)(t.Zp,{children:[(0,l.jsx)(t.aR,{children:(0,l.jsx)(f.E,{className:"h-5 w-2/5"})}),(0,l.jsxs)(t.Wu,{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(f.E,{className:"h-24 w-24 rounded-full"}),(0,l.jsxs)("div",{className:"grid gap-1.5",children:[(0,l.jsx)(f.E,{className:"h-8 w-32"}),(0,l.jsx)(f.E,{className:"h-5 w-48"}),(0,l.jsx)(f.E,{className:"h-9 w-24 mt-1"})]})]}),(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(f.E,{className:"h-4 w-16"}),(0,l.jsx)(f.E,{className:"h-10 w-full"})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(f.E,{className:"h-4 w-16"}),(0,l.jsx)(f.E,{className:"h-10 w-full"})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(f.E,{className:"h-4 w-16"}),(0,l.jsx)(f.E,{className:"h-20 w-full"})]})]})]})]})}):j?(0,l.jsxs)("div",{className:(0,u.cn)(!g&&"flex flex-col h-full overflow-hidden"),children:[(0,l.jsx)("div",{className:(0,u.cn)(!g&&"flex-grow overflow-y-auto no-scrollbar p-6 space-y-6"),children:(0,l.jsxs)(t.Zp,{children:[g&&(0,l.jsx)(()=>(0,l.jsxs)(t.aR,{children:[(0,l.jsx)(t.ZB,{children:"Profile"}),(0,l.jsx)(t.BT,{children:"This is how others will see you on the site."})]}),{}),(0,l.jsxs)(t.Wu,{className:(0,u.cn)("space-y-8",g&&"pt-6"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("div",{className:"relative group",onClick:()=>{S.current?.click()},children:[(0,l.jsxs)(i.eu,{className:"h-24 w-24",children:[(0,l.jsx)(i.BK,{src:j.avatar,alt:"User avatar"}),(0,l.jsxs)(i.q5,{children:[j.first_name?.substring(0,1),j.last_name?.substring(0,1)]})]}),(0,l.jsx)("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:(0,l.jsx)(h.A,{className:"text-white",size:32})}),(0,l.jsx)("input",{type:"file",ref:S,onChange:e=>{if(e.target.files&&e.target.files[0]){let s=e.target.files[0],a=new FileReader;a.onloadend=()=>{j&&p({...j,avatar:a.result})},a.readAsDataURL(s)}},className:"hidden",accept:"image/*"})]}),(0,l.jsxs)("div",{className:"grid gap-1.5",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold",children:j.username||`${j.first_name} ${j.last_name}`}),(0,l.jsx)("p",{className:"text-muted-foreground",children:j.email})]})]}),(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(c.J,{htmlFor:"first_name",children:"First Name"}),(0,l.jsx)(n.p,{id:"first_name",value:j.first_name||"",onChange:C})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(c.J,{htmlFor:"last_name",children:"Last Name"}),(0,l.jsx)(n.p,{id:"last_name",value:j.last_name||"",onChange:C})]})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(c.J,{htmlFor:"bio",children:"Bio"}),(0,l.jsx)(o.T,{id:"bio",placeholder:"Tell us a little bit about yourself",value:j.bio||"",onChange:C})]})]})]})]})}),!g&&(0,l.jsxs)("div",{className:"flex-shrink-0 flex justify-end items-center gap-2 p-6 bg-background/80 backdrop-blur-sm",children:[(0,l.jsx)(d.$,{variant:"outline",children:"Cancel"}),(0,l.jsx)(d.$,{onClick:k,children:"Save Changes"})]}),g&&(0,l.jsx)("div",{className:"flex justify-end mt-6",children:(0,l.jsx)(d.$,{onClick:k,children:"Save Changes"})})]}):(0,l.jsx)("div",{children:"Failed to load profile. Please try again later."})}},34729:(e,s,a)=>{a.d(s,{T:()=>d});var l=a(60687),r=a(43210),i=a(4780);let d=r.forwardRef(({className:e,...s},a)=>(0,l.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...s}));d.displayName="Textarea"},80013:(e,s,a)=>{a.d(s,{J:()=>c});var l=a(60687),r=a(43210),i=a(78148),d=a(24224),t=a(4780);let n=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef(({className:e,...s},a)=>(0,l.jsx)(i.b,{ref:a,className:(0,t.cn)(n(),e),...s}));c.displayName=i.b.displayName}};